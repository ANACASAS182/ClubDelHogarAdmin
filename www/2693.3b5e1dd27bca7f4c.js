"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2693],{2693:(I,m,l)=>{l.r(m),l.d(m,{RegistroPageModule:()=>j});var p=l(2881),u=l(9417),c=l(3092),h=l(9870),o=l(1360),_=l(2101),f=l(7248),b=l(8061);function v(s,r){if(1&s&&(o.j41(0,"ion-select-option",25),o.EFF(1),o.k0s()),2&s){const n=r.$implicit;o.Y8G("value",n.codigo),o.R7$(),o.Lme(" ",n.descripcion," (",n.codigo,") ")}}function C(s,r){if(1&s&&(o.j41(0,"ion-select-option",25),o.EFF(1),o.k0s()),2&s){const n=r.$implicit;o.Y8G("value",n.codigo),o.R7$(),o.Lme(" ",n.nombre," (",n.codigo,") ")}}function M(s,r){1&s&&(o.j41(0,"small"),o.EFF(1," Por ahora solo se listan estados de M\xe9xico. Puedes continuar sin seleccionar estado. "),o.k0s())}function x(s,r){if(1&s){const n=o.RV6();o.qex(0),o.j41(1,"div",4)(2,"h1"),o.EFF(3,"Embassy te da la bienvenida"),o.k0s(),o.j41(4,"p")(5,"strong"),o.EFF(6,"Fuiste invitado por:"),o.k0s(),o.EFF(7),o.k0s(),o.j41(8,"div",5)(9,"small")(10,"strong"),o.EFF(11,"C\xf3digo de invitaci\xf3n:"),o.k0s(),o.EFF(12),o.k0s()(),o.j41(13,"div",6),o.nrm(14,"ion-input",7),o.k0s(),o.j41(15,"div",6)(16,"ion-input",8),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.nombres,e)||(t.nombres=e),o.Njj(e)}),o.k0s()(),o.j41(17,"div",6)(18,"ion-input",9),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.apellidos,e)||(t.apellidos=e),o.Njj(e)}),o.k0s()(),o.j41(19,"div",6)(20,"ion-input",10),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.celular,e)||(t.celular=e),o.Njj(e)}),o.k0s()(),o.j41(21,"div",6)(22,"h3",11),o.EFF(23,"Ubicaci\xf3n"),o.k0s()(),o.j41(24,"div",6)(25,"ion-searchbar",12),o.bIt("ionInput",function(e){o.eBV(n);const t=o.XpG();return o.Njj(t.onPaisSearch(e))}),o.k0s(),o.j41(26,"ion-select",13),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.paisCodigo,e)||(t.paisCodigo=e),o.Njj(e)}),o.bIt("ionChange",function(e){o.eBV(n);const t=o.XpG();return o.Njj(t.onPaisChange(e))}),o.DNE(27,v,2,3,"ion-select-option",14),o.k0s()(),o.j41(28,"div",6)(29,"ion-select",15),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.estadoCodigo,e)||(t.estadoCodigo=e),o.Njj(e)}),o.DNE(30,C,2,3,"ion-select-option",14),o.k0s(),o.DNE(31,M,2,0,"small",16),o.k0s(),o.j41(32,"div",6)(33,"ion-input",17),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.ciudad,e)||(t.ciudad=e),o.Njj(e)}),o.k0s()(),o.j41(34,"div",6)(35,"ion-input",18),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.password,e)||(t.password=e),o.Njj(e)}),o.k0s()(),o.j41(36,"div",6)(37,"ion-input",19),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.confirmPassword,e)||(t.confirmPassword=e),o.Njj(e)}),o.k0s()(),o.j41(38,"div",20)(39,"input",21),o.mxI("ngModelChange",function(e){o.eBV(n);const t=o.XpG();return o.DH7(t.aceptaTerminos,e)||(t.aceptaTerminos=e),o.Njj(e)}),o.k0s(),o.j41(40,"label",22),o.EFF(41,"Aceptar "),o.j41(42,"a",23),o.EFF(43,"t\xe9rminos y condiciones"),o.k0s()()(),o.j41(44,"button",24),o.bIt("click",function(){o.eBV(n);const e=o.XpG();return o.Njj(e.registrarUsuario())}),o.EFF(45,"Registrarme"),o.k0s()(),o.bVm()}if(2&s){const n=o.XpG();o.R7$(7),o.SpI(" ",n.usuarioInvita,""),o.R7$(5),o.SpI(" ",n.codigoInvitacion,""),o.R7$(2),o.Y8G("value",n.email),o.R7$(2),o.R50("ngModel",n.nombres),o.R7$(2),o.R50("ngModel",n.apellidos),o.R7$(2),o.R50("ngModel",n.celular),o.R7$(6),o.R50("ngModel",n.paisCodigo),o.R7$(),o.Y8G("ngForOf",n.paisesFiltrados),o.R7$(2),o.Y8G("disabled","MEX"!==n.paisCodigo||0===n.estadosFiltrados.length),o.R50("ngModel",n.estadoCodigo),o.R7$(),o.Y8G("ngForOf",n.estadosFiltrados),o.R7$(),o.Y8G("ngIf",n.paisCodigo&&"MEX"!==n.paisCodigo),o.R7$(2),o.R50("ngModel",n.ciudad),o.R7$(2),o.R50("ngModel",n.password),o.R7$(2),o.R50("ngModel",n.confirmPassword),o.R7$(2),o.R50("ngModel",n.aceptaTerminos),o.R7$(5),o.Y8G("disabled",!n.formularioValido())}}function P(s,r){1&s&&(o.j41(0,"div",26)(1,"h2"),o.EFF(2,"Tu cuenta ha sido creada"),o.k0s(),o.j41(3,"p"),o.EFF(4,"Descarga la aplicaci\xf3n de Embassy para acceder a tu cuenta y comenzar a generar ingresos."),o.k0s(),o.j41(5,"div",27)(6,"a",28),o.nrm(7,"img",29),o.k0s(),o.j41(8,"a",30),o.nrm(9,"img",31),o.k0s()()())}const R=[{path:"",component:(()=>{var s;class r{constructor(i,e,t){this.route=i,this.usuarioService=e,this.catalogosService=t,this.paises=[],this.paisesFiltrados=[],this.estadosActuales=[],this.estadosFiltrados=[],this.paisCodigo="",this.estadoCodigo="",this.ciudad="",this.usuarioInvita="",this.codigoInvitacion="",this.email="",this.EmbajadorReferenteId=0,this.nombres="",this.apellidos="",this.celular="",this.password="",this.confirmPassword="",this.aceptaTerminos=!1,this.registroExitoso=!1,this.cargando=!1,this.enviando=!1,this.canvasWidth=1200,this.canvasHeight=800,this.transform="translate(0,0) scale(1)"}ngOnInit(){this.route.paramMap.subscribe(i=>{this.codigoInvitacion=i.get("codigo")||"",this.codigoInvitacion&&(this.cargando=!0,this.usuarioService.GetDatosInvitacion(this.codigoInvitacion).subscribe({next:e=>{this.usuarioInvita=(null==e?void 0:e.nombreInvitador)||"",this.email=((null==e?void 0:e.correoElectronicoInvitacion)||"").toLowerCase(),this.EmbajadorReferenteId=(null==e?void 0:e.embajadorReferenteId)||0,this.cargando=!1},error:()=>{this.cargando=!1,alert("No se pudo validar el c\xf3digo de invitaci\xf3n.")}}))}),this.loadPaises()}loadPaises(){this.catalogosService.getCatalogoPaises().subscribe({next:i=>{if(null==i||!i.success||null==i||!i.data)return this.paises=[],void(this.paisesFiltrados=[]);this.paises=i.data,this.paisesFiltrados=[...this.paises]},error:()=>{this.paises=[],this.paisesFiltrados=[]}})}loadEstadosMex(){this.catalogosService.getCatalogoEstados().subscribe({next:i=>{if(null==i||!i.success||null==i||!i.data)return this.estadosActuales=[],void(this.estadosFiltrados=[]);this.estadosActuales=i.data,this.estadosFiltrados=[...this.estadosActuales]},error:()=>{this.estadosActuales=[],this.estadosFiltrados=[]}})}onPaisSearch(i){var e;const t=((null==i||null===(e=i.target)||void 0===e?void 0:e.value)||"").toString().trim().toLowerCase();this.paisesFiltrados=t?this.paises.filter(d=>(d.codigo||"").toLowerCase().includes(t)||(d.descripcion||"").toLowerCase().includes(t)):[...this.paises]}onPaisChange(i){this.estadoCodigo="","MEX"===this.paisCodigo?this.loadEstadosMex():(this.estadosActuales=[],this.estadosFiltrados=[])}onEstadoSearch(i){var e;const t=((null==i||null===(e=i.target)||void 0===e?void 0:e.value)||"").toString().trim().toLowerCase();this.estadosFiltrados=t?this.estadosActuales.filter(d=>(d.codigo||"").toLowerCase().includes(t)||(d.nombre||"").toLowerCase().includes(t)):[...this.estadosActuales]}formularioValido(){const i=this.nombres.trim().length>=2,e=this.apellidos.trim().length>=2,t=this.celular.replace(/\D/g,""),d=t.length>=8&&t.length<=15,a=this.password.length>=6&&this.password===this.confirmPassword,g=!!this.paisCodigo,k=this.ciudad.trim().length>=2;return!!this.email&&!!this.codigoInvitacion&&i&&e&&d&&g&&("MEX"!==this.paisCodigo||!!this.estadoCodigo)&&k&&a&&this.aceptaTerminos&&!this.cargando&&!this.enviando}registrarUsuario(){var i;if(!this.formularioValido())return void alert("Verifica que todos los campos est\xe9n completos correctamente.");this.enviando=!0;const e=this.paises.find(a=>a.codigo===this.paisCodigo)||null,t=this.estadosActuales.find(a=>a.codigo===this.estadoCodigo)||null,d={email:this.email.trim().toLowerCase(),password:this.password,codigoInvitacion:this.codigoInvitacion,nombres:this.nombres.trim(),apellidos:this.apellidos.trim(),celular:this.celular.replace(/\D/g,""),catalogoPaisId:null==e?void 0:e.id,catalogoEstadoId:"MEX"===this.paisCodigo&&null!==(i=null==t?void 0:t.id)&&void 0!==i?i:void 0,ciudad:this.ciudad.trim(),estadoTexto:"MEX"===this.paisCodigo&&(null==t?void 0:t.nombre)||""};this.usuarioService.RegistroUsuarioCodigoInvitacion(d).subscribe({next:a=>{this.enviando=!1,null!=a&&a.success?this.registroExitoso=!0:alert((null==a?void 0:a.message)||"No se pudo completar el registro.")},error:a=>{var g;this.enviando=!1,alert("Error al registrar: "+((null==a||null===(g=a.error)||void 0===g?void 0:g.message)||"intenta m\xe1s tarde"))}})}}return(s=r).\u0275fac=function(i){return new(i||s)(o.rXU(_.nX),o.rXU(f.o),o.rXU(b.f))},s.\u0275cmp=o.VBU({type:s,selectors:[["app-registro"]],standalone:!1,decls:5,vars:3,consts:[["mensajeExito",""],[3,"fullscreen"],[1,"registro-scroll"],[4,"ngIf","ngIfElse"],[1,"registro-container"],[1,"codigo-invitacion"],[1,"form-group"],["label-placement","floating","label","Correo electr\xf3nico","type","email","id","email","disabled","",1,"inputForm",3,"value"],["label-placement","floating","label","Nombre","type","text","id","nombres",1,"inputForm",3,"ngModelChange","ngModel"],["label-placement","floating","label","Apellido","type","text","id","apellidos",1,"inputForm",3,"ngModelChange","ngModel"],["label-placement","floating","label","Celular","type","tel","inputmode","tel","id","celular",1,"inputForm",3,"ngModelChange","ngModel"],[2,"margin","16px 0 6px"],["placeholder","Buscar pa\xeds...","debounce","150",3,"ionInput"],["label","Pa\xeds","label-placement","floating","interface","popover","placeholder","Selecciona un pa\xeds",1,"inputForm",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label","Estado / Provincia","label-placement","floating","interface","popover","placeholder","Selecciona un estado",1,"inputForm",3,"ngModelChange","disabled","ngModel"],[4,"ngIf"],["label-placement","floating","label","Ciudad","type","text","id","ciudad","placeholder","Ej. Ju\xe1rez",1,"inputForm",3,"ngModelChange","ngModel"],["label-placement","floating","label","Ingresa tu contrase\xf1a","type","password","id","password",1,"inputForm",3,"ngModelChange","ngModel"],["label-placement","floating","label","Confirmar contrase\xf1a","type","password","id","confirmPassword",1,"inputForm",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],["type","checkbox","id","terminos",3,"ngModelChange","ngModel"],["for","terminos"],["href","#"],[3,"click","disabled"],[3,"value"],[1,"registro-exitoso"],[1,"app-links"],["href","https://play.google.com/store/apps/details?id=com.embassybusiness.app","target","_blank"],["src","https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg","alt","Google Play"],["href","https://apps.apple.com/mx/app/embassy/id6747898144","target","_blank"],["src","https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg","alt","App Store"]],template:function(i,e){if(1&i&&(o.j41(0,"ion-content",1)(1,"div",2),o.DNE(2,x,46,17,"ng-container",3)(3,P,10,0,"ng-template",null,0,o.C5r),o.k0s()()),2&i){const t=o.sdS(4);o.Y8G("fullscreen",!0),o.R7$(2),o.Y8G("ngIf",!e.registroExitoso)("ngIfElse",t)}},dependencies:[p.Sq,p.bT,u.Zm,u.BC,u.vS,c.W9,c.$w,c.S1,c.Nm,c.Ip,c.Je,c.Gw],styles:["[_nghost-%COMP%]{display:block;padding:1rem;background-color:#fff;color:#000}.registro-container[_ngcontent-%COMP%], .registro-exitoso[_ngcontent-%COMP%]{max-width:100%;width:100%;max-width:480px;margin:auto;padding:2rem;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;background-color:#fff}.codigo-invitacion[_ngcontent-%COMP%]{border:1px dashed #888;padding:.75rem;margin-bottom:1rem;background-color:#f9f9f9;text-align:center;font-size:.9rem;color:#444}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem;display:flex;flex-direction:column}.checkbox-group[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:.5rem}button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#07c;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:700}button[_ngcontent-%COMP%]:disabled{background-color:#aaa;cursor:not-allowed}.registro-exitoso[_ngcontent-%COMP%]{text-align:center;border:1px solid #4caf50;border-radius:8px;background-color:#e8f5e9}.app-links[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:column;gap:1rem;align-items:center}.app-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;width:auto}@media (min-width: 480px){.app-links[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}}.registro-scroll[_ngcontent-%COMP%]{height:100%;overflow-y:auto;box-sizing:border-box;padding:24px 16px 40px}.registro-container[_ngcontent-%COMP%], .registro-exitoso[_ngcontent-%COMP%]{max-width:520px;margin:0 auto}"]}),r})()}];let F=(()=>{var s;class r{}return(s=r).\u0275fac=function(i){return new(i||s)},s.\u0275mod=o.$C({type:s}),s.\u0275inj=o.G2t({imports:[h.iI.forChild(R),h.iI]}),r})(),j=(()=>{var s;class r{}return(s=r).\u0275fac=function(i){return new(i||s)},s.\u0275mod=o.$C({type:s}),s.\u0275inj=o.G2t({imports:[p.MD,u.YN,c.bv,F]}),r})()}}]);