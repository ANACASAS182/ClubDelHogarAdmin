"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[673],{673:(b,h,i)=>{i.r(h),i.d(h,{GrupoSociosPageModule:()=>_});var m=i(2881),u=i(9417),n=i(3092),G=i(9870),p=i(467),g=i(7550),f=i(2042),a=i(3662),v=i(1413),y=i(152),D=i(3294),F=i(6977),R=i(7786),E=i(9172),M=i(5558),P=i(9437),B=i(7673),I=i(6354),T=i(980),$=i(5460),j=i(6152),t=i(1360),S=i(6897);const U=["class","grupo form"];function N(o,l){1&o&&(t.j41(0,"ion-text",10),t.EFF(1," Campo obligatorio* "),t.k0s())}let C=(()=>{var o;class l{constructor(e,r,s,d){this.fb=e,this.grupoService=r,this.toastController=s,this.modalCtrl=d,this.btnName="AGREGAR",this.title="AGREGAR",this.id=void 0,this.formEnviado=!1,this.formulario=this.fb.group({nombre:["",[u.k0.required,(0,$.a)()]]})}ngOnInit(){null!=this.id&&(this.btnName="GUARDAR",this.title="MODIFICAR",this.grupoService.getByID(this.id).subscribe({next:e=>{this.formulario.patchValue({nombre:e.data.nombre})}}))}enviarFormulario(){if(!this.formEnviado){if(this.formEnviado=!0,this.formulario.invalid)return this.formulario.markAllAsTouched(),void(this.formEnviado=!1);var e={nombre:(0,j.H)(this.formulario.controls.nombre.value)};null!=this.id&&(e.id=this.id),this.grupoService.save(e).pipe((0,T.j)(()=>{this.formEnviado=!1})).subscribe({next:r=>{r&&(this.toastController.create({message:"Grupo guardado.",duration:3e3,color:"success",position:"top"}).then(s=>s.present()),this.modalCtrl.dismiss(!0))}})}}getControl(e){return this.formulario.get(e)}close(){this.modalCtrl.dismiss()}}return(o=l).\u0275fac=function(e){return new(e||o)(t.rXU(u.ok),t.rXU(S.b),t.rXU(n.K_),t.rXU(n.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-modal",8,"grupo","form"]],inputs:{id:"id"},attrs:U,decls:16,vars:8,consts:[[1,"modalHeader"],["slot","end"],[3,"click"],["name","close"],[1,"ion-padding",3,"fullscreen"],[1,"modalform",3,"formGroup"],["label-placement","floating","label","Nombre del grupo","formControlName","nombre","placeholder","Nombre del grupo*","type","text",1,"inputForm",3,"ionBlur"],["color","danger",4,"ngIf"],[2,"width","100%","text-align","center"],[1,"customButton",3,"click","disabled"],["color","danger"]],template:function(e,r){if(1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s()(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return r.close()}),t.nrm(6,"ion-icon",3),t.k0s()()(),t.j41(7,"ion-content",4)(8,"form",5)(9,"ion-input",6),t.bIt("ionBlur",function(){let d;return null==(d=r.getControl("nombre"))?null:d.markAsTouched()}),t.k0s(),t.DNE(10,N,2,0,"ion-text",7),t.k0s()(),t.j41(11,"ion-footer")(12,"ion-toolbar")(13,"div",8)(14,"ion-button",9),t.bIt("click",function(){return r.enviarFormulario()}),t.EFF(15),t.k0s()()()()),2&e){let s,d;t.R7$(3),t.SpI("",r.title," GRUPO"),t.R7$(4),t.Y8G("fullscreen",!1),t.R7$(),t.Y8G("formGroup",r.formulario),t.R7$(),t.AVh("invalid",(null==(s=r.getControl("nombre"))?null:s.invalid)&&(null==(s=r.getControl("nombre"))?null:s.touched)),t.R7$(),t.Y8G("ngIf",(null==(d=r.getControl("nombre"))?null:d.invalid)&&(null==(d=r.getControl("nombre"))?null:d.touched)),t.R7$(4),t.Y8G("disabled",r.formEnviado),t.R7$(),t.SpI(" ",r.btnName," ")}},dependencies:[n.bv,n.Jm,n.QW,n.W9,n.M0,n.eU,n.iq,n.$w,n.IO,n.BC,n.ai,n.Gw,u.X1,u.qT,u.BC,u.cb,u.j4,u.JD,m.MD,m.bT],encapsulation:2}),l})();const A=["class","socios"],k=()=>[20,50,100];function O(o,l){1&o&&(t.j41(0,"th",24),t.EFF(1," Nombre "),t.k0s())}function w(o,l){if(1&o&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&o){const c=l.$implicit;t.R7$(),t.SpI(" ",c.nombre," ")}}function z(o,l){1&o&&(t.j41(0,"th",26),t.EFF(1," Opciones "),t.k0s())}function V(o,l){if(1&o){const c=t.RV6();t.j41(0,"td",25)(1,"ion-button",27),t.bIt("click",function(){const r=t.eBV(c).$implicit,s=t.XpG();return t.Njj(s.editModal(r.id))}),t.nrm(2,"ion-icon",28),t.j41(3,"small"),t.EFF(4,"Editar"),t.k0s()()()}}function W(o,l){1&o&&t.nrm(0,"tr",29)}function x(o,l){1&o&&t.nrm(0,"tr",30)}function H(o,l){if(1&o&&(t.j41(0,"tr",31)(1,"td",32),t.EFF(2," No se encontraron registros disponibles. "),t.k0s()()),2&o){const c=t.XpG();t.R7$(),t.BMQ("colspan",c.displayedColumns.length)}}const Q=[{path:"",component:(()=>{var o;class l{constructor(e,r){this.grupoService=e,this.modalCtrl=r,this.dataSourceTable=new a.I6,this.displayedColumns=["Nombre","Visualizar"],this.inputBuscar=new v.B,this.query="",this.destroy$=new v.B}ngAfterViewInit(){this.dataSourceTable.paginator=this.paginator,this.loadtable()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.inputBuscar.pipe((0,y.B)(1e3),(0,D.F)(),(0,F.Q)(this.destroy$)).subscribe(e=>{this.query=e.toString(),this.loadtable()})}loadtable(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,R.h)(this.sort.sortChange,this.paginator.page).pipe((0,E.Z)({}),(0,M.n)(()=>this.grupoService.getTablePaginated({page:this.paginator.pageIndex,size:this.paginator.pageSize,sortBy:this.sort.active,sortDir:this.sort.direction,searchQuery:this.query}).pipe((0,P.W)(()=>(0,B.of)(null)))),(0,I.T)(e=>null===e?[]:(this.total=e.data.total,e.data.items))).subscribe(e=>{this.dataSourceTable=new a.I6(e)})}addModal(){var e=this;return(0,p.A)(function*(){const r=yield e.modalCtrl.create({component:C,cssClass:"modal-grupo"});yield r.present();const{data:s}=yield r.onDidDismiss();s&&(console.log(s),e.loadtable())})()}editModal(e){var r=this;return(0,p.A)(function*(){const s=yield r.modalCtrl.create({component:C,cssClass:"modal-grupo",componentProps:{id:e}});yield s.present();const{data:d}=yield s.onDidDismiss();d&&(console.log(d),r.loadtable())})()}}return(o=l).\u0275fac=function(e){return new(e||o)(t.rXU(S.b),t.rXU(n.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-grupo",8,"socios"]],viewQuery:function(e,r){if(1&e&&(t.GBs(g.iy,5),t.GBs(f.B4,5)),2&e){let s;t.mGM(s=t.lsd())&&(r.paginator=s.first),t.mGM(s=t.lsd())&&(r.sort=s.first)}},standalone:!1,attrs:A,decls:36,vars:8,consts:[[1,"pagesHeader"],["slot","start"],["name","people","color","white"],[1,"pagesContent"],[1,"ion-align-items-center"],["size","12","size-md","9",1,"ion-text-center"],["placeholder","Buscar por Nombre",1,"inputBusqueda",3,"ionInput"],["slot","end","name","search","aria-hidden","true"],["size","12","size-md","2",1,"ion-text-center"],["expand","block",1,"customGreenButton",3,"click"],["name","add","color","white"],[1,"referidosHeader"],[1,"title"],[2,"overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Nombre"],["mat-header-cell","","style","padding-left: 1rem;","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Visualizar"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","mydivoutermulti elemento-renglon",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header","",2,"padding-left","1rem"],["mat-cell",""],["mat-header-cell",""],["fill","clear",3,"click"],["slot","icon-only","name","create"],["mat-header-row",""],["mat-row","",1,"mydivoutermulti","elemento-renglon"],[1,"mat-row"],[2,"text-align","center","padding","1rem"]],template:function(e,r){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"ion-title")(5,"h1"),t.nrm(6,"ion-icon",2),t.EFF(7," Grupo de socios"),t.k0s()()()(),t.j41(8,"ion-content",3)(9,"div")(10,"ion-grid")(11,"ion-row",4)(12,"ion-col",5)(13,"ion-input",6),t.bIt("ionInput",function(d){return r.inputBuscar.next(d.detail.value||"")}),t.nrm(14,"ion-icon",7),t.k0s()(),t.j41(15,"ion-col",8)(16,"ion-button",9),t.bIt("click",function(){return r.addModal()}),t.nrm(17,"ion-icon",10),t.EFF(18," AGREGAR"),t.k0s()()()()(),t.j41(19,"ion-card")(20,"ion-card-header",11)(21,"ion-card-title",12),t.EFF(22,"Grupos"),t.k0s()(),t.j41(23,"ion-card-content")(24,"div",13)(25,"table",14),t.qex(26,15),t.DNE(27,O,2,0,"th",16)(28,w,2,1,"td",17),t.bVm(),t.qex(29,18),t.DNE(30,z,2,0,"th",19)(31,V,5,0,"td",17),t.bVm(),t.DNE(32,W,1,0,"tr",20)(33,x,1,0,"tr",21)(34,H,3,1,"tr",22),t.k0s()(),t.nrm(35,"mat-paginator",23),t.k0s()()()),2&e&&(t.R7$(25),t.Y8G("dataSource",r.dataSourceTable),t.R7$(7),t.Y8G("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",r.displayedColumns),t.R7$(2),t.Y8G("length",r.total)("pageSizeOptions",t.lJ4(7,k))("pageSize",50))},dependencies:[n.Jm,n.QW,n.b_,n.I9,n.ME,n.tN,n.hU,n.W9,n.lO,n.eU,n.iq,n.$w,n.MC,n.ln,n.BC,n.ai,n.Gw,a.Zl,a.tL,a.ji,a.cC,a.YV,a.iL,a.KS,a.$R,a.YZ,a.NB,a.ky,g.iy,f.B4,f.aE],encapsulation:2}),l})()}];let Y=(()=>{var o;class l{}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[G.iI.forChild(Q),G.iI]}),l})(),_=(()=>{var o;class l{}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[m.MD,u.YN,n.bv,Y,a.tP,g.Ou,f.NQ]}),l})()},5460:(b,h,i)=>{function m(){return u=>0===(u.value||"").trim().length?{sinEspacios:!0}:null}i.d(h,{a:()=>m})},6152:(b,h,i)=>{function m(u,n=!0){return null==u?n?void 0:"":u.trim()}i.d(h,{H:()=>m})},6897:(b,h,i)=>{i.d(h,{b:()=>G});var m=i(7643),u=i(5312),n=i(1360);let G=(()=>{var p;class g{constructor(a){this.http=a,this.apiUrl=u.c.apiUrl+"api/Grupo"}getAllGrupos(){return this.http.get(`${this.apiUrl}/GetAllGrupos`)}getTablePaginated(a){let v={page:a.page.toString(),size:a.size.toString(),sortBy:a.sortBy,sortDir:a.sortDir,searchQuery:a.searchQuery};return this.http.get(`${this.apiUrl}/GetGruposPaginated`,{params:v})}getByID(a){let v=(new m.Nl).set("id",a);return this.http.get(`${this.apiUrl}/GetByID`,{params:v})}save(a){return this.http.post(`${this.apiUrl}/Save`,a)}}return(p=g).\u0275fac=function(a){return new(a||p)(n.KVO(m.Qq))},p.\u0275prov=n.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),g})()}}]);