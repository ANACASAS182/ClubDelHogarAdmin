"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7084],{6231:(y,C,n)=>{n.d(C,{$u:()=>f,Cn:()=>r});var f=function(d){return d[d.Admin=1]="Admin",d[d.Socio=2]="Socio",d[d.Embajadores=3]="Embajadores",d}(f||{});const b={Admin:"Administrador",Socio:"Socio",Embajadores:"Embajador"};function r(){return Object.keys(f).filter(d=>isNaN(Number(d))).map(d=>({nombre:b[d],valor:f[d]}))}},7084:(y,C,n)=>{n.r(C),n.d(C,{DashboardPageModule:()=>K});var f=n(2881),b=n(9417),r=n(3092),d=n(9870),x=n(467),m=function(o){return o[o.Grupos=1]="Grupos",o[o.Empresas=2]="Empresas",o[o.Embajadores=3]="Embajadores",o[o.Celulas=4]="Celulas",o[o.Productos=5]="Productos",o[o.Referencias=6]="Referencias",o[o.Movimientos=7]="Movimientos",o[o.Configuraci\u00f3n=8]="Configuraci\xf3n",o[o.CorteMensual=9]="CorteMensual",o[o.VisualizarEmpresa=10]="VisualizarEmpresa",o[o.PagosComisiones=11]="PagosComisiones",o}(m||{}),u=n(6231),t=n(1360),D=n(1628),F=n(2091),P=n(7248);const O=()=>["/dashboard/celulas"],S=()=>({view:"empresa"}),G=()=>["/dashboard/embajadores-diagrama"];function N(o,s){if(1&o&&(t.j41(0,"ion-item",16),t.nrm(1,"ion-icon",18),t.j41(2,"ion-label"),t.EFF(3),t.k0s()()),2&o){const i=t.XpG().$implicit;t.Y8G("routerLink",i.url),t.R7$(),t.Y8G("ios",i.icon+"-outline")("md",i.icon+"-sharp"),t.R7$(2),t.JRh(i.title)}}function V(o,s){1&o&&(t.j41(0,"ion-accordion-group",17)(1,"ion-accordion",19)(2,"ion-item",20),t.nrm(3,"ion-icon",21),t.j41(4,"ion-label"),t.EFF(5,"C\xe9lulas"),t.k0s()(),t.j41(6,"div",22)(7,"ion-menu-toggle",3)(8,"ion-item",23)(9,"ion-label"),t.EFF(10,"Empresa"),t.k0s()()(),t.j41(11,"ion-menu-toggle",3)(12,"ion-item",24)(13,"ion-label"),t.EFF(14,"Embajadores"),t.k0s()()()()()()),2&o&&(t.R7$(3),t.Y8G("ios","grid-outline")("md","grid-sharp"),t.R7$(5),t.Y8G("routerLink",t.lJ4(5,O))("queryParams",t.lJ4(6,S)),t.R7$(4),t.Y8G("routerLink",t.lJ4(7,G)))}function E(o,s){if(1&o&&(t.j41(0,"ion-menu-toggle",3),t.DNE(1,N,4,4,"ion-item",16),t.k0s(),t.DNE(2,V,15,8,"ion-accordion-group",17)),2&o){const i=s.$implicit,e=t.XpG();t.R7$(),t.vxM(i.visible&&i.enum!==e.MenuPagesEnum.Celulas?1:-1),t.R7$(),t.vxM(i.visible&&i.enum===e.MenuPagesEnum.Celulas?2:-1)}}function I(o,s){if(1&o&&(t.j41(0,"div",8)(1,"span",9),t.EFF(2,"Empresa"),t.k0s(),t.j41(3,"span",10),t.EFF(4),t.k0s()()),2&o){const i=t.XpG();t.R7$(4),t.JRh(i.empresaName)}}let z=(()=>{var o;class s{constructor(e,a,c,l,h){this.router=e,this.route=a,this.tokenService=c,this.datePipe=l,this.usuarioService=h,this.MenuPagesEnum=m,this.appPages=[{enum:m.VisualizarEmpresa,title:"Mi empresa",url:"/dashboard/visual-empresa",icon:"business",visible:!1,access:[u.$u.Socio]},{enum:m.Grupos,title:"Grupos",url:"/dashboard/grupos",icon:"people",visible:!1,access:[u.$u.Admin]},{enum:m.Empresas,title:"Empresas",url:"/dashboard/empresas",icon:"business",visible:!1,access:[u.$u.Admin]},{enum:m.Productos,title:"Productos",url:"/dashboard/productos",icon:"archive",visible:!1,access:[u.$u.Admin,u.$u.Socio]},{enum:m.Celulas,title:"C\xe9lulas",url:"/dashboard/celulas",icon:"grid",visible:!1,access:[u.$u.Admin]},{enum:m.Embajadores,title:"Usuarios",url:"/dashboard/embajadores",icon:"flag",visible:!1,access:[u.$u.Admin]},{enum:m.Referencias,title:"Referencias",url:"/dashboard/referencias",icon:"star",visible:!1,access:[u.$u.Admin,u.$u.Socio]},{enum:m.Configuraci\u00f3n,title:"Periodos",url:"/dashboard/periodos",icon:"calendar",visible:!1,access:[u.$u.Admin]},{enum:m.CorteMensual,title:"Corte mensual",url:"/dashboard/corte",icon:"calendar",visible:!1,access:[u.$u.Admin]},{enum:m.Configuraci\u00f3n,title:"Configuraci\xf3n",url:"/dashboard/configuracion",icon:"settings",visible:!1,access:[u.$u.Admin]},{enum:m.PagosComisiones,title:"Pagos / Comisiones",url:"/dashboard/pagos-comisiones",icon:"cash",visible:!1,access:[u.$u.Socio]}],this.userName="",this.celulasVisible=!1,this.empresaName=null}ngOnInit(){var e,a;const l=this.route.snapshot.data.resolverData.usuario;if(this.userName=`${l.nombres} ${l.apellidos}`,!l.roles)return;this.appPages.forEach(v=>{v.visible=v.access.includes(l.roles.enumValue)}),this.celulasVisible=!!this.appPages.find(v=>v.enum===m.Celulas&&v.visible);const p=null!==(e=null!==(a=null==l?void 0:l.id)&&void 0!==a?a:null==l?void 0:l.ID)&&void 0!==e?e:null==l?void 0:l.Id;l.roles.enumValue===u.$u.Socio&&p&&this.usuarioService.getEmpresaByUsuario(p,!0).subscribe({next:v=>{const R=null==v?void 0:v.data;this.empresaName=R?this.pickEmpresaNombre(R):null},error:()=>{}})}pickEmpresaNombre(e){var a,c,l,h,p;return null!==(a=null!==(c=null!==(l=null!==(h=null!==(p=null==e?void 0:e.razonSocial)&&void 0!==p?p:null==e?void 0:e.RazonSocial)&&void 0!==h?h:null==e?void 0:e.nombreComercial)&&void 0!==l?l:null==e?void 0:e.NombreComercial)&&void 0!==c?c:null==e?void 0:e.rfc)&&void 0!==a?a:null}ngOnDestroy(){}logout(){var e=this;return(0,x.A)(function*(){yield e.tokenService.removeToken(),e.appPages.forEach(a=>a.visible=!1),e.celulasVisible=!1,e.router.navigate(["/login"],{replaceUrl:!0})})()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(D.Ix),t.rXU(D.nX),t.rXU(F.B),t.rXU(f.vh),t.rXU(P.o))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-dashboard"]],standalone:!1,decls:27,vars:2,consts:[["contentId","main-content"],["contentId","main-content","type","overlay",1,"custom-menu"],["id","inbox-list"],["auto-hide","false"],["src","../../../assets/logo.PNG","alt","Logo",1,"logo"],[1,"menu-separator"],[1,"user-meta"],["class","meta-row",4,"ngIf"],[1,"meta-row"],[1,"meta-label"],[1,"meta-value"],[2,"height","10px"],[1,"logout-button-container"],["expand","block","color","light","size","small",3,"click"],["slot","start","name","power"],["id","main-content",1,"ion-page"],["routerDirection","root","lines","none","detail","false","routerLinkActive","selected",3,"routerLink"],[1,"menu-accordion"],["color","white","aria-hidden","true","slot","start",3,"ios","md"],["value","celulas"],["slot","header","lines","none","detail","false",1,"celulas-header"],["slot","start","color","white",3,"ios","md"],["slot","content",1,"submenu"],["lines","none","detail","false","routerDirection","root",3,"routerLink","queryParams"],["lines","none","detail","false","routerDirection","root",3,"routerLink"]],template:function(e,a){1&e&&(t.j41(0,"ion-content")(1,"ion-split-pane",0)(2,"ion-menu",1)(3,"ion-content")(4,"ion-list",2)(5,"ion-menu-toggle",3),t.nrm(6,"img",4),t.k0s(),t.Z7z(7,E,3,2,null,null,t.fX1),t.nrm(9,"div",5),t.j41(10,"ion-menu-toggle",3)(11,"div",6),t.DNE(12,I,5,1,"div",7),t.j41(13,"div",8)(14,"span",9),t.EFF(15,"Usuario"),t.k0s(),t.j41(16,"span",10),t.EFF(17),t.k0s()()()(),t.nrm(18,"div",11),t.j41(19,"ion-menu-toggle",3)(20,"div",12)(21,"ion-button",13),t.bIt("click",function(){return a.logout()}),t.nrm(22,"ion-icon",14),t.EFF(23," Cerrar Sesi\xf3n "),t.k0s()()()()()(),t.j41(24,"div",15)(25,"ion-content"),t.nrm(26,"ion-router-outlet"),t.k0s()()()()),2&e&&(t.R7$(7),t.Dyx(a.appPages),t.R7$(5),t.Y8G("ngIf",a.empresaName),t.R7$(5),t.JRh(a.userName))},dependencies:[f.bT,r.xk,r.YH,r.Jm,r.W9,r.iq,r.uz,r.he,r.nf,r.oS,r.cA,r.HP,r.Rg,r.N7,d.Wk,d.wQ],styles:['@charset "UTF-8";.userLabel[_ngcontent-%COMP%]{color:#001744;font-weight:700;font-size:18px}.buttonHeader[_ngcontent-%COMP%]{--color: #001744;font-weight:700;font-size:12px}.menu-separator[_ngcontent-%COMP%]{height:1px;background-color:#fff;margin:10px}.logout-button-container[_ngcontent-%COMP%]{justify-content:center;margin:0 10px}.name-text[_ngcontent-%COMP%]{color:#fff!important;font-weight:700;font-size:14px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0 12px;text-align:center}.menu-accordion[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{padding-left:44px}.user-meta[_ngcontent-%COMP%]{width:calc(100% - 24px);margin:10px 12px 8px;padding:10px 12px;border-radius:8px;background:#ffffff0f;border:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:saturate(120%) blur(.5px);backdrop-filter:saturate(120%) blur(.5px)}.meta-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px;line-height:1.2;margin:4px 0}.meta-label[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.06em;text-transform:uppercase;color:#cbd5e1;font-weight:700;min-width:64px}.meta-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff;text-shadow:0 1px 1px rgba(0,0,0,.2);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 2dppx){.meta-value[_ngcontent-%COMP%]{text-shadow:none}}',".menu-accordion[_ngcontent-%COMP%]   .ion-accordion-toggle-icon[_ngcontent-%COMP%], .menu-accordion[_ngcontent-%COMP%]   ion-accordion[_ngcontent-%COMP%]::part(toggle-icon){display:none!important}.celulas-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff!important}"]}),s})();var T=n(1620),U=n(9350);let g=(()=>{var o;class s{constructor(e,a,c){this.userService=e,this.toastController=a,this.router=c}canActivate(){var e=this;return(0,x.A)(function*(){var a;const c=yield function L(o,s){const i="object"==typeof s;return new Promise((e,a)=>{let l,c=!1;o.subscribe({next:h=>{l=h,c=!0},error:a,complete:()=>{c?e(l):i?e(s.defaultValue):a(new U.G)}})})}(e.userService.getUsuario());return null!=c.data.roles&&(null===(a=c.data.roles)||void 0===a?void 0:a.enumValue)==u.$u.Admin||(yield e.showToast("No tienes permiso para acceder a esta secci\xf3n"),e.router.navigate(["/dashboard"]),!1)})()}showToast(e){var a=this;return(0,x.A)(function*(){(yield a.toastController.create({message:e,duration:4e3,position:"bottom",color:"danger"})).present()})()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.KVO(P.o),t.KVO(r.K_),t.KVO(D.Ix))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var j=n(7468),M=n(7673),$=n(6354),A=n(9437);const Y=[{path:"",component:z,canActivate:[T.q],children:[{path:"inicio",loadChildren:()=>n.e(1169).then(n.bind(n,1169)).then(o=>o.InicioPageModule)},{path:"grupos",loadChildren:()=>Promise.all([n.e(3662),n.e(2042),n.e(673)]).then(n.bind(n,673)).then(o=>o.GrupoSociosPageModule),canActivate:[g]},{path:"empresas",loadChildren:()=>Promise.all([n.e(3662),n.e(2042),n.e(2906),n.e(7656)]).then(n.bind(n,7656)).then(o=>o.EmpresasPageModule),canActivate:[g]},{path:"embajadores",loadChildren:()=>Promise.all([n.e(3662),n.e(2042),n.e(2906),n.e(7061)]).then(n.bind(n,7061)).then(o=>o.EmbajadoresPageModule),canActivate:[g]},{path:"celulas",loadChildren:()=>n.e(7273).then(n.bind(n,7273)).then(o=>o.CelulasPageModule),canActivate:[g]},{path:"productos",loadChildren:()=>Promise.all([n.e(3662),n.e(2042),n.e(2906),n.e(9640),n.e(2076),n.e(1824)]).then(n.bind(n,1824)).then(o=>o.ProductosPageModule),resolve:{resolverData:(()=>{var o;class s{constructor(e){this.usuarioService=e}resolve(){return(0,j.p)({usuario:this.usuarioService.getUsuario().pipe((0,$.T)(e=>e.data),(0,A.W)(()=>(0,M.of)([])))})}}return(o=s).\u0275fac=function(e){return new(e||o)(t.KVO(P.o))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})()}},{path:"referencias",loadChildren:()=>Promise.all([n.e(3662),n.e(2042),n.e(2906),n.e(667)]).then(n.bind(n,667)).then(o=>o.ReferenciasPageModule),resolve:{resolverData:(()=>{var o;class s{constructor(e){this.usuarioService=e}resolve(){return(0,j.p)({usuario:this.usuarioService.getUsuario().pipe((0,$.T)(e=>e.data),(0,A.W)(()=>(0,M.of)([])))})}}return(o=s).\u0275fac=function(e){return new(e||o)(t.KVO(P.o))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})()}},{path:"pagos-comisiones",loadComponent:()=>Promise.all([n.e(3662),n.e(969)]).then(n.bind(n,969)).then(o=>o.PagosComisionesPage)},{path:"movimientos",loadChildren:()=>n.e(9348).then(n.bind(n,9348)).then(o=>o.MovimientosPageModule),canActivate:[g]},{path:"configuracion",loadChildren:()=>n.e(8746).then(n.bind(n,8746)).then(o=>o.ConfiguracionPageModule)},{path:"periodos",loadChildren:()=>Promise.all([n.e(3662),n.e(2042),n.e(9640),n.e(2076),n.e(3076)]).then(n.bind(n,3076)).then(o=>o.PeriodosPageModule),canActivate:[g]},{path:"corte",loadChildren:()=>Promise.all([n.e(2076),n.e(7344)]).then(n.bind(n,7344)).then(o=>o.CorteMensualPageModule),canActivate:[g]},{path:"corteMensual",loadChildren:()=>Promise.all([n.e(2076),n.e(7344)]).then(n.bind(n,7344)).then(o=>o.CorteMensualPageModule),canActivate:[g]},{path:"embajadores-diagrama",loadChildren:()=>n.e(514).then(n.bind(n,514)).then(o=>o.EmbajadoresDiagramaModule)},{path:"visual-empresa",loadChildren:()=>n.e(3802).then(n.bind(n,3802)).then(o=>o.VisualEmpresaViewPageModule)}]}];let H=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[d.iI.forChild(Y),d.iI]}),s})(),K=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[f.MD,b.YN,r.bv,H]}),s})()}}]);