"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[673],{673:(b,h,r)=>{r.r(h),r.d(h,{GrupoSociosPageModule:()=>Y});var m=r(2881),c=r(9417),n=r(3092),v=r(9870),p=r(467),g=r(7550),f=r(2042),a=r(3662),G=r(1413),y=r(152),D=r(3294),F=r(6977),R=r(7786),E=r(9172),M=r(5558),P=r(9437),B=r(7673),I=r(6354),T=r(980),$=r(5460),j=r(6152),t=r(1360),S=r(6897);const k=["class","grupo form"];function U(o,s){1&o&&(t.j41(0,"ion-text",10),t.EFF(1," Campo obligatorio* "),t.k0s())}let C=(()=>{var o;class s{constructor(e,i,l,d){this.fb=e,this.grupoService=i,this.toastController=l,this.modalCtrl=d,this.btnName="AGREGAR",this.title="AGREGAR",this.id=void 0,this.formEnviado=!1,this.formulario=this.fb.group({nombre:["",[c.k0.required,(0,$.a)()]]})}ngOnInit(){null!=this.id&&(this.btnName="GUARDAR",this.title="MODIFICAR",this.grupoService.getByID(this.id).subscribe({next:e=>{this.formulario.patchValue({nombre:e.data.nombre})}}))}enviarFormulario(){if(!this.formEnviado){if(this.formEnviado=!0,this.formulario.invalid)return this.formulario.markAllAsTouched(),void(this.formEnviado=!1);var e={nombre:(0,j.H)(this.formulario.controls.nombre.value)};null!=this.id&&(e.id=this.id),this.grupoService.save(e).pipe((0,T.j)(()=>{this.formEnviado=!1})).subscribe({next:i=>{i&&(this.toastController.create({message:"Grupo guardado.",duration:3e3,color:"success",position:"top"}).then(l=>l.present()),this.modalCtrl.dismiss(!0))}})}}getControl(e){return this.formulario.get(e)}close(){this.modalCtrl.dismiss()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(c.ok),t.rXU(S.b),t.rXU(n.K_),t.rXU(n.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-modal",8,"grupo","form"]],inputs:{id:"id"},attrs:k,decls:16,vars:8,consts:[[1,"modalHeader"],["slot","end"],[3,"click"],["name","close"],[1,"ion-padding",3,"fullscreen"],[1,"modalform",3,"formGroup"],["label-placement","floating","label","Nombre del grupo","formControlName","nombre","placeholder","Nombre del grupo*","type","text",1,"inputForm",3,"ionBlur"],["color","danger",4,"ngIf"],[2,"width","100%","text-align","center"],[1,"customButton",3,"click","disabled"],["color","danger"]],template:function(e,i){if(1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s()(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return i.close()}),t.nrm(6,"ion-icon",3),t.k0s()()(),t.j41(7,"ion-content",4)(8,"form",5)(9,"ion-input",6),t.bIt("ionBlur",function(){let d;return null==(d=i.getControl("nombre"))?null:d.markAsTouched()}),t.k0s(),t.DNE(10,U,2,0,"ion-text",7),t.k0s()(),t.j41(11,"ion-footer")(12,"ion-toolbar")(13,"div",8)(14,"ion-button",9),t.bIt("click",function(){return i.enviarFormulario()}),t.EFF(15),t.k0s()()()()),2&e){let l,d;t.R7$(3),t.SpI("",i.title," GRUPO"),t.R7$(4),t.Y8G("fullscreen",!1),t.R7$(),t.Y8G("formGroup",i.formulario),t.R7$(),t.AVh("invalid",(null==(l=i.getControl("nombre"))?null:l.invalid)&&(null==(l=i.getControl("nombre"))?null:l.touched)),t.R7$(),t.Y8G("ngIf",(null==(d=i.getControl("nombre"))?null:d.invalid)&&(null==(d=i.getControl("nombre"))?null:d.touched)),t.R7$(4),t.Y8G("disabled",i.formEnviado),t.R7$(),t.SpI(" ",i.btnName," ")}},dependencies:[n.bv,n.Jm,n.QW,n.W9,n.M0,n.eU,n.iq,n.$w,n.IO,n.BC,n.ai,n.Gw,c.X1,c.qT,c.BC,c.cb,c.j4,c.JD,m.MD,m.bT],encapsulation:2}),s})();const N=["class","socios"],_=()=>[20,50,100];function A(o,s){1&o&&(t.j41(0,"th",25),t.EFF(1," Nombre "),t.k0s())}function w(o,s){if(1&o){const u=t.RV6();t.j41(0,"td",26),t.bIt("click",function(){const i=t.eBV(u).$implicit,l=t.XpG();return t.Njj(l.editModal(i.id))}),t.EFF(1),t.k0s()}if(2&o){const u=s.$implicit;t.R7$(),t.SpI(" ",u.nombre," ")}}function O(o,s){1&o&&(t.j41(0,"th",27),t.EFF(1," Opciones "),t.k0s())}function V(o,s){if(1&o){const u=t.RV6();t.j41(0,"td",28)(1,"ion-button",29),t.bIt("click",function(){const i=t.eBV(u).$implicit,l=t.XpG();return t.Njj(l.editModal(i.id))}),t.nrm(2,"ion-icon",30),t.j41(3,"small"),t.EFF(4,"Editar"),t.k0s()()()}}function z(o,s){1&o&&t.nrm(0,"tr",31)}function x(o,s){1&o&&t.nrm(0,"tr",32)}function W(o,s){if(1&o&&(t.j41(0,"tr",33)(1,"td",34),t.EFF(2," No se encontraron registros disponibles. "),t.k0s()()),2&o){const u=t.XpG();t.R7$(),t.BMQ("colspan",u.displayedColumns.length)}}const H=[{path:"",component:(()=>{var o;class s{constructor(e,i){this.grupoService=e,this.modalCtrl=i,this.dataSourceTable=new a.I6,this.displayedColumns=["Nombre"],this.inputBuscar=new G.B,this.query="",this.destroy$=new G.B}ngAfterViewInit(){this.dataSourceTable.paginator=this.paginator,this.loadtable()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.inputBuscar.pipe((0,y.B)(1e3),(0,D.F)(),(0,F.Q)(this.destroy$)).subscribe(e=>{this.query=e.toString(),this.loadtable()})}loadtable(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,R.h)(this.sort.sortChange,this.paginator.page).pipe((0,E.Z)({}),(0,M.n)(()=>this.grupoService.getTablePaginated({page:this.paginator.pageIndex,size:this.paginator.pageSize,sortBy:this.sort.active,sortDir:this.sort.direction,searchQuery:this.query}).pipe((0,P.W)(()=>(0,B.of)(null)))),(0,I.T)(e=>null===e?[]:(this.total=e.data.total,e.data.items))).subscribe(e=>{this.dataSourceTable=new a.I6(e)})}addModal(){var e=this;return(0,p.A)(function*(){const i=yield e.modalCtrl.create({component:C,cssClass:"modal-grupo"});yield i.present();const{data:l}=yield i.onDidDismiss();l&&(console.log(l),e.loadtable())})()}editModal(e){var i=this;return(0,p.A)(function*(){const l=yield i.modalCtrl.create({component:C,cssClass:"modal-grupo",componentProps:{id:e}});yield l.present();const{data:d}=yield l.onDidDismiss();d&&(console.log(d),i.loadtable())})()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(S.b),t.rXU(n.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-grupo",8,"socios"]],viewQuery:function(e,i){if(1&e&&(t.GBs(g.iy,5),t.GBs(f.B4,5)),2&e){let l;t.mGM(l=t.lsd())&&(i.paginator=l.first),t.mGM(l=t.lsd())&&(i.sort=l.first)}},standalone:!1,attrs:N,decls:36,vars:8,consts:[[1,"pagesHeader"],["slot","start"],["name","people","color","white"],[1,"pagesContent"],[1,"ion-align-items-center"],["size","12","size-md","9",1,"ion-text-center"],["placeholder","Buscar por Nombre",1,"inputBusqueda",2,"width","100%",3,"ionInput"],["slot","end","name","search","aria-hidden","true"],["size","12","size-md","3",1,"ion-text-center"],["expand","block",1,"customGreenButton",2,"width","100%",3,"click"],["name","add","color","white"],[1,"referidosHeader"],[1,"title"],[2,"overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Nombre"],["mat-header-cell","","style","padding-left: 1rem;","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","Visualizar"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","mydivoutermulti elemento-renglon row_clickable",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header","",2,"padding-left","1rem"],["mat-cell","",3,"click"],["mat-header-cell",""],["mat-cell",""],["fill","clear",3,"click"],["slot","icon-only","name","create"],["mat-header-row",""],["mat-row","",1,"mydivoutermulti","elemento-renglon","row_clickable"],[1,"mat-row"],[2,"text-align","center","padding","1rem"]],template:function(e,i){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"ion-title")(5,"h1"),t.nrm(6,"ion-icon",2),t.EFF(7," Grupo de socios"),t.k0s()()()(),t.j41(8,"ion-content",3)(9,"div")(10,"ion-grid")(11,"ion-row",4)(12,"ion-col",5)(13,"ion-input",6),t.bIt("ionInput",function(d){return i.inputBuscar.next(d.detail.value||"")}),t.nrm(14,"ion-icon",7),t.k0s()(),t.j41(15,"ion-col",8)(16,"ion-button",9),t.bIt("click",function(){return i.addModal()}),t.nrm(17,"ion-icon",10),t.EFF(18," AGREGAR"),t.k0s()()()()(),t.j41(19,"ion-card")(20,"ion-card-header",11)(21,"ion-card-title",12),t.EFF(22,"Grupos"),t.k0s()(),t.j41(23,"ion-card-content")(24,"div",13)(25,"table",14),t.qex(26,15),t.DNE(27,A,2,0,"th",16)(28,w,2,1,"td",17),t.bVm(),t.qex(29,18),t.DNE(30,O,2,0,"th",19)(31,V,5,0,"td",20),t.bVm(),t.DNE(32,z,1,0,"tr",21)(33,x,1,0,"tr",22)(34,W,3,1,"tr",23),t.k0s()(),t.nrm(35,"mat-paginator",24),t.k0s()()()),2&e&&(t.R7$(25),t.Y8G("dataSource",i.dataSourceTable),t.R7$(7),t.Y8G("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(2),t.Y8G("length",i.total)("pageSizeOptions",t.lJ4(7,_))("pageSize",50))},dependencies:[n.Jm,n.QW,n.b_,n.I9,n.ME,n.tN,n.hU,n.W9,n.lO,n.eU,n.iq,n.$w,n.MC,n.ln,n.BC,n.ai,n.Gw,a.Zl,a.tL,a.ji,a.cC,a.YV,a.iL,a.KS,a.$R,a.YZ,a.NB,a.ky,g.iy,f.B4,f.aE],encapsulation:2}),s})()}];let Q=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[v.iI.forChild(H),v.iI]}),s})(),Y=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[m.MD,c.YN,n.bv,Q,a.tP,g.Ou,f.NQ]}),s})()},5460:(b,h,r)=>{function m(){return c=>0===(c.value||"").trim().length?{sinEspacios:!0}:null}r.d(h,{a:()=>m})},6152:(b,h,r)=>{function m(c,n=!0){return null==c?n?void 0:"":c.trim()}r.d(h,{H:()=>m})},6897:(b,h,r)=>{r.d(h,{b:()=>v});var m=r(7643),c=r(5312),n=r(1360);let v=(()=>{var p;class g{constructor(a){this.http=a,this.apiUrl=c.c.apiUrl+"api/Grupo"}getAllGrupos(){return this.http.get(`${this.apiUrl}/GetAllGrupos`)}getTablePaginated(a){let G={page:a.page.toString(),size:a.size.toString(),sortBy:a.sortBy,sortDir:a.sortDir,searchQuery:a.searchQuery};return this.http.get(`${this.apiUrl}/GetGruposPaginated`,{params:G})}getByID(a){let G=(new m.Nl).set("id",a);return this.http.get(`${this.apiUrl}/GetByID`,{params:G})}save(a){return this.http.post(`${this.apiUrl}/Save`,a)}}return(p=g).\u0275fac=function(a){return new(a||p)(n.KVO(m.Qq))},p.\u0275prov=n.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),g})()}}]);