"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7061],{7061:(ee,O,d)=>{d.r(O),d.d(O,{EmbajadoresPageModule:()=>oe});var j=d(2881),c=d(9417),s=d(3092),V=d(9870),N=d(467),D=d(7550),k=d(2042),g=d(3662),y=d(1413),P=d(152),H=d(3294),q=d(6977),J=d(7786),L=d(9172),Q=d(5558),W=d(9437),K=d(7673),Z=d(6354),F=d(4843),oo=d(980),E=d(6231),A=d(2490),C=d(6152),T=d(5460),o=d(1360),Y=d(7248),eo=d(6897),to=d(8311),w=d(5312),X=d(7643);let no=(()=>{var n;class r{constructor(t){this.http=t,this.apiUrl=w.c.apiUrl+"api/FuenteOrigen"}getCatalogoFuentesOrigen(){return this.http.get(`${this.apiUrl}/GetFuentesOrigen`)}}return(n=r).\u0275fac=function(t){return new(t||n)(o.KVO(X.Qq))},n.\u0275prov=o.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),r})(),lo=(()=>{var n;class r{constructor(t){this.http=t,this.apiUrl=w.c.apiUrl+"api/Catalogos"}getCatalogoPaises(){return this.http.get(`${this.apiUrl}/GetCatalogoPaises`)}getCatalogoEstados(){return this.http.get(`${this.apiUrl}/GetCatalogoEstadosMexicanos`)}}return(n=r).\u0275fac=function(t){return new(t||n)(o.KVO(X.Qq))},n.\u0275prov=o.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();const ao=["selectableComponent"],io=["class","usuario form"],ro=()=>({header:"Pais"}),so=()=>({header:"Fuente de origen del usuario"}),uo=()=>({header:"Rol de usuario"}),mo=()=>({header:"Estado"}),co=()=>({header:"Selecciona grupo"}),po=()=>({header:"Selecciona empresa"});function fo(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function go(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function ho(n,r){if(1&n&&(o.j41(0,"ion-select-option",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.SpI(" ",a.descripcion," ")}}function _o(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function Co(n,r){if(1&n&&(o.j41(0,"ion-select-option",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.SpI(" ",a.nombre," ")}}function vo(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function bo(n,r){if(1&n){const a=o.RV6();o.j41(0,"ion-col",7)(1,"ion-select",27),o.bIt("ionBlur",function(){let e;o.eBV(a);const i=o.XpG();return o.Njj(null==(e=i.getControl("estado"))?null:e.markAsTouched())}),o.DNE(2,Co,2,2,"ion-select-option",12),o.k0s(),o.DNE(3,vo,2,0,"ion-text",9),o.k0s()}if(2&n){let a,t;const e=o.XpG();o.R7$(),o.AVh("invalid",(null==(a=e.getControl("estado"))?null:a.invalid)&&(null==(a=e.getControl("estado"))?null:a.touched)),o.Y8G("interfaceOptions",o.lJ4(5,mo)),o.R7$(),o.Y8G("ngForOf",e.estados),o.R7$(),o.Y8G("ngIf",(null==(t=e.getControl("estado"))?null:t.invalid)&&(null==(t=e.getControl("estado"))?null:t.touched))}}function Fo(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function Eo(n,r){if(1&n){const a=o.RV6();o.j41(0,"ion-col",7)(1,"ion-input",28),o.bIt("ionBlur",function(){let e;o.eBV(a);const i=o.XpG();return o.Njj(null==(e=i.getControl("estadoTexto"))?null:e.markAsTouched())}),o.k0s(),o.DNE(2,Fo,2,0,"ion-text",9),o.k0s()}if(2&n){let a,t;const e=o.XpG();o.R7$(),o.AVh("invalid",(null==(a=e.getControl("estadoTexto"))?null:a.invalid)&&(null==(a=e.getControl("estadoTexto"))?null:a.touched)),o.R7$(),o.Y8G("ngIf",(null==(t=e.getControl("estadoTexto"))?null:t.invalid)&&(null==(t=e.getControl("estadoTexto"))?null:t.touched))}}function To(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function jo(n,r){if(1&n&&(o.j41(0,"ion-select-option",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.SpI(" ",a.nombre," ")}}function ko(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function Ro(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function Mo(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function Go(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function Io(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," La contrase\xf1a debe tener al menos 6 caracteres. "),o.k0s())}function $o(n,r){if(1&n&&(o.j41(0,"ion-select-option",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.Y8G("value",a.valor),o.R7$(),o.SpI(" ",a.nombre," ")}}function So(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function Uo(n,r){if(1&n&&(o.j41(0,"ion-select-option",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.SpI(" ",a.nombre," ")}}function Bo(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function xo(n,r){if(1&n){const a=o.RV6();o.j41(0,"ion-col",7)(1,"ion-select",29),o.bIt("ionBlur",function(){let e;o.eBV(a);const i=o.XpG();return o.Njj(null==(e=i.getControl("grupo"))?null:e.markAsTouched())}),o.DNE(2,Uo,2,2,"ion-select-option",12),o.k0s(),o.DNE(3,Bo,2,0,"ion-text",9),o.k0s()}if(2&n){let a,t;const e=o.XpG();o.R7$(),o.AVh("invalid",(null==(a=e.getControl("grupo"))?null:a.invalid)&&(null==(a=e.getControl("grupo"))?null:a.touched)),o.Y8G("interfaceOptions",o.lJ4(5,co)),o.R7$(),o.Y8G("ngForOf",e.grupos),o.R7$(),o.Y8G("ngIf",(null==(t=e.getControl("grupo"))?null:t.invalid)&&(null==(t=e.getControl("grupo"))?null:t.touched))}}function No(n,r){if(1&n&&(o.j41(0,"ion-select-option",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.Lme(" ",a.rfc," - ",a.razonSocial," ")}}function Do(n,r){1&n&&(o.j41(0,"ion-text",25),o.EFF(1," Campo requerido "),o.k0s())}function yo(n,r){if(1&n){const a=o.RV6();o.j41(0,"ion-col",7)(1,"ion-select",30),o.bIt("ionBlur",function(){let e;o.eBV(a);const i=o.XpG();return o.Njj(null==(e=i.getControl("empresa"))?null:e.markAsTouched())}),o.DNE(2,No,2,3,"ion-select-option",12),o.k0s(),o.DNE(3,Do,2,0,"ion-text",9),o.k0s()}if(2&n){let a,t;const e=o.XpG();o.R7$(),o.AVh("invalid",(null==(a=e.getControl("empresa"))?null:a.invalid)&&(null==(a=e.getControl("empresa"))?null:a.touched)),o.Y8G("interfaceOptions",o.lJ4(5,po)),o.R7$(),o.Y8G("ngForOf",e.empresas),o.R7$(),o.Y8G("ngIf",(null==(t=e.getControl("empresa"))?null:t.invalid)&&(null==(t=e.getControl("empresa"))?null:t.touched))}}function Oo(n,r){1&n&&(o.j41(0,"ion-item",35)(1,"p",36),o.EFF(2," Solo se muestran los primeros 30 usuarios encontrados. Si no encuentra el deseado, utilice el buscador para obtener un resultado m\xe1s preciso. "),o.k0s()())}function Vo(n,r){if(1&n){const a=o.RV6();o.j41(0,"ion-col",7)(1,"ion-item",31)(2,"ion-label",32),o.EFF(3,"Usuario parent"),o.k0s(),o.j41(4,"ionic-selectable",33,0),o.bIt("onSearch",function(e){o.eBV(a);const i=o.XpG();return o.Njj(i.onSearchChange(e))})("onOpen",function(e){o.eBV(a);const i=o.XpG();return o.Njj(i.onOpen(e))}),o.DNE(6,Oo,3,0,"ng-template",34),o.k0s()()()}if(2&n){const a=o.XpG();o.R7$(4),o.Y8G("items",a.usuarios)("searchFailText","No se encontraron usuarios.")("canSearch",!0)("canClear",!0)}}let z=(()=>{var n;class r{constructor(t,e,i,l,u,f,p,h,_){this.fb=t,this.usuarioService=e,this.toastController=i,this.loadingCtrl=l,this.gruposService=u,this.empresasService=f,this.fuenteOrigenService=p,this.catalogosService=h,this.modalCtrl=_,this.btnName="AGREGAR",this.title="AGREGAR",this.formEnviado=!1,this.paises=[],this.estados=[],this.fuentesOrigen=[],this.isNacional=!1,this.roles=[],this.grupos=[],this.empresas=[],this.usuarios=[],this.mostrarGrupos=!1,this.mostrarEmpresas=!1,this.mostrarParent=!1,this.searchSubject=new y.B,this.firstSearch=!1,this.textoPassword="Contrase\xf1a",this.ContrasenaLabel="Contrase\xf1a",this.id=void 0,this.formulario=this.fb.group({nombre:["",[c.k0.required,(0,T.a)()]],apellido:["",[c.k0.required,(0,T.a)()]],email:["",[c.k0.required,(0,T.a)(),c.k0.email]],pais:["",c.k0.required],ciudad:["",[c.k0.required,(0,T.a)()]],estado:[""],estadoTexto:[""],telefono:["",[c.k0.required,(0,T.a)()]],password:["",[c.k0.minLength(6)]],fuenteOrigen:["",c.k0.required],rol:["",c.k0.required],grupo:[""],empresa:[""],parent:[]}),this.setupSearch()}ngOnInit(){var t=this;return(0,N.A)(function*(){const e=yield t.loadingCtrl.create({message:"Cargando datos..."});yield e.present();try{t.roles=(0,E.Cn)();const l=yield(0,F._)(t.gruposService.getAllGrupos());t.grupos=(null==l?void 0:l.data)||[];const u=yield(0,F._)(t.empresasService.getAllEmpresas());t.empresas=(null==u?void 0:u.data)||[];const f=yield(0,F._)(t.fuenteOrigenService.getCatalogoFuentesOrigen());t.fuentesOrigen=(null==f?void 0:f.data)||[];const p=yield(0,F._)(t.catalogosService.getCatalogoPaises());t.paises=(null==p?void 0:p.data)||[];const h=yield(0,F._)(t.catalogosService.getCatalogoEstados());t.estados=(null==h?void 0:h.data)||[];const _=t.formulario.get("password");if(null!=t.id)t.btnName="GUARDAR",t.title="MODIFICAR",t.textoPassword="Capture contrase\xf1a solo si desea cambiarla.",t.ContrasenaLabel="Nueva contrase\xf1a",t.usuarioService.getUsuarioByID(t.id).subscribe({next:m=>{t.formulario.patchValue({nombre:m.data.nombres,apellido:m.data.apellidos,email:m.data.email,pais:m.data.catalogoPaisID,estado:m.data.catalogoEstadoID,estadoTexto:m.data.estadoTexto,ciudad:m.data.ciudad,telefono:m.data.celular,fuenteOrigen:m.data.fuenteOrigenID,rol:m.data.rolesEnum,grupo:m.data.grupoID,empresa:m.data.empresaID}),t.rolChange(m.data.rolesEnum),t.isNacional=!!m.data.catalogoEstadoID,null!=m.data.usuarioParentID&&m.data.usuarioParentID>0&&t.usuarioService.busquedaUsuario(m.data.usuarioParentNombreCompleto.trim()).subscribe(v=>{t.usuarios=v.data,t.formulario.patchValue({parent:t.usuarios.find(b=>b.id===m.data.usuarioParentID)})})}});else{var i=t.paises.find(m=>"MEX"==m.codigo);t.formulario.patchValue({pais:null==i?void 0:i.id}),t.isNacional=!0,t.formulario.patchValue({password:t.generateSecurePassword(8)}),null==_||_.setValidators([c.k0.required]),null==_||_.updateValueAndValidity()}}catch(l){console.error("Error al cargar datos",l)}finally{e.dismiss()}})()}enviarFormulario(){if(!this.formEnviado){if(this.formEnviado=!0,this.formulario.invalid)return this.formulario.markAllAsTouched(),void(this.formEnviado=!1);var t=this.formulario.controls.parent.value;this.formulario.controls.rol.value!=E.$u.Embajadores&&(t=null);var i={nombres:(0,C.H)(this.formulario.controls.nombre.value),apellidos:(0,C.H)(this.formulario.controls.apellido.value),email:(0,C.H)(this.formulario.controls.email.value),celular:(0,C.H)(this.formulario.controls.telefono.value),catalogoPaisID:this.formulario.controls.pais.value,catalogoEstadoID:""==this.formulario.controls.estado.value?void 0:this.formulario.controls.estado.value,estadoTexto:(0,C.H)(this.formulario.controls.estadoTexto.value),ciudad:(0,C.H)(this.formulario.controls.ciudad.value),fuenteOrigenID:this.formulario.controls.fuenteOrigen.value,usuarioParentID:null!=t?t.id:void 0,rolesEnum:this.formulario.controls.rol.value,grupoID:""==this.formulario.controls.grupo.value?void 0:this.formulario.controls.grupo.value,empresaID:""==this.formulario.controls.empresa.value?void 0:this.formulario.controls.empresa.value,password:(this.formulario.controls.password.value||"").trim()};null!=this.id&&(i.id=this.id),this.usuarioService.save(i).pipe((0,oo.j)(()=>{this.formEnviado=!1})).subscribe({next:l=>{l&&(this.toastController.create({message:"Grupo guardado.",duration:3e3,color:"success",position:"top"}).then(u=>u.present()),this.modalCtrl.dismiss(!0))}})}}getControl(t){return this.formulario.get(t)}close(){this.modalCtrl.dismiss()}onPaisChange(t){const e=t.detail.value;var i=this.paises.find(f=>f.id==e);const l=this.formulario.get("estado"),u=this.formulario.get("estadoTexto");"MEX"==i.codigo?(this.isNacional=!0,null==l||l.setValidators([c.k0.required]),null==u||u.clearValidators()):(this.isNacional=!1,null==u||u.setValidators([c.k0.required]),null==l||l.clearValidators()),null==l||l.updateValueAndValidity(),null==u||u.updateValueAndValidity()}onRolChange(t){this.rolChange(t.detail.value)}rolChange(t){var e=!1,i=!1;switch(this.mostrarEmpresas=!1,this.mostrarGrupos=!1,this.mostrarParent=!1,t){case E.$u.Admin:break;case E.$u.Socio:i=!0,this.mostrarEmpresas=!0;break;case E.$u.Embajadores:e=!0,this.mostrarGrupos=!0,this.mostrarParent=!0}const l=this.formulario.get("grupo");e?null==l||l.setValidators([c.k0.required]):(null==l||l.clearValidators(),null==l||l.setValue("")),null==l||l.updateValueAndValidity();const u=this.formulario.get("empresa");i?null==u||u.setValidators([c.k0.required]):(null==u||u.clearValidators(),null==u||u.setValue("")),null==u||u.updateValueAndValidity()}generateSecurePassword(t=12){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="abcdefghijklmnopqrstuvwxyz",l="0123456789",u="!@#$%^&*()_+~`|}{[]:;?><,./-=",f=e+i+l+u;let p="";p+=e[Math.floor(26*Math.random())],p+=i[Math.floor(26*Math.random())],p+=l[Math.floor(10*Math.random())],p+=u[Math.floor(29*Math.random())];for(let h=p.length;h<t;h++)p+=f[Math.floor(91*Math.random())];return p.split("").sort(()=>.5-Math.random()).join("")}refreshPassword(){this.formulario.patchValue({password:this.generateSecurePassword(8)})}onSearchChange(t){t.component.startSearch(),this.searchSubject.next(t)}setupSearch(){this.searchSubject.pipe((0,P.B)(300)).subscribe(t=>{const e=t.text.trim();if(e.length<2&&""!=e)return t.component.items=this.usuarios,void t.component.endSearch();this.usuarioService.busquedaUsuario(e.toLowerCase()).subscribe(l=>{this.usuarios=l.data,t.component.items=this.usuarios,t.component.endSearch()},l=>{t.component.items=[],t.component.endSearch()})})}onOpen(t){this.selectableComponent&&(this.selectableComponent._onSearchbarClear=function(){this._searchText="",this._filterItems()})}}return(n=r).\u0275fac=function(t){return new(t||n)(o.rXU(c.ok),o.rXU(Y.o),o.rXU(s.K_),o.rXU(s.Xi),o.rXU(eo.b),o.rXU(to.z),o.rXU(no),o.rXU(lo),o.rXU(s.W3))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-modal",8,"usuario","form"]],viewQuery:function(t,e){if(1&t&&o.GBs(ao,5),2&t){let i;o.mGM(i=o.lsd())&&(e.selectableComponent=i.first)}},inputs:{id:"id"},attrs:io,decls:54,vars:49,consts:[["selectableComponent",""],[1,"modalHeader"],["slot","end"],[3,"click"],["name","close"],[1,"ion-padding",3,"fullscreen"],[1,"modalform",3,"formGroup"],["size","12","size-md","6"],["label-placement","floating","label","Nombre","formControlName","nombre","placeholder","Nombre(s)","type","text",1,"inputForm",3,"ionBlur"],["color","danger",4,"ngIf"],["label-placement","floating","label","Apellido","formControlName","apellido","placeholder","Apellido(s)","type","text",1,"inputForm",3,"ionBlur"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Pais","formControlName","pais",1,"inputForm",3,"ionChange","ionBlur","interfaceOptions"],[3,"value",4,"ngFor","ngForOf"],["size","12","size-md","6",4,"ngIf"],["label-placement","floating","label","Ciudad","formControlName","ciudad","placeholder","Ciudad","type","text",1,"inputForm",3,"ionBlur"],["okText","Ok","label-placement","floating","label","Fuente de origen","cancelText","Cancelar","formControlName","fuenteOrigen",1,"inputForm",3,"ionBlur","interfaceOptions"],["size","12","size-md","12"],["autocomplete","off","label-placement","floating","label","Correo electronico","formControlName","email","placeholder","Correo de contacto (usuario)","type","text",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Celular (WhatsApp)","formControlName","telefono","placeholder","WhatsApp","type","text",1,"inputForm",3,"ionBlur"],["label-placement","stacked","autocomplete","new-password","formControlName","password","type","text",1,"inputForm",3,"ionBlur","label","placeholder"],["fill","clear","slot","end","aria-label","Show/hide",1,"input-icon-button",3,"click"],["slot","icon-only","name","refresh","aria-hidden","true"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Rol de usuario","formControlName","rol",1,"inputForm",3,"ionChange","ionBlur","interfaceOptions"],[2,"width","100%","text-align","center"],[1,"customButton",3,"click","disabled"],["color","danger"],[3,"value"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Estado","formControlName","estado",1,"inputForm",3,"ionBlur","interfaceOptions"],["label-placement","floating","label","Estado","formControlName","estadoTexto","placeholder","Estado","type","text",1,"inputForm",3,"ionBlur"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Grupo","formControlName","grupo",1,"inputForm",3,"ionBlur","interfaceOptions"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Empresa","formControlName","empresa",1,"inputForm",3,"ionBlur","interfaceOptions"],[1,"inputForm"],["position","floating"],["item-content","","formControlName","parent","itemValueField","id","closeButtonSlot","end","itemTextField","nombreCompleto","closeButtonText","Cancelar","searchPlaceholder","Buscar usuario...","clearButtonText","Limpiar",3,"onSearch","onOpen","items","searchFailText","canSearch","canClear"],["ionicSelectableMessageTemplate",""],["text-wrap",""],[2,"color","grey","font-size","small"]],template:function(t,e){if(1&t&&(o.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),o.EFF(3),o.k0s()(),o.j41(4,"ion-buttons",2)(5,"ion-button",3),o.bIt("click",function(){return e.close()}),o.nrm(6,"ion-icon",4),o.k0s()()(),o.j41(7,"ion-content",5)(8,"form",6)(9,"ion-grid")(10,"ion-row")(11,"ion-col",7)(12,"ion-input",8),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("nombre"))?null:l.markAsTouched()}),o.k0s(),o.DNE(13,fo,2,0,"ion-text",9),o.k0s(),o.j41(14,"ion-col",7)(15,"ion-input",10),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("apellido"))?null:l.markAsTouched()}),o.k0s(),o.DNE(16,go,2,0,"ion-text",9),o.k0s(),o.j41(17,"ion-col",7)(18,"ion-select",11),o.bIt("ionChange",function(l){return e.onPaisChange(l)})("ionBlur",function(){let l;return null==(l=e.getControl("pais"))?null:l.markAsTouched()}),o.DNE(19,ho,2,2,"ion-select-option",12),o.k0s(),o.DNE(20,_o,2,0,"ion-text",9),o.k0s(),o.DNE(21,bo,4,6,"ion-col",13)(22,Eo,3,3,"ion-col",13),o.j41(23,"ion-col",7)(24,"ion-input",14),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("ciudad"))?null:l.markAsTouched()}),o.k0s(),o.DNE(25,To,2,0,"ion-text",9),o.k0s(),o.j41(26,"ion-col",7)(27,"ion-select",15),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("fuenteOrigen"))?null:l.markAsTouched()}),o.DNE(28,jo,2,2,"ion-select-option",12),o.k0s(),o.DNE(29,ko,2,0,"ion-text",9),o.k0s(),o.j41(30,"ion-col",16)(31,"ion-input",17),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("email"))?null:l.markAsTouched()}),o.k0s(),o.DNE(32,Ro,2,0,"ion-text",9),o.k0s(),o.j41(33,"ion-col",7)(34,"ion-input",18),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("telefono"))?null:l.markAsTouched()}),o.k0s(),o.DNE(35,Mo,2,0,"ion-text",9),o.k0s(),o.j41(36,"ion-col",7)(37,"ion-input",19),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("password"))?null:l.markAsTouched()}),o.j41(38,"ion-button",20),o.bIt("click",function(){return e.refreshPassword()}),o.nrm(39,"ion-icon",21),o.k0s()(),o.DNE(40,Go,2,0,"ion-text",9)(41,Io,2,0,"ion-text",9),o.k0s(),o.j41(42,"ion-col",7)(43,"ion-select",22),o.bIt("ionChange",function(l){return e.onRolChange(l)})("ionBlur",function(){let l;return null==(l=e.getControl("rol"))?null:l.markAsTouched()}),o.DNE(44,$o,2,2,"ion-select-option",12),o.k0s(),o.DNE(45,So,2,0,"ion-text",9),o.k0s(),o.DNE(46,xo,4,6,"ion-col",13)(47,yo,4,6,"ion-col",13)(48,Vo,7,4,"ion-col",13),o.k0s()()()(),o.j41(49,"ion-footer")(50,"ion-toolbar")(51,"div",23)(52,"ion-button",24),o.bIt("click",function(){return e.enviarFormulario()}),o.EFF(53),o.k0s()()()()),2&t){let i,l,u,f,p,h,_,m,v,b,R,M,G,I,$,S,U,B,x;o.R7$(3),o.SpI("",e.title," EMBAJADOR"),o.R7$(4),o.Y8G("fullscreen",!1),o.R7$(),o.Y8G("formGroup",e.formulario),o.R7$(4),o.AVh("invalid",(null==(i=e.getControl("nombre"))?null:i.invalid)&&(null==(i=e.getControl("nombre"))?null:i.touched)),o.R7$(),o.Y8G("ngIf",(null==(l=e.getControl("nombre"))?null:l.invalid)&&(null==(l=e.getControl("nombre"))?null:l.touched)),o.R7$(2),o.AVh("invalid",(null==(u=e.getControl("apellido"))?null:u.invalid)&&(null==(u=e.getControl("apellido"))?null:u.touched)),o.R7$(),o.Y8G("ngIf",(null==(f=e.getControl("apellido"))?null:f.invalid)&&(null==(f=e.getControl("apellido"))?null:f.touched)),o.R7$(2),o.AVh("invalid",(null==(p=e.getControl("pais"))?null:p.invalid)&&(null==(p=e.getControl("pais"))?null:p.touched)),o.Y8G("interfaceOptions",o.lJ4(46,ro)),o.R7$(),o.Y8G("ngForOf",e.paises),o.R7$(),o.Y8G("ngIf",(null==(h=e.getControl("pais"))?null:h.invalid)&&(null==(h=e.getControl("pais"))?null:h.touched)),o.R7$(),o.Y8G("ngIf",e.isNacional),o.R7$(),o.Y8G("ngIf",!e.isNacional),o.R7$(2),o.AVh("invalid",(null==(_=e.getControl("ciudad"))?null:_.invalid)&&(null==(_=e.getControl("ciudad"))?null:_.touched)),o.R7$(),o.Y8G("ngIf",(null==(m=e.getControl("ciudad"))?null:m.invalid)&&(null==(m=e.getControl("ciudad"))?null:m.touched)),o.R7$(2),o.AVh("invalid",(null==(v=e.getControl("fuenteOrigen"))?null:v.invalid)&&(null==(v=e.getControl("fuenteOrigen"))?null:v.touched)),o.Y8G("interfaceOptions",o.lJ4(47,so)),o.R7$(),o.Y8G("ngForOf",e.fuentesOrigen),o.R7$(),o.Y8G("ngIf",(null==(b=e.getControl("fuenteOrigen"))?null:b.invalid)&&(null==(b=e.getControl("fuenteOrigen"))?null:b.touched)),o.R7$(2),o.AVh("invalid",(null==(R=e.getControl("email"))?null:R.invalid)&&(null==(R=e.getControl("email"))?null:R.touched)),o.R7$(),o.Y8G("ngIf",(null==(M=e.getControl("email"))?null:M.invalid)&&(null==(M=e.getControl("email"))?null:M.touched)),o.R7$(2),o.AVh("invalid",(null==(G=e.getControl("telefono"))?null:G.invalid)&&(null==(G=e.getControl("telefono"))?null:G.touched)),o.R7$(),o.Y8G("ngIf",(null==(I=e.getControl("telefono"))?null:I.invalid)&&(null==(I=e.getControl("telefono"))?null:I.touched)),o.R7$(2),o.AVh("invalid",(null==($=e.getControl("password"))?null:$.invalid)&&(null==($=e.getControl("password"))?null:$.touched)),o.Y8G("label",e.ContrasenaLabel)("placeholder",e.textoPassword),o.R7$(3),o.Y8G("ngIf",(null==(S=e.getControl("password"))?null:S.hasError("required"))&&(null==(S=e.getControl("password"))?null:S.touched)),o.R7$(),o.Y8G("ngIf",(null==(U=e.getControl("password"))?null:U.hasError("minlength"))&&(null==(U=e.getControl("password"))?null:U.touched)),o.R7$(2),o.AVh("invalid",(null==(B=e.getControl("rol"))?null:B.invalid)&&(null==(B=e.getControl("rol"))?null:B.touched)),o.Y8G("interfaceOptions",o.lJ4(48,uo)),o.R7$(),o.Y8G("ngForOf",e.roles),o.R7$(),o.Y8G("ngIf",(null==(x=e.getControl("rol"))?null:x.invalid)&&(null==(x=e.getControl("rol"))?null:x.touched)),o.R7$(),o.Y8G("ngIf",e.mostrarGrupos),o.R7$(),o.Y8G("ngIf",e.mostrarEmpresas),o.R7$(),o.Y8G("ngIf",e.mostrarParent),o.R7$(4),o.Y8G("disabled",e.formEnviado),o.R7$(),o.SpI(" ",e.btnName," ")}},dependencies:[s.bv,s.Jm,s.QW,s.hU,s.W9,s.M0,s.lO,s.eU,s.iq,s.$w,s.uz,s.he,s.ln,s.Nm,s.Ip,s.IO,s.BC,s.ai,s.Je,s.Gw,c.X1,c.qT,c.BC,c.cb,c.j4,c.JD,j.MD,j.Sq,j.bT,A.ec,A.pF],styles:[".input-icon-button[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--margin-start: 0;--margin-end: 0;--margin-top: 0;--margin-bottom: 0;height:30px!important;width:40px!important;min-height:5px!important;min-width:5px!important}"]}),r})();const Po=()=>[20,50,100];function Ao(n,r){1&n&&(o.j41(0,"th",25),o.EFF(1," Nombre "),o.k0s())}function Yo(n,r){if(1&n&&(o.j41(0,"td",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.R7$(),o.SpI(" ",a.nombreCompleto," ")}}function wo(n,r){1&n&&(o.j41(0,"th",25),o.EFF(1," Rol "),o.k0s())}function Xo(n,r){if(1&n&&(o.j41(0,"td",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.R7$(),o.SpI(" ",a.rol," ")}}function zo(n,r){1&n&&(o.j41(0,"th",25),o.EFF(1," Email "),o.k0s())}function Ho(n,r){if(1&n&&(o.j41(0,"td",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.R7$(),o.SpI(" ",a.email," ")}}function qo(n,r){1&n&&(o.j41(0,"th",25),o.EFF(1," Celular "),o.k0s())}function Jo(n,r){if(1&n&&(o.j41(0,"td",26),o.EFF(1),o.k0s()),2&n){const a=r.$implicit;o.R7$(),o.SpI(" ",a.celular," ")}}function Lo(n,r){1&n&&o.nrm(0,"tr",27)}function Qo(n,r){if(1&n){const a=o.RV6();o.j41(0,"tr",28),o.bIt("click",function(){const e=o.eBV(a).$implicit,i=o.XpG();return o.Njj(i.editModal(e.id))}),o.k0s()}}function Wo(n,r){if(1&n&&(o.j41(0,"tr",29)(1,"td",30),o.EFF(2," No se encontraron registros disponibles. "),o.k0s()()),2&n){const a=o.XpG();o.R7$(),o.BMQ("colspan",a.displayedColumns.length)}}const Ko=[{path:"",component:(()=>{var n;class r{constructor(t,e){this.usuarioService=t,this.modalCtrl=e,this.dataSourceTable=new g.I6,this.displayedColumns=["NombreCompleto","Rol","Email","Celular"],this.inputBuscar=new y.B,this.query="",this.destroy$=new y.B}ngAfterViewInit(){this.dataSourceTable.paginator=this.paginator,this.loadtable()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.inputBuscar.pipe((0,P.B)(1e3),(0,H.F)(),(0,q.Q)(this.destroy$)).subscribe(t=>{this.query=t.toString(),this.loadtable()})}loadtable(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,J.h)(this.sort.sortChange,this.paginator.page).pipe((0,L.Z)({}),(0,Q.n)(()=>this.usuarioService.getTablePaginated({page:this.paginator.pageIndex,size:this.paginator.pageSize,sortBy:this.sort.active,sortDir:this.sort.direction,searchQuery:this.query}).pipe((0,W.W)(()=>(0,K.of)(null)))),(0,Z.T)(t=>null===t?[]:(this.total=t.data.total,t.data.items))).subscribe(t=>{this.dataSourceTable=new g.I6(t)})}addModal(){var t=this;return(0,N.A)(function*(){const e=yield t.modalCtrl.create({component:z,cssClass:"modal-usuario"});yield e.present();const{data:i}=yield e.onDidDismiss();i&&(console.log(i),t.loadtable())})()}editModal(t){var e=this;return(0,N.A)(function*(){const i=yield e.modalCtrl.create({component:z,cssClass:"modal-usuario",componentProps:{id:t}});yield i.present();const{data:l}=yield i.onDidDismiss();l&&(console.log(l),e.loadtable())})()}}return(n=r).\u0275fac=function(t){return new(t||n)(o.rXU(Y.o),o.rXU(s.W3))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-embajadores"]],viewQuery:function(t,e){if(1&t&&(o.GBs(D.iy,5),o.GBs(k.B4,5)),2&t){let i;o.mGM(i=o.lsd())&&(e.paginator=i.first),o.mGM(i=o.lsd())&&(e.sort=i.first)}},standalone:!1,decls:42,vars:8,consts:[[1,"pagesHeader"],["slot","start"],["name","flag","color","white"],[1,"pagesContent"],[1,"ion-align-items-center"],["size","12","size-md","9",1,"ion-text-center"],["placeholder","Buscar por Nombres, Apellidos, Rol, Email o Celular",1,"inputBusqueda",3,"ionInput"],["slot","end","name","search","aria-hidden","true"],["size","12","size-md","2",1,"ion-text-center"],["expand","block",1,"customGreenButton",3,"click"],["name","add","color","white"],[1,"referidosHeader"],[1,"title"],[2,"overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","NombreCompleto"],["mat-header-cell","","style","padding-left: 1rem;","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Rol"],["matColumnDef","Email"],["matColumnDef","Celular"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","mydivoutermulti elemento-renglon row_clickable",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header","",2,"padding-left","1rem"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"mydivoutermulti","elemento-renglon","row_clickable",3,"click"],[1,"mat-row"],[2,"text-align","center","padding","1rem"]],template:function(t,e){1&t&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title")(5,"h1"),o.nrm(6,"ion-icon",2),o.EFF(7," Embajadores"),o.k0s()()()(),o.j41(8,"ion-content",3)(9,"div")(10,"ion-grid")(11,"ion-row",4)(12,"ion-col",5)(13,"ion-input",6),o.bIt("ionInput",function(l){return e.inputBuscar.next(l.detail.value||"")}),o.nrm(14,"ion-icon",7),o.k0s()(),o.j41(15,"ion-col",8)(16,"ion-button",9),o.bIt("click",function(){return e.addModal()}),o.nrm(17,"ion-icon",10),o.EFF(18," AGREGAR"),o.k0s()()()()(),o.j41(19,"ion-card")(20,"ion-card-header",11)(21,"ion-card-title",12),o.EFF(22,"Embajadores"),o.k0s()(),o.j41(23,"ion-card-content")(24,"div",13)(25,"table",14),o.qex(26,15),o.DNE(27,Ao,2,0,"th",16)(28,Yo,2,1,"td",17),o.bVm(),o.qex(29,18),o.DNE(30,wo,2,0,"th",16)(31,Xo,2,1,"td",17),o.bVm(),o.qex(32,19),o.DNE(33,zo,2,0,"th",16)(34,Ho,2,1,"td",17),o.bVm(),o.qex(35,20),o.DNE(36,qo,2,0,"th",16)(37,Jo,2,1,"td",17),o.bVm(),o.DNE(38,Lo,1,0,"tr",21)(39,Qo,1,0,"tr",22)(40,Wo,3,1,"tr",23),o.k0s()(),o.nrm(41,"mat-paginator",24),o.k0s()()()),2&t&&(o.R7$(25),o.Y8G("dataSource",e.dataSourceTable),o.R7$(13),o.Y8G("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),o.R7$(),o.Y8G("matRowDefColumns",e.displayedColumns),o.R7$(2),o.Y8G("length",e.total)("pageSizeOptions",o.lJ4(7,Po))("pageSize",50))},dependencies:[s.Jm,s.QW,s.b_,s.I9,s.ME,s.tN,s.hU,s.W9,s.lO,s.eU,s.iq,s.$w,s.MC,s.ln,s.BC,s.ai,s.Gw,g.Zl,g.tL,g.ji,g.cC,g.YV,g.iL,g.KS,g.$R,g.YZ,g.NB,g.ky,D.iy,k.B4,k.aE],encapsulation:2}),r})()}];let Zo=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[V.iI.forChild(Ko),V.iI]}),r})(),oe=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[j.MD,c.YN,s.bv,Zo,g.tP,D.Ou,k.NQ]}),r})()}}]);