"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4139],{4139:(q,N,c)=>{c.r(N),c.d(N,{VisualEmpresaViewPageModule:()=>Z});var g=c(2881),B=c(9417),r=c(3092),J=c(9870),L=c(467),W=c(5312),o=c(1360),U=c(7248);function X(l,s){if(1&l&&(o.j41(0,"div",25),o.nrm(1,"img",26),o.k0s()),2&l){const u=o.XpG(2);o.R7$(),o.Y8G("src",u.view.logoSrc,o.B4B)}}function Y(l,s){1&l&&(o.j41(0,"div",27),o.nrm(1,"ion-icon",28),o.k0s())}function H(l,s){if(1&l&&(o.qex(0),o.j41(1,"ion-card",8)(2,"ion-card-header",9)(3,"ion-card-title",10),o.EFF(4,"Identificaci\xf3n"),o.k0s()(),o.j41(5,"ion-card-content",11)(6,"div",12),o.DNE(7,X,2,1,"div",13)(8,Y,2,0,"ng-template",null,1,o.C5r),o.j41(10,"div",14)(11,"div",15),o.EFF(12),o.k0s(),o.j41(13,"div",16),o.EFF(14),o.k0s()()(),o.j41(15,"div",17)(16,"div",18)(17,"div",19),o.EFF(18,"Nombre comercial"),o.k0s(),o.j41(19,"div",20),o.EFF(20),o.k0s()(),o.j41(21,"div",18)(22,"div",19),o.EFF(23,"Descripci\xf3n"),o.k0s(),o.j41(24,"div",21),o.EFF(25),o.k0s()(),o.j41(26,"div",18)(27,"div",19),o.EFF(28,"Giro"),o.k0s(),o.j41(29,"div",20),o.EFF(30),o.k0s()(),o.j41(31,"div",18)(32,"div",19),o.EFF(33,"Grupo"),o.k0s(),o.j41(34,"div",20),o.EFF(35),o.k0s()(),o.j41(36,"div",18)(37,"div",19),o.EFF(38,"Embajador ID"),o.k0s(),o.j41(39,"div",20),o.EFF(40),o.k0s()(),o.j41(41,"div",18)(42,"div",19),o.EFF(43,"Fecha de creaci\xf3n"),o.k0s(),o.j41(44,"div",20),o.EFF(45),o.nI1(46,"date"),o.k0s()(),o.j41(47,"div",18)(48,"div",19),o.EFF(49,"Estatus"),o.k0s(),o.j41(50,"div",20)(51,"span",22),o.nrm(52,"span",23),o.j41(53,"span"),o.EFF(54),o.k0s()()()()()()(),o.j41(55,"ion-card",8)(56,"ion-card-header",9)(57,"ion-card-title",10),o.EFF(58,"Contacto"),o.k0s()(),o.j41(59,"ion-card-content",11)(60,"div",24)(61,"div",18)(62,"div",19),o.EFF(63,"Correo"),o.k0s(),o.j41(64,"div",20),o.EFF(65),o.k0s()(),o.j41(66,"div",18)(67,"div",19),o.EFF(68,"Tel\xe9fono"),o.k0s(),o.j41(69,"div",20),o.EFF(70),o.k0s()(),o.j41(71,"div",18)(72,"div",19),o.EFF(73,"Domicilio"),o.k0s(),o.j41(74,"div",21),o.EFF(75),o.k0s()()()()(),o.bVm()),2&l){let u,i,n;const t=o.sdS(9),e=o.XpG();o.R7$(7),o.Y8G("ngIf",e.view.logoSrc)("ngIfElse",t),o.R7$(5),o.JRh(e.view.razonSocial||"\u2014"),o.R7$(2),o.SpI("RFC: ",e.view.rfc||"\u2014",""),o.R7$(6),o.JRh(e.view.nombreComercial||"\u2014"),o.R7$(5),o.JRh(e.view.descripcion||"\u2014"),o.R7$(5),o.JRh(null!==(u=e.view.giro)&&void 0!==u?u:"\u2014"),o.R7$(5),o.JRh(null!==(i=e.view.grupo)&&void 0!==i?i:"\u2014"),o.R7$(5),o.JRh(null!==(n=e.view.embajadorId)&&void 0!==n?n:"\u2014"),o.R7$(5),o.SpI(" ",e.view.fechaCreacion?o.i5U(46,16,e.view.fechaCreacion,"dd/MM/yyyy HH:mm"):"\u2014"," "),o.R7$(7),o.AVh("ok","Vigente"===e.view.estatus&&!e.view.eliminado),o.R7$(2),o.SpI(" ",e.view.eliminado?"Eliminada":e.view.estatus||"\u2014"," "),o.R7$(11),o.JRh(e.view.correo||"\u2014"),o.R7$(5),o.JRh(e.view.telefono||"\u2014"),o.R7$(5),o.JRh(e.view.domicilio||"\u2014")}}function A(l,s){1&l&&(o.j41(0,"ion-card",8)(1,"ion-card-header",9)(2,"ion-card-title",10),o.EFF(3,"Cargando\u2026"),o.k0s()(),o.j41(4,"ion-card-content",11),o.nrm(5,"ion-skeleton-text",29)(6,"ion-skeleton-text",30)(7,"ion-skeleton-text",30),o.k0s()())}const K=[{path:"",component:(()=>{var l;class s{constructor(i,n){this.usuarioSrv=i,this.alertCtrl=n,this.cargando=!0,this.view={}}ngOnInit(){this.cargar()}isOk(i){return 1===(null==i?void 0:i.estatus)||!0===(null==i?void 0:i.success)||!0===(null==i?void 0:i.ok)}getMsg(i,n){var t,e,d;return null!==(t=null!==(e=null!==(d=null==i?void 0:i.mensaje)&&void 0!==d?d:null==i?void 0:i.message)&&void 0!==e?e:null==i?void 0:i.error)&&void 0!==t?t:n}toDate(i){if(!i)return null;if(i instanceof Date)return i;if("number"==typeof i)return new Date(i);if("string"==typeof i){const n=i.includes("T")?i:i.replace(" ","T"),t=new Date(n);return isNaN(t.getTime())?null:t}return null}buildLogoSrc(i){var n,t,e,d;const a=null!==(n=null!==(t=null==i?void 0:i.logotipoBase64)&&void 0!==t?t:null==i?void 0:i.LogotipoBase64)&&void 0!==n?n:null;if(a&&/^data:image\/(png|jpeg|jpg|gif);base64,/i.test(a))return a;if(a&&!a.startsWith("data:image"))return`data:image/png;base64,${a}`;const v=null!==(e=null!==(d=null==i?void 0:i.logotipoPath)&&void 0!==d?d:null==i?void 0:i.LogotipoPath)&&void 0!==e?e:null;return v?/^https?:\/\//i.test(v)?v:`${W.c.apiUrl}${v.startsWith("/")?"":"/"}${v}`:null}normalizeEmpresa(i){var n,t,e,d,a,v,p,m,f,h,_,C,P,M,E,b,F,O,w,x,k,j,V,$,R,I,y,D,S,T,G,z;return{id:null!==(n=null!==(t=null==i?void 0:i.id)&&void 0!==t?t:null==i?void 0:i.ID)&&void 0!==n?n:null,rfc:null!==(e=null!==(d=null==i?void 0:i.rfc)&&void 0!==d?d:null==i?void 0:i.RFC)&&void 0!==e?e:null,razonSocial:null!==(a=null!==(v=null==i?void 0:i.razonSocial)&&void 0!==v?v:null==i?void 0:i.RazonSocial)&&void 0!==a?a:null,nombreComercial:null!==(p=null!==(m=null==i?void 0:i.nombreComercial)&&void 0!==m?m:null==i?void 0:i.NombreComercial)&&void 0!==p?p:null,estatus:null!==(f=null!==(h=null==i?void 0:i.estatus)&&void 0!==h?h:null==i?void 0:i.Estatus)&&void 0!==f?f:null,correo:null!==(_=null!==(C=null!==(P=null!==(M=null==i?void 0:i.correo)&&void 0!==M?M:null==i?void 0:i.Correo)&&void 0!==P?P:null==i?void 0:i.email)&&void 0!==C?C:null==i?void 0:i.Email)&&void 0!==_?_:null,telefono:null!==(E=null!==(b=null!==(F=null==i?void 0:i.telefono)&&void 0!==F?F:null==i?void 0:i.Telefono)&&void 0!==b?b:null==i?void 0:i.tel)&&void 0!==E?E:null,domicilio:null!==(O=null!==(w=null!==(x=null!==(k=null==i?void 0:i.domicilio)&&void 0!==k?k:null==i?void 0:i.Domicilio)&&void 0!==x?x:null==i?void 0:i.direccion)&&void 0!==w?w:null==i?void 0:i.Direccion)&&void 0!==O?O:null,descripcion:null!==(j=null!==(V=null==i?void 0:i.descripcion)&&void 0!==V?V:null==i?void 0:i.Descripcion)&&void 0!==j?j:null,giro:null!==($=null!==(R=null==i?void 0:i.giro)&&void 0!==R?R:null==i?void 0:i.Giro)&&void 0!==$?$:null,grupo:null!==(I=null!==(y=null==i?void 0:i.grupo)&&void 0!==y?y:null==i?void 0:i.Grupo)&&void 0!==I?I:null,embajadorId:null!==(D=null!==(S=null==i?void 0:i.embajadorId)&&void 0!==S?S:null==i?void 0:i.EmbajadorId)&&void 0!==D?D:null,fechaCreacion:this.toDate(null!==(T=null==i?void 0:i.fechaCreacion)&&void 0!==T?T:null==i?void 0:i.FechaCreacion),eliminado:!!(null!==(G=null==i?void 0:i.eliminado)&&void 0!==G?G:null!=i&&i.Eliminado),fechaEliminacion:this.toDate(null!==(z=null==i?void 0:i.fechaEliminacion)&&void 0!==z?z:null==i?void 0:i.FechaEliminacion),logoSrc:this.buildLogoSrc(i)}}cargar(){this.cargando=!0,this.usuarioSrv.getUsuario(!0).subscribe({next:i=>{var n,t;if(!this.isOk(i)||null==i||!i.data)return void this.fail(this.getMsg(i,"No fue posible identificar al usuario actual."));const e=i.data,d=null!==(n=null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null==e?void 0:e.ID)&&void 0!==n?n:null==e?void 0:e.Id;d?this.usuarioSrv.getEmpresaByUsuario(d).subscribe({next:a=>{this.isOk(a)?(this.empresa=a.data,this.view=this.normalizeEmpresa(this.empresa)):this.fail(this.getMsg(a,"No fue posible cargar la empresa."))},error:()=>this.fail("Error al consultar la empresa."),complete:()=>this.cargando=!1}):this.fail("El usuario no trae un ID v\xe1lido.")},error:()=>this.fail("Error al consultar el usuario.")})}fail(i){var n=this;return(0,L.A)(function*(){n.cargando=!1,(yield n.alertCtrl.create({header:"Ups",message:i,buttons:["OK"]})).present()})()}refrescar(i){this.cargar(),setTimeout(()=>{var n,t;return null==i||null===(n=i.target)||void 0===n||null===(t=n.complete)||void 0===t?void 0:t.call(n)},500)}}return(l=s).\u0275fac=function(i){return new(i||l)(o.rXU(U.o),o.rXU(r.hG))},l.\u0275cmp=o.VBU({type:l,selectors:[["app-visual-empresa-view"]],standalone:!1,decls:14,vars:2,consts:[["skeleton",""],["placeholder",""],[1,"pagesHeader"],["slot","start"],["name","business","color","white"],[1,"pagesContent"],["slot","fixed",3,"ionRefresh"],[4,"ngIf","ngIfElse"],[1,"panel"],[1,"panel-heading"],[1,"title"],[1,"panel-body"],[1,"empresa-head"],["class","logo",4,"ngIf","ngIfElse"],[1,"empresa-titles"],[1,"rs"],[1,"rfc"],[1,"table-like","mt"],[1,"row"],[1,"col","col-h"],[1,"col"],[1,"col","pre"],[1,"status"],[1,"dot"],[1,"table-like"],[1,"logo"],["alt","Logo empresa",3,"src"],[1,"logo","placeholder"],["name","business-outline"],["animated","",2,"height","16px","width","30%"],["animated","",2,"height","14px","width","100%"]],template:function(i,n){if(1&i){const t=o.RV6();o.j41(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-buttons",3),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title")(5,"h1"),o.nrm(6,"ion-icon",4),o.EFF(7," Mi empresa"),o.k0s()()()(),o.j41(8,"ion-content",5)(9,"ion-refresher",6),o.bIt("ionRefresh",function(d){return o.eBV(t),o.Njj(n.refrescar(d))}),o.nrm(10,"ion-refresher-content"),o.k0s(),o.DNE(11,H,76,19,"ng-container",7)(12,A,8,0,"ng-template",null,0,o.C5r),o.k0s()}if(2&i){const t=o.sdS(13);o.R7$(11),o.Y8G("ngIf",!n.cargando)("ngIfElse",t)}},dependencies:[g.bT,r.QW,r.b_,r.I9,r.ME,r.tN,r.W9,r.eU,r.iq,r.MC,r.To,r.Ki,r.ds,r.BC,r.ai,g.vh],styles:["[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{margin:10px 8px 14px;border-radius:6px;background:#fff;border:1px solid #e5e7eb;box-shadow:0 1px 2px #0000000d}[_nghost-%COMP%]   .panel-heading[_ngcontent-%COMP%]{background:#f3f4f6;border-bottom:1px solid #e5e7eb;padding:10px 12px}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:#374151;margin:0}[_nghost-%COMP%]   .panel-body[_ngcontent-%COMP%]{padding:8px 10px 12px}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]{display:grid;grid-template-columns:56px 1fr;gap:12px;align-items:center;padding:2px 2px 10px;border-bottom:1px solid rgba(0,0,0,.06)}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:10px;overflow:hidden;background:#eef2f7;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]   .logo.placeholder[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#6b7280}[_nghost-%COMP%]   .empresa-titles[_ngcontent-%COMP%]   .rs[_ngcontent-%COMP%]{font-weight:700;font-size:16px;color:#111827}[_nghost-%COMP%]   .empresa-titles[_ngcontent-%COMP%]   .rfc[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}[_nghost-%COMP%]   .mt[_ngcontent-%COMP%]{margin-top:8px}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;align-items:center;padding:10px 6px;border-bottom:1px solid rgba(0,0,0,.06)}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{border-bottom:none}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .col-h[_ngcontent-%COMP%]{font-weight:700;color:#6b7280}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .pre[_ngcontent-%COMP%]{white-space:pre-line}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:999px;background:#9ca3af}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]   .dot.ok[_ngcontent-%COMP%]{background:var(--ion-color-success, #10b981)}@media (max-width: 768px){[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{grid-template-columns:150px 1fr}}"]}),s})()}];let Q=(()=>{var l;class s{}return(l=s).\u0275fac=function(i){return new(i||l)},l.\u0275mod=o.$C({type:l}),l.\u0275inj=o.G2t({imports:[J.iI.forChild(K),J.iI]}),s})(),Z=(()=>{var l;class s{}return(l=s).\u0275fac=function(i){return new(i||l)},l.\u0275mod=o.$C({type:l}),l.\u0275inj=o.G2t({imports:[g.MD,B.YN,r.bv,Q]}),s})()}}]);