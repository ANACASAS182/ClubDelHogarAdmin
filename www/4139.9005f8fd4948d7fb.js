"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4139],{4139:(q,N,c)=>{c.r(N),c.d(N,{VisualEmpresaViewPageModule:()=>Z});var p=c(2881),J=c(9417),r=c(3092),B=c(9870),L=c(467),W=c(5312),o=c(1360),U=c(7248);function X(t,s){if(1&t&&(o.j41(0,"div",24),o.nrm(1,"img",25),o.k0s()),2&t){const u=o.XpG(2);o.R7$(),o.Y8G("src",u.view.logoSrc,o.B4B)}}function Y(t,s){1&t&&(o.j41(0,"div",26),o.nrm(1,"ion-icon",27),o.k0s())}function H(t,s){if(1&t&&(o.qex(0),o.j41(1,"ion-card",8)(2,"ion-card-header",9)(3,"ion-card-title",10),o.nrm(4,"ion-icon",11),o.j41(5,"span"),o.EFF(6,"Identificaci\xf3n"),o.k0s()()(),o.j41(7,"ion-card-content",12)(8,"div",13),o.DNE(9,X,2,1,"div",14)(10,Y,2,0,"ng-template",null,1,o.C5r),o.j41(12,"div",15)(13,"div",16),o.EFF(14),o.k0s(),o.j41(15,"div",17)(16,"span",18),o.EFF(17),o.k0s()()()(),o.j41(18,"div",19)(19,"div",20)(20,"div",21),o.EFF(21,"Nombre comercial"),o.k0s(),o.j41(22,"div",22),o.EFF(23),o.k0s()(),o.j41(24,"div",20)(25,"div",21),o.EFF(26,"Descripci\xf3n"),o.k0s(),o.j41(27,"div",23),o.EFF(28),o.k0s()(),o.j41(29,"div",20)(30,"div",21),o.EFF(31,"Giro"),o.k0s(),o.j41(32,"div",22),o.EFF(33),o.k0s()(),o.j41(34,"div",20)(35,"div",21),o.EFF(36,"Grupo"),o.k0s(),o.j41(37,"div",22),o.EFF(38),o.k0s()(),o.j41(39,"div",20)(40,"div",21),o.EFF(41,"Embajador ID"),o.k0s(),o.j41(42,"div",22),o.EFF(43),o.k0s()(),o.j41(44,"div",20)(45,"div",21),o.EFF(46,"Fecha de creaci\xf3n"),o.k0s(),o.j41(47,"div",22),o.EFF(48),o.nI1(49,"date"),o.k0s()()()()(),o.bVm()),2&t){let u,n,i;const l=o.sdS(11),e=o.XpG();o.R7$(9),o.Y8G("ngIf",e.view.logoSrc)("ngIfElse",l),o.R7$(5),o.SpI(" ",e.view.razonSocial||"\u2014"," "),o.R7$(3),o.SpI("RFC: ",e.view.rfc||"\u2014",""),o.R7$(6),o.JRh(e.view.nombreComercial||"\u2014"),o.R7$(5),o.JRh(e.view.descripcion||"\u2014"),o.R7$(5),o.JRh(null!==(u=e.view.giro)&&void 0!==u?u:"\u2014"),o.R7$(5),o.JRh(null!==(n=e.view.grupo)&&void 0!==n?n:"\u2014"),o.R7$(5),o.JRh(null!==(i=e.view.embajadorId)&&void 0!==i?i:"\u2014"),o.R7$(5),o.SpI(" ",e.view.fechaCreacion?o.i5U(49,10,e.view.fechaCreacion,"dd/MM/yyyy HH:mm"):"\u2014"," ")}}function K(t,s){1&t&&(o.j41(0,"ion-card",28)(1,"ion-card-header",9)(2,"ion-card-title",10),o.EFF(3,"Cargando\u2026"),o.k0s()(),o.j41(4,"ion-card-content",12),o.nrm(5,"ion-skeleton-text",29)(6,"ion-skeleton-text",30)(7,"ion-skeleton-text",30),o.k0s()())}const A=[{path:"",component:(()=>{var t;class s{constructor(n,i){this.usuarioSrv=n,this.alertCtrl=i,this.cargando=!0,this.view={}}ngOnInit(){this.cargar()}isOk(n){return 1===(null==n?void 0:n.estatus)||!0===(null==n?void 0:n.success)||!0===(null==n?void 0:n.ok)}getMsg(n,i){var l,e,d;return null!==(l=null!==(e=null!==(d=null==n?void 0:n.mensaje)&&void 0!==d?d:null==n?void 0:n.message)&&void 0!==e?e:null==n?void 0:n.error)&&void 0!==l?l:i}toDate(n){if(!n)return null;if(n instanceof Date)return n;if("number"==typeof n)return new Date(n);if("string"==typeof n){const i=n.includes("T")?n:n.replace(" ","T"),l=new Date(i);return isNaN(l.getTime())?null:l}return null}buildLogoSrc(n){var i,l,e,d;const a=null!==(i=null!==(l=null==n?void 0:n.logotipoBase64)&&void 0!==l?l:null==n?void 0:n.LogotipoBase64)&&void 0!==i?i:null;if(a&&/^data:image\/(png|jpeg|jpg|gif);base64,/i.test(a))return a;if(a&&!a.startsWith("data:image"))return`data:image/png;base64,${a}`;const g=null!==(e=null!==(d=null==n?void 0:n.logotipoPath)&&void 0!==d?d:null==n?void 0:n.LogotipoPath)&&void 0!==e?e:null;return g?/^https?:\/\//i.test(g)?g:`${W.c.apiUrl}${g.startsWith("/")?"":"/"}${g}`:null}normalizeEmpresa(n){var i,l,e,d,a,g,v,m,f,h,_,C,P,M,x,O,b,w,E,F,V,k,j,$,I,y,R,D,S,z,T,G;return{id:null!==(i=null!==(l=null==n?void 0:n.id)&&void 0!==l?l:null==n?void 0:n.ID)&&void 0!==i?i:null,rfc:null!==(e=null!==(d=null==n?void 0:n.rfc)&&void 0!==d?d:null==n?void 0:n.RFC)&&void 0!==e?e:null,razonSocial:null!==(a=null!==(g=null==n?void 0:n.razonSocial)&&void 0!==g?g:null==n?void 0:n.RazonSocial)&&void 0!==a?a:null,nombreComercial:null!==(v=null!==(m=null==n?void 0:n.nombreComercial)&&void 0!==m?m:null==n?void 0:n.NombreComercial)&&void 0!==v?v:null,estatus:null!==(f=null!==(h=null==n?void 0:n.estatus)&&void 0!==h?h:null==n?void 0:n.Estatus)&&void 0!==f?f:null,correo:null!==(_=null!==(C=null!==(P=null!==(M=null==n?void 0:n.correo)&&void 0!==M?M:null==n?void 0:n.Correo)&&void 0!==P?P:null==n?void 0:n.email)&&void 0!==C?C:null==n?void 0:n.Email)&&void 0!==_?_:null,telefono:null!==(x=null!==(O=null!==(b=null==n?void 0:n.telefono)&&void 0!==b?b:null==n?void 0:n.Telefono)&&void 0!==O?O:null==n?void 0:n.tel)&&void 0!==x?x:null,domicilio:null!==(w=null!==(E=null!==(F=null!==(V=null==n?void 0:n.domicilio)&&void 0!==V?V:null==n?void 0:n.Domicilio)&&void 0!==F?F:null==n?void 0:n.direccion)&&void 0!==E?E:null==n?void 0:n.Direccion)&&void 0!==w?w:null,descripcion:null!==(k=null!==(j=null==n?void 0:n.descripcion)&&void 0!==j?j:null==n?void 0:n.Descripcion)&&void 0!==k?k:null,giro:null!==($=null!==(I=null==n?void 0:n.giro)&&void 0!==I?I:null==n?void 0:n.Giro)&&void 0!==$?$:null,grupo:null!==(y=null!==(R=null==n?void 0:n.grupo)&&void 0!==R?R:null==n?void 0:n.Grupo)&&void 0!==y?y:null,embajadorId:null!==(D=null!==(S=null==n?void 0:n.embajadorId)&&void 0!==S?S:null==n?void 0:n.EmbajadorId)&&void 0!==D?D:null,fechaCreacion:this.toDate(null!==(z=null==n?void 0:n.fechaCreacion)&&void 0!==z?z:null==n?void 0:n.FechaCreacion),eliminado:!!(null!==(T=null==n?void 0:n.eliminado)&&void 0!==T?T:null!=n&&n.Eliminado),fechaEliminacion:this.toDate(null!==(G=null==n?void 0:n.fechaEliminacion)&&void 0!==G?G:null==n?void 0:n.FechaEliminacion),logoSrc:this.buildLogoSrc(n)}}cargar(){this.cargando=!0,this.usuarioSrv.getUsuario(!0).subscribe({next:n=>{var i,l;if(!this.isOk(n)||null==n||!n.data)return void this.fail(this.getMsg(n,"No fue posible identificar al usuario actual."));const e=n.data,d=null!==(i=null!==(l=null==e?void 0:e.id)&&void 0!==l?l:null==e?void 0:e.ID)&&void 0!==i?i:null==e?void 0:e.Id;d?this.usuarioSrv.getEmpresaByUsuario(d).subscribe({next:a=>{this.isOk(a)?(this.empresa=a.data,this.view=this.normalizeEmpresa(this.empresa)):this.fail(this.getMsg(a,"No fue posible cargar la empresa."))},error:()=>this.fail("Error al consultar la empresa."),complete:()=>this.cargando=!1}):this.fail("El usuario no trae un ID v\xe1lido.")},error:()=>this.fail("Error al consultar el usuario.")})}fail(n){var i=this;return(0,L.A)(function*(){i.cargando=!1,(yield i.alertCtrl.create({header:"Ups",message:n,buttons:["OK"]})).present()})()}refrescar(n){this.cargar(),setTimeout(()=>{var i,l;return null==n||null===(i=n.target)||void 0===i||null===(l=i.complete)||void 0===l?void 0:l.call(i)},500)}}return(t=s).\u0275fac=function(n){return new(n||t)(o.rXU(U.o),o.rXU(r.hG))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-visual-empresa-view"]],standalone:!1,decls:14,vars:2,consts:[["skeleton",""],["placeholder",""],[1,"pagesHeader"],["slot","start"],["name","business","color","white"],[1,"pagesContent"],["slot","fixed",3,"ionRefresh"],[4,"ngIf","ngIfElse"],[1,"panel","panel-identificacion"],[1,"panel-heading"],[1,"title"],["name","id-card-outline"],[1,"panel-body"],[1,"empresa-head"],["class","logo",4,"ngIf","ngIfElse"],[1,"empresa-titles"],[1,"rs"],[1,"badges"],[1,"badge"],[1,"table-like","mt"],[1,"row"],[1,"col","col-h"],[1,"col"],[1,"col","pre"],[1,"logo"],["alt","Logo empresa",3,"src"],[1,"logo","placeholder"],["name","business-outline"],[1,"panel"],["animated","",2,"height","16px","width","30%"],["animated","",2,"height","14px","width","100%"]],template:function(n,i){if(1&n){const l=o.RV6();o.j41(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-buttons",3),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title")(5,"h1"),o.nrm(6,"ion-icon",4),o.EFF(7," Mi empresa"),o.k0s()()()(),o.j41(8,"ion-content",5)(9,"ion-refresher",6),o.bIt("ionRefresh",function(d){return o.eBV(l),o.Njj(i.refrescar(d))}),o.nrm(10,"ion-refresher-content"),o.k0s(),o.DNE(11,H,50,13,"ng-container",7)(12,K,8,0,"ng-template",null,0,o.C5r),o.k0s()}if(2&n){const l=o.sdS(13);o.R7$(11),o.Y8G("ngIf",!i.cargando)("ngIfElse",l)}},dependencies:[p.bT,r.QW,r.b_,r.I9,r.ME,r.tN,r.W9,r.eU,r.iq,r.MC,r.To,r.Ki,r.ds,r.BC,r.ai,p.vh],styles:['@charset "UTF-8";[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{margin:16px 12px 20px;border-radius:12px;background:#fff;border:1px solid #e2e5ea;box-shadow:0 10px 22px #11182714}[_nghost-%COMP%]   .panel-heading[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f5f7fa,#edf1f6);border-bottom:1px solid #e2e5ea;padding:14px 18px}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:10px;font-weight:800;font-size:17px;color:#1f2937}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;opacity:.9}[_nghost-%COMP%]   .panel-body[_ngcontent-%COMP%]{padding:18px 18px 20px}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]{display:grid;grid-template-columns:72px 1fr;gap:14px;align-items:center;padding-bottom:14px;border-bottom:1px solid rgba(0,0,0,.06)}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:14px;overflow:hidden;background:#eef2f7;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]   .logo.placeholder[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;color:#6b7280}[_nghost-%COMP%]   .empresa-titles[_ngcontent-%COMP%]{display:grid;gap:6px}[_nghost-%COMP%]   .empresa-titles[_ngcontent-%COMP%]   .rs[_ngcontent-%COMP%]{font-weight:800;font-size:20px;color:#111827;line-height:1.2}[_nghost-%COMP%]   .empresa-titles[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}[_nghost-%COMP%]   .empresa-titles[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-size:12px;font-weight:700;letter-spacing:.25px;padding:5px 10px;border-radius:999px;color:#374151;background:#eef2f7;border:1px solid #e5e7eb}[_nghost-%COMP%]   .mt[_ngcontent-%COMP%]{margin-top:12px}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:grid;grid-template-columns:320px 1fr;align-items:start;padding:14px 8px;min-height:46px;border-bottom:1px solid rgba(0,0,0,.06)}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{border-bottom:none}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .col-h[_ngcontent-%COMP%]{font-weight:700;color:#6b7280;font-size:14px}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{font-size:15px;color:#1f2937}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .pre[_ngcontent-%COMP%]{white-space:pre-line}[_nghost-%COMP%]   .pagesContent[_nghost-%COMP%]   .panel.panel-identificacion[_ngcontent-%COMP%], .pagesContent   [_nghost-%COMP%]   .panel.panel-identificacion[_ngcontent-%COMP%]{max-width:1280px;margin-left:auto;margin-right:auto}@media (max-width: 1200px){[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{grid-template-columns:260px 1fr}}@media (max-width: 992px){[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{grid-template-columns:200px 1fr;padding:12px 6px}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]{grid-template-columns:64px 1fr}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:64px;height:64px}[_nghost-%COMP%]   .empresa-titles[_ngcontent-%COMP%]   .rs[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 768px){[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{margin:12px 10px 16px}[_nghost-%COMP%]   .table-like[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{grid-template-columns:140px 1fr;padding:10px 4px}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]{grid-template-columns:56px 1fr}[_nghost-%COMP%]   .empresa-head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:10px}[_nghost-%COMP%]   .empresa-titles[_ngcontent-%COMP%]   .rs[_ngcontent-%COMP%]{font-size:16px}}']}),s})()}];let Q=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[B.iI.forChild(A),B.iI]}),s})(),Z=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[p.MD,J.YN,r.bv,Q]}),s})()}}]);