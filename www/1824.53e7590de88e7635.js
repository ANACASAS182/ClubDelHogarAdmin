"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1824],{1824:(lt,Y,d)=>{d.r(Y),d.d(Y,{ProductosPageModule:()=>rt});var v=d(2881),m=d(9417),c=d(3092),X=d(9870),b=d(467),S=d(7550),E=d(2042),h=d(3662),O=d(1413),C=d(4843),eo=d(152),no=d(3294),io=d(6977),w=d(7786),z=d(9172),J=d(5558),H=d(9437),Q=d(7673),L=d(6354),_=d(6231),o=d(1360),q=d(7643),ro=d(5312);let G=(()=>{var n;class s{constructor(e){this.http=e,this.apiUrl=ro.c.apiUrl+"api/Producto"}getProductoById(e){return this.http.get(`${this.apiUrl}/getProductoById?productoId=`+e)}getAllProductosEmpresa(e){let t=(new q.Nl).set("empresaID",e);return this.http.get(`${this.apiUrl}/GetProductosEmpresa`,{params:t})}getProductoAllPaginated(e){let t={page:e.page.toString(),size:e.size.toString(),sortBy:e.sortBy,sortDir:e.sortDir,searchQuery:e.searchQuery,grupoID:e.grupoID,empresaID:e.empresaID,vigenciaFilter:e.vigenciaFilter.toString()};return this.http.get(`${this.apiUrl}/GetAllProductoPaginated`,{params:t})}getProductoByEmpresaPaginated(e){let t={empresaID:e.id.toString(),page:e.page.toString(),size:e.size.toString(),sortBy:e.sortBy,sortDir:e.sortDir,searchQuery:e.searchQuery,vigenciaFilter:e.vigenciaFilter.toString()};return this.http.get(`${this.apiUrl}/GetProductoByEmpresaPaginated`,{params:t})}save(e){return this.http.post(`${this.apiUrl}/Save`,e)}}return(n=s).\u0275fac=function(e){return new(e||n)(o.KVO(q.Qq))},n.\u0275prov=o.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),s})();function lo(n,s){if(1&n&&(o.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2"),o.EFF(4),o.k0s(),o.j41(5,"p",4),o.EFF(6),o.k0s(),o.j41(7,"div",5)(8,"p")(9,"strong"),o.EFF(10,"Fecha de creaci\xf3n:"),o.k0s(),o.EFF(11),o.k0s(),o.j41(12,"p")(13,"strong"),o.EFF(14,"Vigencia:"),o.k0s(),o.EFF(15),o.k0s()()(),o.j41(16,"div",6)(17,"h2"),o.EFF(18,"Comisiones"),o.k0s(),o.j41(19,"table",7)(20,"tbody")(21,"tr")(22,"td")(23,"strong"),o.EFF(24,"Nivel 1"),o.k0s()(),o.j41(25,"td",8),o.EFF(26),o.nI1(27,"number"),o.k0s()(),o.j41(28,"tr")(29,"td")(30,"strong"),o.EFF(31,"Nivel 2"),o.k0s()(),o.j41(32,"td",8),o.EFF(33),o.nI1(34,"number"),o.k0s()(),o.j41(35,"tr")(36,"td")(37,"strong"),o.EFF(38,"Nivel 3"),o.k0s()(),o.j41(39,"td",8),o.EFF(40),o.nI1(41,"number"),o.k0s()(),o.j41(42,"tr")(43,"td")(44,"strong"),o.EFF(45,"Nivel 4"),o.k0s()(),o.j41(46,"td",8),o.EFF(47),o.nI1(48,"number"),o.k0s()(),o.j41(49,"tr")(50,"td")(51,"strong"),o.EFF(52,"Invitaci\xf3n"),o.k0s()(),o.j41(53,"td",8),o.EFF(54),o.nI1(55,"number"),o.k0s()(),o.j41(56,"tr")(57,"td")(58,"strong"),o.EFF(59,"Master"),o.k0s()(),o.j41(60,"td",8),o.EFF(61),o.nI1(62,"number"),o.k0s()(),o.j41(63,"tr",9)(64,"td")(65,"strong"),o.EFF(66,"Total"),o.k0s()(),o.j41(67,"td",8),o.EFF(68),o.nI1(69,"number"),o.k0s()()()()()()()),2&n){const i=o.XpG();o.R7$(4),o.JRh(i.producto.nombre),o.R7$(2),o.JRh(i.producto.descripcion),o.R7$(5),o.SpI(" ",i.producto.creacionLetra,""),o.R7$(4),o.SpI(" ",i.producto.vigenciaLetra,""),o.R7$(11),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(27,25,i.producto.nivel1,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(34,28,i.producto.nivel2,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(41,31,i.producto.nivel3,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(48,34,i.producto.nivel4,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(55,37,i.producto.nivelInvitacion,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(62,40,i.producto.nivelMaster,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(69,43,i.producto.totalComision,"1.2-2"),"",1===i.producto.tipoComision?"%":""," ")}}let ao=(()=>{var n;class s{constructor(e){this.productoService=e,this.productoId=0}ngOnInit(){this.loadData()}loadData(){this.productoService.getProductoById(this.productoId).subscribe({next:e=>{this.producto=e},error:e=>{},complete:()=>{}})}}return(n=s).\u0275fac=function(e){return new(e||n)(o.rXU(G))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-modal-editar-producto"]],inputs:{productoId:"productoId"},decls:1,vars:1,consts:[["class","producto-modal-content",4,"ngIf"],[1,"producto-modal-content"],[1,"modal-body"],[1,"modal-info"],[1,"modal-descripcion"],[1,"modal-fechas"],[1,"modal-comisiones"],[1,"comisiones-table"],[1,"monto"],[1,"comision-total"]],template:function(e,t){1&e&&o.DNE(0,lo,70,46,"div",0),2&e&&o.Y8G("ngIf",t.producto)},dependencies:[v.MD,v.bT,v.QX],styles:[".producto-modal-content[_ngcontent-%COMP%]{padding:24px;background-color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333;max-height:85vh;overflow-y:auto}.modal-titulo[_ngcontent-%COMP%]{font-size:26px;margin-bottom:24px;color:#2c3e50;border-bottom:1px solid #ddd;padding-bottom:6px}.modal-body[_ngcontent-%COMP%]{display:flex;gap:40px;flex-wrap:wrap}.modal-info[_ngcontent-%COMP%]{flex:1;min-width:250px}.modal-descripcion[_ngcontent-%COMP%]{font-size:15px;line-height:1.6;margin-bottom:16px}.modal-fechas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:4px 0}.modal-comisiones[_ngcontent-%COMP%]{margin-top:20px}.modal-comisiones[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin-bottom:12px;color:#1e8449}.comisiones-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:16px}.comisiones-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;border-bottom:1px solid #ddd}.comisiones-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left}.comisiones-table[_ngcontent-%COMP%]   .monto[_ngcontent-%COMP%]{text-align:right;font-weight:500}.comisiones-table[_ngcontent-%COMP%]   .comision-total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:2px solid #444;font-weight:700}@media (max-width: 768px){.modal-body[_ngcontent-%COMP%]{flex-direction:column}}"]}),s})();var so=d(980),F=function(n){return n[n.CantidadFija=0]="CantidadFija",n[n.Porcentaje=1]="Porcentaje",n}(F||{});const co={CantidadFija:"Cantidad",Porcentaje:"Porcentaje"};var mo=d(6704),W=d(3746),j=d(3069),po=d(3),x=d(6152),go=d(5460),Z=d(8311),K=d(7248),ho=d(4596),k=d(365);const vo=["class","producto form"],U=(n,s)=>({visible:n,invisible:s}),fo=()=>({header:"Tipo de comision"}),_o=()=>({header:"Selecciona empresa"});function Co(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function Fo(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function Po(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function bo(n,s){if(1&n&&(o.j41(0,"ion-select-option",40),o.EFF(1),o.k0s()),2&n){const i=s.$implicit;o.Y8G("value",i.id),o.R7$(),o.Lme(" ",i.rfc," - ",i.razonSocial," ")}}function Eo(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function jo(n,s){if(1&n){const i=o.RV6();o.j41(0,"ion-col",17)(1,"ion-select",39),o.bIt("ionBlur",function(){let t;o.eBV(i);const r=o.XpG();return o.Njj(null==(t=r.getControl("empresa"))?null:t.markAsTouched())}),o.DNE(2,bo,2,3,"ion-select-option",22),o.k0s(),o.DNE(3,Eo,2,0,"ion-text",11),o.k0s()}if(2&n){let i,e;const t=o.XpG();o.R7$(),o.AVh("invalid",(null==(i=t.getControl("empresa"))?null:i.invalid)&&(null==(i=t.getControl("empresa"))?null:i.touched)),o.Y8G("interfaceOptions",o.lJ4(5,_o)),o.R7$(),o.Y8G("ngForOf",t.empresas),o.R7$(),o.Y8G("ngIf",(null==(e=t.getControl("empresa"))?null:e.invalid)&&(null==(e=t.getControl("empresa"))?null:e.touched))}}function ko(n,s){if(1&n&&(o.j41(0,"ion-select-option",40),o.EFF(1),o.k0s()),2&n){const i=s.$implicit;o.Y8G("value",i.valor),o.R7$(),o.SpI(" ",i.nombre," ")}}function Do(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function Io(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function Ro(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function Mo(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function To(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function $o(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function Ao(n,s){1&n&&(o.j41(0,"ion-text",38),o.EFF(1," Campo requerido "),o.k0s())}function yo(n,s){if(1&n&&(o.j41(0,"span"),o.EFF(1),o.k0s()),2&n){const i=o.XpG();o.R7$(),o.SpI(" Pagar\xe1s ",i.comisionTotalProductoAgregando," por cada una de las referencias que se hagan v\xe1lidas para este producto ")}}function Vo(n,s){if(1&n&&(o.j41(0,"span"),o.EFF(1),o.nrm(2,"br"),o.j41(3,"small"),o.EFF(4,"Deber\xe1s indicar el importe con el cual la venta del producto fue cerrada para deteminar los valores de cada una de las comisiones a repartir"),o.k0s()()),2&n){const i=o.XpG();o.R7$(),o.SpI(" Pagar\xe1s un ",i.comisionTotalProductoAgregando," por cada una de las referencias que se hagan v\xe1lidas para este producto. ")}}function No(n,s){if(1&n){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const t=o.XpG();return o.Njj(t.siguientePaso(1))}),o.EFF(2," Continuar "),o.k0s()()}if(2&n){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado)}}function Bo(n,s){if(1&n){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const t=o.XpG();return o.Njj(t.pasoAnterior(1))}),o.EFF(2," Regresar "),o.k0s()()}if(2&n){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado)}}function So(n,s){if(1&n){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const t=o.XpG();return o.Njj(t.siguientePaso(2))}),o.EFF(2," Validar "),o.k0s()()}if(2&n){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado)}}function Go(n,s){if(1&n){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const t=o.XpG();return o.Njj(t.pasoAnterior(2))}),o.EFF(2," Regresar "),o.k0s()()}if(2&n){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado)}}function xo(n,s){if(1&n){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const t=o.XpG();return o.Njj(t.enviarFormulario())}),o.EFF(2," PUBLICAR "),o.k0s()()}if(2&n){const i=o.XpG();o.R7$(),o.Y8G("disabled",0==i.confirmacionProductoAgregado)}}let Uo=(()=>{var n;class s{constructor(e,t,r,a,l,u,p,g,f){this.fb=e,this.toastController=t,this.loadingCtrl=r,this.empresasService=a,this.productoService=l,this.usuarioService=u,this.cdr=p,this.utilerias=g,this.modalCtrl=f,this.btnName="AGREGAR",this.title="AGREGAR",this.formEnviado=!1,this.tiposComision=[],this.id=void 0,this.TipoComisionEnum=F,this.empresas=[],this.mostrarEmpresas=!1,this.empresaID=0,this.estatusDatosbasicos=1,this.estatusDatosComisiones=0,this.estatusDatosValidacion=0,this.nombreProductoAgregando="",this.descripcionProductoAgregando="",this.vigenciaProductoAgregando="",this.nivel1ProductoAgregando="",this.nivel2ProductoAgregando="",this.nivel3ProductoAgregando="",this.nivel4ProductoAgregando="",this.nivelInvitacionProductoAgregando="",this.nivelMasterProductoAgregando="",this.comisionTotalProductoAgregando="",this.tipoComisionAgregando=0,this.fechaVigenciaTextoAgregando="",this.confirmacionProductoAgregado=!1,this.pasoActual="Descripci\xf3n";let P=this.obtenerUltimoDiaDeTresMesesDespues();this.formulario=this.fb.group({nombre:["",[m.k0.required,(0,go.a)()]],descripcion:[""],fechaVencimiento:[P,m.k0.required],empresa:[""],tipoComision:["",m.k0.required],comisionCantidad:[""],comisionPorcentaje:[""],cantidadPorcentaje:[""],otroTipoComision:["",m.k0.required],nivel_1:["",m.k0.required],nivel_2:["",m.k0.required],nivel_3:["",m.k0.required],nivel_4:["",m.k0.required],nivel_master:["",m.k0.required],nivel_invitacion:["",m.k0.required]})}obtenerUltimoDiaDeTresMesesDespues(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth()+13,1);return new Date(t.getFullYear(),t.getMonth(),0)}siguientePaso(e){this.confirmacionProductoAgregado=!1,this.nombreProductoAgregando=(0,x.H)(this.formulario.controls.nombre.value),this.descripcionProductoAgregando=this.formulario.controls.descripcion.value,this.fechaVigenciaTextoAgregando=this.utilerias.formatearFecha(this.formulario.controls.fechaVencimiento.value);let t=this.formulario.controls.tipoComision.value;this.tipoComisionAgregando=t;let r=Number.parseFloat(this.formulario.controls.nivel_1.value),a=Number.parseFloat(this.formulario.controls.nivel_2.value),l=Number.parseFloat(this.formulario.controls.nivel_3.value),u=Number.parseFloat(this.formulario.controls.nivel_4.value),p=Number.parseFloat(this.formulario.controls.nivel_invitacion.value),g=Number.parseFloat(this.formulario.controls.nivel_master.value),f=r+a+l+u+p+g;0==t&&(this.nivel1ProductoAgregando="$"+r.toFixed(2)+" MXN",this.nivel2ProductoAgregando="$"+a.toFixed(2)+"MXN",this.nivel3ProductoAgregando="$"+l.toFixed(2)+"MXN",this.nivel4ProductoAgregando="$"+u.toFixed(2)+"MXN",this.nivelInvitacionProductoAgregando="$"+p.toFixed(2)+"MXN",this.nivelMasterProductoAgregando="$"+g.toFixed(2)+"MXN",this.comisionTotalProductoAgregando="$"+f.toFixed(2)+"MXN"),1==t&&(this.nivel1ProductoAgregando=r.toFixed(2)+"%",this.nivel2ProductoAgregando=a.toFixed(2)+"%",this.nivel3ProductoAgregando=l.toFixed(2)+"%",this.nivel4ProductoAgregando=u.toFixed(2)+"%",this.nivelInvitacionProductoAgregando=p.toFixed(2)+"%",this.nivelMasterProductoAgregando=g.toFixed(2)+"%",this.comisionTotalProductoAgregando=f.toFixed(2)+"%"),1==e&&(this.estatusDatosbasicos=0,this.estatusDatosComisiones=1,this.estatusDatosValidacion=0,this.pasoActual="Comisiones"),2==e&&(this.estatusDatosbasicos=0,this.estatusDatosComisiones=0,this.estatusDatosValidacion=1,this.pasoActual="Validaci\xf3n")}pasoAnterior(e){this.confirmacionProductoAgregado=!1,1==e&&(this.estatusDatosbasicos=1,this.estatusDatosComisiones=0,this.estatusDatosValidacion=0,this.pasoActual="Descripci\xf3n"),2==e&&(this.estatusDatosbasicos=0,this.estatusDatosComisiones=1,this.estatusDatosValidacion=0,this.pasoActual="Comisiones")}ngOnInit(){var e=this;return(0,b.A)(function*(){e.tiposComision=function uo(){return Object.keys(F).filter(n=>isNaN(Number(n))).map(n=>({nombre:co[n],valor:F[n]}))}();const t=yield e.loadingCtrl.create({message:"Cargando datos..."});yield t.present();try{var r,a;const l=yield(0,C._)(e.empresasService.getAllEmpresas());e.empresas=(null==l?void 0:l.data)||[];const u=yield(0,C._)(e.usuarioService.getUsuario()),p=null==u?void 0:u.data;if(e.rolUser=null===(r=p.roles)||void 0===r?void 0:r.enumValue,(null===(a=p.roles)||void 0===a?void 0:a.enumValue)==_.$u.Admin){e.mostrarEmpresas=!0;const g=e.formulario.get("empresa");null==g||g.setValidators([m.k0.required]),null==g||g.updateValueAndValidity(),e.cdr.detectChanges()}else{const g=yield(0,C._)(e.usuarioService.getEmpresaByUsuario(p.id));e.empresaID=null==g?void 0:g.data.id}}catch(l){console.error("Error al cargar datos",l)}finally{t.dismiss()}})()}enviarFormulario(){if(this.formulario.controls.fechaVencimiento.value<new Date)return this.toastController.create({message:"Fecha de vencimiento tiene que ser superior a la actual.",duration:3e3,color:"warning",position:"top"}).then(l=>l.present()),void(this.formEnviado=!1);const r=this.rolUser==_.$u.Admin?this.formulario.controls.empresa.value:this.empresaID;var a={nombre:(0,x.H)(this.formulario.controls.nombre.value),descripcion:(0,x.H)(this.formulario.controls.descripcion.value),empresaID:r,fechaCaducidad:this.formulario.controls.fechaVencimiento.value,nivel1:this.formulario.controls.nivel_1.value,nivel2:this.formulario.controls.nivel_2.value,nivel3:this.formulario.controls.nivel_3.value,nivel4:this.formulario.controls.nivel_4.value,nivelInvitacion:this.formulario.controls.nivel_invitacion.value,nivelMaster:this.formulario.controls.nivel_master.value,tipoComision:this.formulario.controls.tipoComision.value};this.productoService.save(a).pipe((0,so.j)(()=>{this.formEnviado=!1})).subscribe({next:l=>{l&&(this.toastController.create({message:"producto guardado.",duration:3e3,color:"success",position:"top"}).then(u=>u.present()),this.modalCtrl.dismiss(!0))}})}getControl(e){return this.formulario.get(e)}close(){this.modalCtrl.dismiss()}onTipoComisionChange(e){const t=e.detail.value,r=this.formulario.get("comisionCantidad"),a=this.formulario.get("comisionPorcentaje"),l=this.formulario.get("cantidadPorcentaje");switch(t){case F.CantidadFija:null==r||r.setValidators([m.k0.required]),null==a||a.clearValidators(),null==a||a.setValue(""),null==l||l.clearValidators(),null==l||l.setValue("");break;case F.Porcentaje:null==a||a.setValidators([m.k0.required]),null==l||l.setValidators([m.k0.required]),null==r||r.clearValidators(),null==r||r.setValue("")}null==r||r.updateValueAndValidity(),null==a||a.updateValueAndValidity(),null==a||a.updateValueAndValidity()}}return(n=s).\u0275fac=function(e){return new(e||n)(o.rXU(m.ok),o.rXU(c.K_),o.rXU(c.Xi),o.rXU(Z.z),o.rXU(G),o.rXU(K.o),o.rXU(o.gRc),o.rXU(ho.M),o.rXU(c.W3))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-modal",8,"producto","form"]],inputs:{id:"id"},features:[o.Jv_([(0,po.aw)()])],attrs:vo,decls:142,vars:68,consts:[["picker",""],[1,"modalHeader"],["slot","end"],[3,"click"],["name","close"],[1,"ion-padding",3,"fullscreen"],[2,"width","100%"],[1,"modalform",3,"formGroup"],[3,"ngClass"],["size","8"],["label-placement","floating","label","Nombre del producto","formControlName","nombre","placeholder","Nombre del producto","type","text",1,"inputForm",3,"ionBlur"],["color","danger",4,"ngIf"],["size","4"],["appearance","fill",1,"custom-datepicker"],["matInput","","formControlName","fechaVencimiento",3,"matDatepicker"],["matIconSuffix","",3,"for"],["touchUi",""],["size","12"],["label-placement","floating","label","Descripci\xf3n","formControlName","descripcion","placeholder","Descripci\xf3n del producto","type","text","formControlName","descripcion",1,"inputForm"],["size","12",4,"ngIf"],["size","6"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Tipo de comision","formControlName","tipoComision",1,"inputForm",3,"ionChange","ionBlur","interfaceOptions"],[3,"value",4,"ngFor","ngForOf"],["label-placement","floating","label","Nivel 1","formControlName","nivel_1","placeholder","Nivel 1","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel 2","formControlName","nivel_2","placeholder","Nivel 2","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel 3","formControlName","nivel_3","placeholder","Nivel 3","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel 4","formControlName","nivel_4","placeholder","Nivel 4","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel Invitaci\xf3n","formControlName","nivel_invitacion","placeholder","Nivel Invitaci\xf3n","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel Master","formControlName","nivel_master","placeholder","Nivel Master","type","number","min","0",1,"inputForm",3,"ionBlur"],["colspan","2"],[2,"text-align","start"],[2,"text-align","end"],[4,"ngIf"],["labelPlacement","end",3,"change","ngModelChange","ngModel"],["href","https://www.sistemasperseo.com/Embassy_Terminos_y_Privacidad.pdf"],[2,"text-align","center"],["style","width: 45%; display: inline-block;",4,"ngIf"],["style","width: 45%; display: inline-block; ",4,"ngIf"],["color","danger"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Empresa","formControlName","empresa",1,"inputForm",3,"ionBlur","interfaceOptions"],[3,"value"],[2,"width","45%","display","inline-block"],[1,"customButton",3,"click","disabled"]],template:function(e,t){if(1&e){const r=o.RV6();o.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),o.EFF(3),o.k0s()(),o.j41(4,"ion-buttons",2)(5,"ion-button",3),o.bIt("click",function(){return o.eBV(r),o.Njj(t.close())}),o.nrm(6,"ion-icon",4),o.k0s()()(),o.j41(7,"ion-content",5)(8,"ion-grid",6)(9,"form",7)(10,"div",8)(11,"ion-row")(12,"ion-col",9)(13,"ion-input",10),o.bIt("ionBlur",function(){let l;return o.eBV(r),o.Njj(null==(l=t.getControl("nombre"))?null:l.markAsTouched())}),o.k0s(),o.DNE(14,Co,2,0,"ion-text",11),o.k0s(),o.j41(15,"ion-col",12)(16,"mat-form-field",13)(17,"mat-label"),o.EFF(18,"Fecha de vencimiento"),o.k0s(),o.nrm(19,"input",14),o.j41(20,"mat-hint"),o.EFF(21,"DD/MM/YYYY"),o.k0s(),o.nrm(22,"mat-datepicker-toggle",15)(23,"mat-datepicker",16,0),o.k0s(),o.DNE(25,Fo,2,0,"ion-text",11),o.k0s()(),o.j41(26,"ion-row")(27,"ion-col",17),o.nrm(28,"ion-input",18),o.DNE(29,Po,2,0,"ion-text",11),o.k0s()(),o.j41(30,"ion-row"),o.DNE(31,jo,4,6,"ion-col",19),o.k0s()(),o.j41(32,"div",8)(33,"ion-row")(34,"ion-col",20)(35,"strong"),o.EFF(36,"Producto:"),o.k0s(),o.EFF(37),o.k0s(),o.j41(38,"ion-col",20)(39,"ion-select",21),o.bIt("ionChange",function(l){return o.eBV(r),o.Njj(t.onTipoComisionChange(l))})("ionBlur",function(){let l;return o.eBV(r),o.Njj(null==(l=t.getControl("tipoComision"))?null:l.markAsTouched())}),o.DNE(40,ko,2,2,"ion-select-option",22),o.k0s(),o.DNE(41,Do,2,0,"ion-text",11),o.k0s()(),o.j41(42,"ion-row")(43,"ion-col",17)(44,"ion-input",23),o.bIt("ionBlur",function(){let l;return o.eBV(r),o.Njj(null==(l=t.getControl("nivel_1"))?null:l.markAsTouched())}),o.k0s(),o.DNE(45,Io,2,0,"ion-text",11),o.k0s()(),o.j41(46,"ion-row")(47,"ion-col",17)(48,"ion-input",24),o.bIt("ionBlur",function(){let l;return o.eBV(r),o.Njj(null==(l=t.getControl("nivel_2"))?null:l.markAsTouched())}),o.k0s(),o.DNE(49,Ro,2,0,"ion-text",11),o.k0s()(),o.j41(50,"ion-row")(51,"ion-col",17)(52,"ion-input",25),o.bIt("ionBlur",function(){let l;return o.eBV(r),o.Njj(null==(l=t.getControl("nivel_3"))?null:l.markAsTouched())}),o.k0s(),o.DNE(53,Mo,2,0,"ion-text",11),o.k0s()(),o.j41(54,"ion-row")(55,"ion-col",17)(56,"ion-input",26),o.bIt("ionBlur",function(){let l;return o.eBV(r),o.Njj(null==(l=t.getControl("nivel_4"))?null:l.markAsTouched())}),o.k0s(),o.DNE(57,To,2,0,"ion-text",11),o.k0s()(),o.j41(58,"ion-row")(59,"ion-col",17)(60,"ion-input",27),o.bIt("ionBlur",function(){let l;return o.eBV(r),o.Njj(null==(l=t.getControl("nivel_invitacion"))?null:l.markAsTouched())}),o.k0s(),o.DNE(61,$o,2,0,"ion-text",11),o.k0s()(),o.j41(62,"ion-row")(63,"ion-col",17)(64,"ion-input",28),o.bIt("ionBlur",function(){let l;return o.eBV(r),o.Njj(null==(l=t.getControl("nivel_master"))?null:l.markAsTouched())}),o.k0s(),o.DNE(65,Ao,2,0,"ion-text",11),o.k0s()()()(),o.j41(66,"div",8)(67,"ion-row")(68,"ion-col",20)(69,"strong"),o.EFF(70,"Producto: "),o.k0s(),o.EFF(71),o.nrm(72,"br"),o.j41(73,"small"),o.EFF(74),o.nrm(75,"br")(76,"br"),o.j41(77,"strong"),o.EFF(78,"Vigencia: "),o.k0s(),o.EFF(79),o.nrm(80,"br"),o.EFF(81," Valida los datos del producto que publicar\xe1s. "),o.nrm(82,"br"),o.EFF(83," Una vez que el producto ha sido publicado, no podr\xe1 ser modificado. "),o.k0s()(),o.j41(84,"ion-col",20)(85,"table",6)(86,"tr")(87,"th",29),o.EFF(88,"Tabla de comisiones"),o.k0s()(),o.j41(89,"tr")(90,"th",30),o.EFF(91,"Nivel 1"),o.k0s(),o.j41(92,"td",31),o.EFF(93),o.k0s()(),o.j41(94,"tr")(95,"th",30),o.EFF(96,"Nivel 2"),o.k0s(),o.j41(97,"td",31),o.EFF(98),o.k0s()(),o.j41(99,"tr")(100,"th",30),o.EFF(101,"Nivel 3"),o.k0s(),o.j41(102,"td",31),o.EFF(103),o.k0s()(),o.j41(104,"tr")(105,"th",30),o.EFF(106,"Nivel 4"),o.k0s(),o.j41(107,"td",31),o.EFF(108),o.k0s()(),o.j41(109,"tr")(110,"th",30),o.EFF(111,"Invitador"),o.k0s(),o.j41(112,"td",31),o.EFF(113),o.k0s()(),o.j41(114,"tr")(115,"th",30),o.EFF(116,"Embassy"),o.k0s(),o.j41(117,"td",31),o.EFF(118),o.k0s()(),o.j41(119,"tr")(120,"th",30),o.EFF(121,"Total"),o.k0s(),o.j41(122,"th",31),o.EFF(123),o.k0s()()()()(),o.j41(124,"ion-row")(125,"ion-col",17),o.DNE(126,yo,2,1,"span",32)(127,Vo,5,1,"span",32),o.k0s()(),o.j41(128,"ion-row")(129,"ion-col")(130,"ion-checkbox",33),o.bIt("change",function(){return o.eBV(r),o.Njj(t.confirmacionProductoAgregado=!t.confirmacionProductoAgregado)}),o.mxI("ngModelChange",function(l){return o.eBV(r),o.DH7(t.confirmacionProductoAgregado,l)||(t.confirmacionProductoAgregado=l),o.Njj(l)}),o.EFF(131,"Acepto los T\xe9rminos y Condiciones y la "),o.j41(132,"a",34),o.EFF(133,"Pol\xedtica de Privacidad"),o.k0s()()()()()()(),o.j41(134,"ion-footer")(135,"ion-toolbar")(136,"div",35),o.DNE(137,No,3,1,"div",36)(138,Bo,3,1,"div",36)(139,So,3,1,"div",36)(140,Go,3,1,"div",36)(141,xo,3,1,"div",37),o.k0s()()()}if(2&e){let r,a,l,u,p,g,f,P,D,I,R,M,T,$,A,y,V,N,B;const to=o.sdS(24);o.R7$(3),o.SpI("Agregar producto - ",t.pasoActual,""),o.R7$(4),o.Y8G("fullscreen",!1),o.R7$(2),o.Y8G("formGroup",t.formulario),o.R7$(),o.Y8G("ngClass",o.l_i(58,U,1==t.estatusDatosbasicos,0==t.estatusDatosbasicos)),o.R7$(3),o.AVh("invalid",(null==(r=t.getControl("nombre"))?null:r.invalid)&&(null==(r=t.getControl("nombre"))?null:r.touched)),o.R7$(),o.Y8G("ngIf",(null==(a=t.getControl("nombre"))?null:a.invalid)&&(null==(a=t.getControl("nombre"))?null:a.touched)),o.R7$(5),o.Y8G("matDatepicker",to),o.R7$(3),o.Y8G("for",to),o.R7$(3),o.Y8G("ngIf",(null==(l=t.getControl("fechaVencimiento"))?null:l.invalid)&&(null==(l=t.getControl("fechaVencimiento"))?null:l.touched)),o.R7$(3),o.AVh("invalid",(null==(u=t.getControl("descripcion"))?null:u.invalid)&&(null==(u=t.getControl("descripcion"))?null:u.touched)),o.R7$(),o.Y8G("ngIf",(null==(p=t.getControl("descripcion"))?null:p.invalid)&&(null==(p=t.getControl("descripcion"))?null:p.touched)),o.R7$(2),o.Y8G("ngIf",t.mostrarEmpresas),o.R7$(),o.Y8G("ngClass",o.l_i(61,U,1==t.estatusDatosComisiones,0==t.estatusDatosComisiones)),o.R7$(5),o.SpI(" ",t.nombreProductoAgregando," "),o.R7$(2),o.AVh("invalid",(null==(g=t.getControl("tipoComision"))?null:g.invalid)&&(null==(g=t.getControl("tipoComision"))?null:g.touched)),o.Y8G("interfaceOptions",o.lJ4(64,fo)),o.R7$(),o.Y8G("ngForOf",t.tiposComision),o.R7$(),o.Y8G("ngIf",(null==(f=t.getControl("tipoComision"))?null:f.invalid)&&(null==(f=t.getControl("tipoComision"))?null:f.touched)),o.R7$(3),o.AVh("invalid",(null==(P=t.getControl("nivel_1"))?null:P.invalid)&&(null==(P=t.getControl("nivel_1"))?null:P.touched)),o.R7$(),o.Y8G("ngIf",(null==(D=t.getControl("nivel_1"))?null:D.invalid)&&(null==(D=t.getControl("nivel_1"))?null:D.touched)),o.R7$(3),o.AVh("invalid",(null==(I=t.getControl("nivel_2"))?null:I.invalid)&&(null==(I=t.getControl("nivel_2"))?null:I.touched)),o.R7$(),o.Y8G("ngIf",(null==(R=t.getControl("nivel_2"))?null:R.invalid)&&(null==(R=t.getControl("nivel_2"))?null:R.touched)),o.R7$(3),o.AVh("invalid",(null==(M=t.getControl("nivel_3"))?null:M.invalid)&&(null==(M=t.getControl("nivel_3"))?null:M.touched)),o.R7$(),o.Y8G("ngIf",(null==(T=t.getControl("nivel_3"))?null:T.invalid)&&(null==(T=t.getControl("nivel_3"))?null:T.touched)),o.R7$(3),o.AVh("invalid",(null==($=t.getControl("nivel_4"))?null:$.invalid)&&(null==($=t.getControl("nivel_4"))?null:$.touched)),o.R7$(),o.Y8G("ngIf",(null==(A=t.getControl("nivel_4"))?null:A.invalid)&&(null==(A=t.getControl("nivel_4"))?null:A.touched)),o.R7$(3),o.AVh("invalid",(null==(y=t.getControl("nivel_base"))?null:y.invalid)&&(null==(y=t.getControl("nivel_invitacion"))?null:y.touched)),o.R7$(),o.Y8G("ngIf",(null==(V=t.getControl("nivel_invitacion"))?null:V.invalid)&&(null==(V=t.getControl("nivel_invitacion"))?null:V.touched)),o.R7$(3),o.AVh("invalid",(null==(N=t.getControl("nivel_master"))?null:N.invalid)&&(null==(N=t.getControl("nivel_master"))?null:N.touched)),o.R7$(),o.Y8G("ngIf",(null==(B=t.getControl("nivel_master"))?null:B.invalid)&&(null==(B=t.getControl("nivel_master"))?null:B.touched)),o.R7$(),o.Y8G("ngClass",o.l_i(65,U,1==t.estatusDatosValidacion,0==t.estatusDatosValidacion)),o.R7$(5),o.SpI(" ",t.nombreProductoAgregando,""),o.R7$(3),o.SpI(" ",t.descripcionProductoAgregando,""),o.R7$(5),o.SpI(" ",t.fechaVigenciaTextoAgregando,""),o.R7$(14),o.JRh(t.nivel1ProductoAgregando),o.R7$(5),o.JRh(t.nivel2ProductoAgregando),o.R7$(5),o.JRh(t.nivel3ProductoAgregando),o.R7$(5),o.JRh(t.nivel4ProductoAgregando),o.R7$(5),o.JRh(t.nivelInvitacionProductoAgregando),o.R7$(5),o.JRh(t.nivelMasterProductoAgregando),o.R7$(5),o.JRh(t.comisionTotalProductoAgregando),o.R7$(3),o.Y8G("ngIf",0==t.tipoComisionAgregando),o.R7$(),o.Y8G("ngIf",1==t.tipoComisionAgregando),o.R7$(3),o.R50("ngModel",t.confirmacionProductoAgregado),o.R7$(7),o.Y8G("ngIf",1==t.estatusDatosbasicos),o.R7$(),o.Y8G("ngIf",1==t.estatusDatosComisiones),o.R7$(),o.Y8G("ngIf",1==t.estatusDatosComisiones),o.R7$(),o.Y8G("ngIf",1==t.estatusDatosValidacion),o.R7$(),o.Y8G("ngIf",1==t.estatusDatosValidacion)}},dependencies:[c.bv,c.Jm,c.QW,c.eY,c.hU,c.W9,c.M0,c.lO,c.eU,c.iq,c.$w,c.ln,c.Nm,c.Ip,c.IO,c.BC,c.ai,c.hB,c.su,c.Je,c.Gw,c.T6,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,v.MD,v.YU,v.Sq,v.bT,mo.M,k.j,k.M,k.c,k.g,W.fS,W.fg,j.X6,j.Vh,j.bZ,j.bU,m.YN,m.vS],styles:[".visible[_ngcontent-%COMP%]{display:block}.invisible[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),s})();var Yo=d(6897),Xo=d(2101),oo=d(2490);const Oo=()=>[20,50,100];function wo(n,s){if(1&n){const i=o.RV6();o.j41(0,"ion-col",11)(1,"ion-item",12)(2,"ion-label",13),o.EFF(3,"Filtro por grupo"),o.k0s(),o.j41(4,"ionic-selectable",32),o.bIt("onChange",function(t){o.eBV(i);const r=o.XpG();return o.Njj(r.onGrupoSelect(t))})("onClear",function(t){o.eBV(i);const r=o.XpG();return o.Njj(r.onGrupoClear(t))}),o.k0s()()()}if(2&n){const i=o.XpG();o.R7$(4),o.Y8G("items",i.grupos)("canSearch",!0)("canClear",!0)}}function zo(n,s){if(1&n){const i=o.RV6();o.j41(0,"ion-col",11)(1,"ion-item",12)(2,"ion-label",13),o.EFF(3,"Filtro por empresa"),o.k0s(),o.j41(4,"ionic-selectable",33),o.bIt("onChange",function(t){o.eBV(i);const r=o.XpG();return o.Njj(r.onEmpresaSelect(t))})("onClear",function(t){o.eBV(i);const r=o.XpG();return o.Njj(r.onEmpresaClear(t))}),o.k0s()()()}if(2&n){const i=o.XpG();o.R7$(4),o.Y8G("items",i.empresas)("canSearch",!0)("canClear",!0)}}function Jo(n,s){1&n&&(o.j41(0,"th",34),o.EFF(1," Nombre/Descripci\xf3n "),o.k0s())}function Ho(n,s){if(1&n&&(o.j41(0,"td",35),o.EFF(1),o.k0s()),2&n){const i=s.$implicit;o.R7$(),o.SpI(" ",i.nombre," ")}}function Qo(n,s){1&n&&(o.j41(0,"th",34),o.EFF(1," Empresa "),o.k0s())}function Lo(n,s){if(1&n&&(o.j41(0,"td",35),o.EFF(1),o.k0s()),2&n){const i=s.$implicit;o.R7$(),o.SpI(" ",i.empresaRazonSocial," ")}}function qo(n,s){1&n&&(o.j41(0,"th",36),o.EFF(1," Comisi\xf3n "),o.k0s())}function Wo(n,s){if(1&n&&(o.j41(0,"td",37),o.EFF(1),o.k0s()),2&n){const i=s.$implicit;o.R7$(),o.SpI(" ",i.comision," ")}}function Zo(n,s){1&n&&(o.j41(0,"th",36),o.EFF(1," Caducidad "),o.k0s())}function Ko(n,s){if(1&n&&(o.j41(0,"td",37),o.EFF(1),o.j41(2,"div")(3,"small",38),o.EFF(4),o.k0s()()()),2&n){const i=s.$implicit,e=o.XpG();o.R7$(),o.SpI(" ",e.formatFecha(i.fechaCaducidad)," "),o.R7$(2),o.Y8G("ngClass",e.getVigencia(i.fechaCaducidad)?"text-success":"text-danger"),o.R7$(),o.SpI(" ",e.getVigencia(i.fechaCaducidad)?"Vigente":"No vigente"," ")}}function ot(n,s){1&n&&o.nrm(0,"tr",39)}function tt(n,s){if(1&n){const i=o.RV6();o.j41(0,"tr",40),o.bIt("dblclick",function(){const t=o.eBV(i).$implicit,r=o.XpG();return o.Njj(r.visualizarModal(t.id))}),o.k0s()}}function et(n,s){if(1&n&&(o.j41(0,"tr",41)(1,"td",42),o.EFF(2," No se encontraron registros disponibles. "),o.k0s()()),2&n){const i=o.XpG();o.R7$(),o.BMQ("colspan",i.displayedColumns.length)}}const nt=[{path:"",component:(()=>{var n;class s{constructor(e,t,r,a,l,u,p){this.productoService=e,this.loadingCtrl=t,this.empresasService=r,this.grupoService=a,this.usuarioService=l,this.modalCtrl=u,this.route=p,this.dataSourceTable=new h.I6,this.displayedColumns=[],this.allColumns=["Nombre","Comision","FechaCaducidad"],this.inputBuscar=new O.B,this.query="",this.empresaID=0,this.userid=0,this.inputBusquedaText="Buscar por nombre de producto",this.RolesEnum=_.$u,this.grupos=[],this.empresas=[],this.filterEmpresID=0,this.filterGrupoID=0,this.filterVigencia=0,this.vigencia=[{nombre:"Vigentes",valor:1},{nombre:"No vigentes",valor:2}],this.destroy$=new O.B}ngAfterViewInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){var e=this;return(0,b.A)(function*(){var t;let a=e.route.snapshot.data.resolverData.usuario;if(e.rolUsuario=null===(t=a.roles)||void 0===t?void 0:t.enumValue,e.userid=a.id,e.displayedColumns=[...e.allColumns],e.rolUsuario===_.$u.Admin){const p=e.displayedColumns.indexOf("Nombre");-1!==p&&e.displayedColumns.splice(p+1,0,"Empresa"),e.inputBusquedaText="Buscar por nombre de producto, empresa o grupo"}const l=yield e.loadingCtrl.create({message:"Cargando datos..."});yield l.present();try{if(e.rolUsuario==_.$u.Socio){const u=yield(0,C._)(e.usuarioService.getEmpresaByUsuario(e.userid));e.empresaID=u.data.id}else{const u=yield(0,C._)(e.empresasService.getAllEmpresas());e.empresas=(null==u?void 0:u.data)||[];const p=yield(0,C._)(e.grupoService.getAllGrupos());e.grupos=(null==p?void 0:p.data)||[]}e.dataSourceTable.paginator=e.paginator,e.loadtable()}catch(u){console.error("Error al cargar datos",u)}finally{l.dismiss()}e.inputBuscar.pipe((0,eo.B)(1e3),(0,no.F)(),(0,io.Q)(e.destroy$)).subscribe(u=>{e.query=u.toString(),e.loadtable()})})()}loadtable(){switch(this.rolUsuario){case _.$u.Admin:this.loadtableAll();break;case _.$u.Socio:this.loadtableByEmpresa()}}loadtableAll(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,w.h)(this.sort.sortChange,this.paginator.page).pipe((0,z.Z)({}),(0,J.n)(()=>this.productoService.getProductoAllPaginated({page:this.paginator.pageIndex,size:this.paginator.pageSize,sortBy:this.sort.active,sortDir:this.sort.direction,searchQuery:this.query,grupoID:this.filterGrupoID,empresaID:this.filterEmpresID,vigenciaFilter:this.filterVigencia}).pipe((0,H.W)(()=>(0,Q.of)(null)))),(0,L.T)(e=>null===e?[]:(this.total=e.data.total,e.data.items))).subscribe(e=>{this.dataSourceTable=new h.I6(e)})}loadtableByEmpresa(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,w.h)(this.sort.sortChange,this.paginator.page).pipe((0,z.Z)({}),(0,J.n)(()=>this.productoService.getProductoByEmpresaPaginated({id:this.empresaID,page:this.paginator.pageIndex,size:this.paginator.pageSize,sortBy:this.sort.active,sortDir:this.sort.direction,searchQuery:this.query,vigenciaFilter:this.filterVigencia}).pipe((0,H.W)(()=>(0,Q.of)(null)))),(0,L.T)(e=>null===e?[]:(this.total=e.data.total,e.data.items))).subscribe(e=>{this.dataSourceTable=new h.I6(e)})}visualizarModal(e){var t=this;return(0,b.A)(function*(){const r=yield t.modalCtrl.create({component:ao,cssClass:"modal-empresa",componentProps:{productoId:e}});yield r.present();const{data:a}=yield r.onDidDismiss();a&&(console.log(a),t.loadtable())})()}addModal(){var e=this;return(0,b.A)(function*(){const t=yield e.modalCtrl.create({component:Uo,cssClass:"modal-empresa"});yield t.present();const{data:r}=yield t.onDidDismiss();r&&(console.log(r),e.loadtable())})()}onGrupoSelect(e){null!=e.value&&null!=e.value&&(this.filterGrupoID=e.value.id,this.loadtable())}onGrupoClear(e){this.filterGrupoID=0,this.loadtable()}onEmpresaSelect(e){null!=e.value&&null!=e.value&&(this.filterEmpresID=e.value.id,this.loadtable())}onEmpresaClear(e){this.filterEmpresID=0,this.loadtable()}onVigenciaSelect(e){null!=e.value&&(this.filterVigencia=e.value.valor,this.loadtable())}onVigenciaClear(e){this.filterVigencia=0,this.loadtable()}formatFecha(e){if(null==e)return"No aplica";const t=new Date(e),r=t.getDate().toString().padStart(2,"0");let a=t.toLocaleString("es-MX",{month:"long"});return a=a.charAt(0).toUpperCase()+a.slice(1),`${r} ${a} ${t.getFullYear()}`}getVigencia(e){if(null==e)return!0;const t=new Date;t.setHours(0,0,0,0);const r=new Date(e);return r.setHours(0,0,0,0),r>=t}}return(n=s).\u0275fac=function(e){return new(e||n)(o.rXU(G),o.rXU(c.Xi),o.rXU(Z.z),o.rXU(Yo.b),o.rXU(K.o),o.rXU(c.W3),o.rXU(Xo.nX))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-productos"]],viewQuery:function(e,t){if(1&e&&(o.GBs(S.iy,5),o.GBs(E.B4,5)),2&e){let r;o.mGM(r=o.lsd())&&(t.paginator=r.first),o.mGM(r=o.lsd())&&(t.sort=r.first)}},standalone:!1,decls:50,vars:14,consts:[[1,"pagesHeader"],["slot","start"],["name","archive","color","white"],[1,"pagesContent"],[1,"ion-align-items-center"],["size","12","size-md","9",1,"ion-text-center"],[1,"inputBusqueda",3,"ionInput","placeholder"],["slot","end","name","search","aria-hidden","true"],["size","12","size-md","2",1,"ion-text-center"],["expand","block",1,"customGreenButton",3,"click"],["name","add","color","white"],["size","12","size-md","4",1,"ion-text-center"],[1,"inputBusqueda"],["position","floating"],["item-content","","itemValueField","valor","closeButtonSlot","end","itemTextField","nombre","closeButtonText","Cancelar","clearButtonText","Limpiar",3,"onChange","onClear","items","canSearch","canClear"],["size","12","size-md","4","class","ion-text-center",4,"ngIf"],[1,"referidosHeader"],[1,"title"],[2,"overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Nombre"],["mat-header-cell","","style","padding-left: 1rem;","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","padding-left: 1rem;",4,"matCellDef"],["matColumnDef","Empresa"],["matColumnDef","Comision"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","FechaCaducidad"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","mydivoutermulti elemento-renglon row_clickable",3,"dblclick",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize"],["item-content","","itemValueField","id","closeButtonSlot","end","itemTextField","nombre","closeButtonText","Cancelar","clearButtonText","Limpiar",3,"onChange","onClear","items","canSearch","canClear"],["item-content","","itemValueField","id","closeButtonSlot","end","itemTextField","razonSocial","closeButtonText","Cancelar","clearButtonText","Limpiar",3,"onChange","onClear","items","canSearch","canClear"],["mat-header-cell","","mat-sort-header","",2,"padding-left","1rem"],["mat-cell","",2,"padding-left","1rem"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"ngClass"],["mat-header-row",""],["mat-row","",1,"mydivoutermulti","elemento-renglon","row_clickable",3,"dblclick"],[1,"mat-row"],[2,"text-align","center","padding","1rem"]],template:function(e,t){1&e&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title")(5,"h1"),o.nrm(6,"ion-icon",2),o.EFF(7," Productos a promocionar"),o.k0s()()()(),o.j41(8,"ion-content",3)(9,"div")(10,"ion-grid")(11,"ion-row",4)(12,"ion-col",5)(13,"ion-input",6),o.bIt("ionInput",function(a){return t.inputBuscar.next(a.detail.value||"")}),o.nrm(14,"ion-icon",7),o.k0s()(),o.j41(15,"ion-col",8)(16,"ion-button",9),o.bIt("click",function(){return t.addModal()}),o.nrm(17,"ion-icon",10),o.EFF(18," AGREGAR"),o.k0s()()(),o.j41(19,"ion-row",4)(20,"ion-col",11)(21,"ion-item",12)(22,"ion-label",13),o.EFF(23,"Filtro por vigencia"),o.k0s(),o.j41(24,"ionic-selectable",14),o.bIt("onChange",function(a){return t.onVigenciaSelect(a)})("onClear",function(a){return t.onVigenciaClear(a)}),o.k0s()()(),o.DNE(25,wo,5,3,"ion-col",15)(26,zo,5,3,"ion-col",15),o.k0s()()(),o.j41(27,"ion-card")(28,"ion-card-header",16)(29,"ion-card-title",17),o.EFF(30,"Productos"),o.k0s()(),o.j41(31,"ion-card-content")(32,"div",18)(33,"table",19),o.qex(34,20),o.DNE(35,Jo,2,0,"th",21)(36,Ho,2,1,"td",22),o.bVm(),o.qex(37,23),o.DNE(38,Qo,2,0,"th",21)(39,Lo,2,1,"td",22),o.bVm(),o.qex(40,24),o.DNE(41,qo,2,0,"th",25)(42,Wo,2,1,"td",26),o.bVm(),o.qex(43,27),o.DNE(44,Zo,2,0,"th",25)(45,Ko,5,3,"td",26),o.bVm(),o.DNE(46,ot,1,0,"tr",28)(47,tt,1,0,"tr",29)(48,et,3,1,"tr",30),o.k0s()(),o.nrm(49,"mat-paginator",31),o.k0s()()()),2&e&&(o.R7$(13),o.Y8G("placeholder",t.inputBusquedaText),o.R7$(11),o.Y8G("items",t.vigencia)("canSearch",!0)("canClear",!0),o.R7$(),o.Y8G("ngIf",t.rolUsuario==t.RolesEnum.Admin),o.R7$(),o.Y8G("ngIf",t.rolUsuario==t.RolesEnum.Admin),o.R7$(7),o.Y8G("dataSource",t.dataSourceTable),o.R7$(13),o.Y8G("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),o.R7$(),o.Y8G("matRowDefColumns",t.displayedColumns),o.R7$(2),o.Y8G("length",t.total)("pageSizeOptions",o.lJ4(13,Oo))("pageSize",50))},dependencies:[v.YU,v.bT,c.Jm,c.QW,c.b_,c.I9,c.ME,c.tN,c.hU,c.W9,c.lO,c.eU,c.iq,c.$w,c.uz,c.he,c.MC,c.ln,c.BC,c.ai,c.Gw,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,h.ky,S.iy,E.B4,E.aE,oo.ec],styles:[".text-success[_ngcontent-%COMP%]{color:green}.text-danger[_ngcontent-%COMP%]{color:red}"]}),s})()}];let it=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[X.iI.forChild(nt),X.iI]}),s})(),rt=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[v.MD,m.YN,c.bv,it,h.tP,S.Ou,E.NQ,oo.ec]}),s})()}}]);