"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8412],{8412:($,p,s)=>{s.r(p),s.d(p,{CorteMensualPageModule:()=>v});var c=s(2881),m=s(9417),i=s(3092),u=s(9870),F=s(467),e=s(1360),g=s(6862),b=s(4596);const f=["class","corteembajador"];function M(o,a){if(1&o&&(e.j41(0,"span")(1,"span",9),e.EFF(2),e.k0s(),e.j41(3,"small",10),e.EFF(4),e.k0s()()),2&o){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.tipoComision),e.R7$(2),e.JRh(t.detallePorcentaje)}}function h(o,a){if(1&o&&(e.j41(0,"span")(1,"strong"),e.EFF(2,"+ "),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.SpI("$",t.importeDirecto,"MXN ")}}function j(o,a){if(1&o&&(e.j41(0,"span")(1,"span",11)(2,"strong"),e.EFF(3,"+ "),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"span",12),e.EFF(6),e.k0s()()),2&o){const t=e.XpG().$implicit;e.R7$(4),e.SpI(" $",t.importeIndirecto,"MXN "),e.R7$(2),e.JRh(t.nivel)}}function C(o,a){if(1&o&&(e.j41(0,"tr",3)(1,"td",4),e.EFF(2),e.nrm(3,"br"),e.j41(4,"small"),e.EFF(5),e.k0s(),e.nrm(6,"br"),e.DNE(7,M,5,2,"span",7),e.k0s(),e.j41(8,"td",8),e.DNE(9,h,4,1,"span",7),e.k0s(),e.j41(10,"td",5),e.DNE(11,j,7,2,"span",7),e.k0s()()),2&o){const t=a.$implicit;e.R7$(2),e.SpI(" ",t.nombreReferido,""),e.R7$(3),e.Lme("",t.producto," | ",t.fechaEfectivaTexto,""),e.R7$(2),e.Y8G("ngIf","%"==t.tipoComision),e.R7$(2),e.Y8G("ngIf",t.importeDirecto>0),e.R7$(2),e.Y8G("ngIf",t.importeIndirecto>0)}}let E=(()=>{var o;class a{constructor(r,n){this.periodoService=r,this.utilerias=n,this.embajadorId=0,this.periodoId=0,this.fechaRegistroTexto=""}ngOnInit(){this.loadData()}loadData(){this.periodoService.getDetalleEmbajadorMes(this.embajadorId,this.periodoId).subscribe({next:r=>{this.detalleEmbajador=r,this.fechaRegistroTexto=this.utilerias.formatearFecha(new Date(this.detalleEmbajador.fechaRegistro)),r.referencias.forEach(n=>{n.fechaEfectivaTexto=this.utilerias.formatearFechaCorta(new Date(n.fechaEfectiva))})}})}}return(o=a).\u0275fac=function(r){return new(r||o)(e.rXU(g.Y),e.rXU(b.M))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-modal",8,"corteembajador"]],inputs:{embajadorId:"embajadorId",periodoId:"periodoId"},attrs:f,decls:28,vars:3,consts:[[2,"padding","8px"],[1,"scrollable-div"],[2,"width","100%"],[2,"border-bottom","1px solid #ccc"],[2,"text-align","start"],[2,"text-align","end"],["style","border-bottom: 1px solid #ccc;",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","end","font-family","'Courier New', Courier, monospace"],[1,"badge_tipoComision"],[2,"color","#aaa"],[2,"font-family","'Courier New', Courier, monospace"],[1,"badge_nivel"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"ion-grid")(2,"ion-row")(3,"ion-col")(4,"strong"),e.EFF(5,"Embajador: "),e.k0s(),e.EFF(6),e.nrm(7,"br"),e.j41(8,"small")(9,"strong"),e.EFF(10,"Fecha de registro: "),e.k0s(),e.EFF(11),e.nrm(12,"br"),e.k0s()()()(),e.j41(13,"div",1)(14,"ion-grid")(15,"ion-row")(16,"ion-col")(17,"table",2)(18,"thead")(19,"tr",3)(20,"th",4),e.EFF(21,"Referencia"),e.k0s(),e.j41(22,"th",5),e.EFF(23,"Importe Directo"),e.k0s(),e.j41(24,"th",5),e.EFF(25,"Importe Indirecto"),e.k0s()()(),e.j41(26,"tbody"),e.DNE(27,C,12,6,"tr",6),e.k0s()()()()()()()),2&r&&(e.R7$(6),e.SpI(" ",null==n.detalleEmbajador?null:n.detalleEmbajador.nombreEmbajador,""),e.R7$(5),e.SpI(" ",n.fechaRegistroTexto,""),e.R7$(16),e.Y8G("ngForOf",null==n.detalleEmbajador?null:n.detalleEmbajador.referencias))},dependencies:[i.bv,i.hU,i.lO,i.ln,c.MD,c.Sq,c.bT],styles:[".scrollable-div[_ngcontent-%COMP%]{height:300px;overflow-y:auto;border:1px solid #bbb;padding:4px}.badge_nivel[_ngcontent-%COMP%]{margin-left:2px;color:#bbb;font-size:10px;font-weight:700;border-radius:4px;background-color:#444;padding-left:4px;padding-right:4px}.badge_tipoComision[_ngcontent-%COMP%]{margin-right:2px;color:#fff;font-size:10px;font-weight:700;border-radius:4px;background-color:#39595e;padding-left:4px;padding-right:4px}"]}),a})();function R(o,a){if(1&o&&(e.j41(0,"ion-select-option",8),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.Lme("",t.mesLetra," ",t.anio,"")}}function I(o,a){if(1&o){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-grid",15),e.bIt("click",function(){const n=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.mostrarDetalleEmbajadorMes(n.id))}),e.j41(2,"ion-row")(3,"ion-col",4),e.EFF(4),e.k0s(),e.j41(5,"ion-col",13),e.EFF(6),e.nI1(7,"number"),e.k0s(),e.j41(8,"ion-col",13),e.EFF(9),e.nI1(10,"number"),e.k0s(),e.j41(11,"ion-col",13),e.EFF(12),e.nI1(13,"number"),e.k0s(),e.j41(14,"ion-col",13),e.EFF(15),e.nI1(16,"number"),e.k0s()()()()}if(2&o){const t=a.$implicit;e.R7$(4),e.JRh(t.nombre),e.R7$(2),e.JRh(e.i5U(7,5,t.referenciasDirectas,"1.0")),e.R7$(3),e.SpI("$",e.i5U(10,8,t.importeDirecto,"1.2")," MXN"),e.R7$(3),e.JRh(e.i5U(13,11,t.referenciasIndirectas,"1.0")),e.R7$(3),e.SpI("$",e.i5U(16,14,t.importeIndirecto,"1.2")," MXN")}}const k=[{path:"",component:(()=>{var o;class a{constructor(r,n){this.periodoService=r,this.modalCtrl=n,this.periodos=[],this.periodoSeleccionado=void 0,this.tipoCorteMensual=1}ngOnInit(){this.periodoSeleccionado=void 0,this.periodoService.getPeriodos().subscribe({next:r=>{console.log(r),this.periodos=r,this.periodos.forEach(n=>{null==this.periodoSeleccionado&&new Date(n.fechaFin)<new Date&&(this.periodoSeleccionado=n,this.getCorteMensual())})}})}getCorteMensual(){var r;this.periodoService.getCorteMensual(null===(r=this.periodoSeleccionado)||void 0===r?void 0:r.id).subscribe({next:n=>{console.log(n),this.corteMensual=n}})}mostrarDetalleEmbajadorMes(r){var n=this;return(0,F.A)(function*(){var l;n.detalleEmbajadorSeleccionado=void 0,yield(yield n.modalCtrl.create({component:E,cssClass:"modal-corte-mensual",componentProps:{embajadorId:r,periodoId:null===(l=n.periodoSeleccionado)||void 0===l?void 0:l.id}})).present()})()}}return(o=a).\u0275fac=function(r){return new(r||o)(e.rXU(g.Y),e.rXU(i.W3))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-corte-mensual"]],standalone:!1,decls:75,vars:16,consts:[[1,"pagesHeader"],["slot","start"],["name","calendar","color","white"],[3,"fullscreen"],["size","4"],["label","Periodo","label-placement","stacked",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label","Tipo de corte","label-placement","stacked",3,"ngModelChange","ngModel"],[3,"value"],["size","4",2,"text-align","end"],[3,"click"],["size","4",2,"text-align","center"],[2,"padding","4px","border-radius","6px","border","1px solid #666"],["size","2",2,"text-align","end"],[4,"ngFor","ngForOf"],[1,"row_clickable",3,"click"]],template:function(r,n){1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title")(5,"h1"),e.nrm(6,"ion-icon",2),e.EFF(7," Corte mensual"),e.k0s()()()(),e.j41(8,"ion-content",3)(9,"ion-grid")(10,"ion-row")(11,"ion-col",4)(12,"ion-select",5),e.mxI("ngModelChange",function(d){return e.DH7(n.periodoSeleccionado,d)||(n.periodoSeleccionado=d),d}),e.DNE(13,R,2,3,"ion-select-option",6),e.k0s()(),e.j41(14,"ion-col",4)(15,"ion-select",7),e.mxI("ngModelChange",function(d){return e.DH7(n.tipoCorteMensual,d)||(n.tipoCorteMensual=d),d}),e.j41(16,"ion-select-option",8),e.EFF(17,"Embajadores"),e.k0s(),e.j41(18,"ion-select-option",8),e.EFF(19,"Empresas"),e.k0s()()(),e.j41(20,"ion-col",9)(21,"ion-button",10),e.bIt("click",function(){return n.getCorteMensual()}),e.EFF(22,"Calcular"),e.k0s()()(),e.j41(23,"ion-row")(24,"ion-col",11)(25,"div",12)(26,"span"),e.EFF(27,"Embajadores / Mes"),e.k0s(),e.nrm(28,"br"),e.j41(29,"strong"),e.EFF(30),e.k0s()()(),e.j41(31,"ion-col",11)(32,"div",12)(33,"span"),e.EFF(34,"Importe Total Mes"),e.k0s(),e.nrm(35,"br"),e.j41(36,"strong"),e.EFF(37),e.nI1(38,"number"),e.k0s()()(),e.j41(39,"ion-col",11)(40,"div",12)(41,"span"),e.EFF(42,"Importe acumulado Embassy"),e.k0s(),e.nrm(43,"br"),e.j41(44,"strong"),e.EFF(45),e.nI1(46,"number"),e.k0s()()()()(),e.j41(47,"ion-card")(48,"ion-item")(49,"ion-grid")(50,"ion-row")(51,"ion-col",4)(52,"strong"),e.EFF(53,"Embajador"),e.k0s()(),e.j41(54,"ion-col",13)(55,"strong"),e.EFF(56,"Referencias"),e.nrm(57,"br"),e.EFF(58,"Directas"),e.k0s()(),e.j41(59,"ion-col",13)(60,"strong"),e.EFF(61,"Ganancias"),e.nrm(62,"br"),e.EFF(63,"Directas"),e.k0s()(),e.j41(64,"ion-col",13)(65,"strong"),e.EFF(66,"Referencias"),e.nrm(67,"br"),e.EFF(68,"Indirectas"),e.k0s()(),e.j41(69,"ion-col",13)(70,"strong"),e.EFF(71,"Ganancias"),e.nrm(72,"br"),e.EFF(73,"Indirectas"),e.k0s()()()()(),e.DNE(74,I,17,17,"ion-item",14),e.k0s()()),2&r&&(e.R7$(8),e.Y8G("fullscreen",!0),e.R7$(4),e.R50("ngModel",n.periodoSeleccionado),e.R7$(),e.Y8G("ngForOf",n.periodos),e.R7$(2),e.R50("ngModel",n.tipoCorteMensual),e.R7$(),e.Y8G("value",1),e.R7$(2),e.Y8G("value",2),e.R7$(12),e.JRh(null==n.corteMensual?null:n.corteMensual.embajadoresMes),e.R7$(7),e.SpI("$",e.i5U(38,10,null==n.corteMensual?null:n.corteMensual.importeTotal,"1.2")," MXN"),e.R7$(8),e.SpI("$",e.i5U(46,13,null==n.corteMensual?null:n.corteMensual.importeEmbassy,"1.2")," MXN"),e.R7$(29),e.Y8G("ngForOf",null==n.corteMensual?null:n.corteMensual.embajadores))},dependencies:[c.Sq,m.BC,m.vS,i.Jm,i.QW,i.b_,i.hU,i.W9,i.lO,i.eU,i.iq,i.uz,i.MC,i.ln,i.Nm,i.Ip,i.BC,i.ai,i.Je,c.QX],encapsulation:2}),a})()}];let _=(()=>{var o;class a{}return(o=a).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.iI.forChild(k),u.iI]}),a})(),v=(()=>{var o;class a{}return(o=a).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.MD,m.YN,i.bv,_]}),a})()}}]);