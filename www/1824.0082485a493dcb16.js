"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1824],{1824:(ot,V,u)=>{u.r(V),u.d(V,{ProductosPageModule:()=>Ko});var v=u(2881),p=u(9417),s=u(3092),G=u(9870),x=u(467),M=u(7550),E=u(2042),h=u(3662),A=u(1413),F=u(4843),Q=u(152),H=u(3294),q=u(6977),y=u(7786),N=u(9172),B=u(5558),S=u(9437),X=u(7673),Y=u(6354),C=u(6231),o=u(1360),U=u(7643),L=u(5312);let T=(()=>{var e;class a{constructor(t){this.http=t,this.apiUrl=L.c.apiUrl+"api/Producto"}getProductoById(t){return this.http.get(`${this.apiUrl}/getProductoById?productoId=`+t)}getAllProductosEmpresa(t){let n=(new U.Nl).set("empresaID",t);return this.http.get(`${this.apiUrl}/GetProductosEmpresa`,{params:n})}getProductoAllPaginated(t){let n={page:t.page.toString(),size:t.size.toString(),sortBy:t.sortBy,sortDir:t.sortDir,searchQuery:t.searchQuery,grupoID:t.grupoID,empresaID:t.empresaID,vigenciaFilter:t.vigenciaFilter.toString()};return this.http.get(`${this.apiUrl}/GetAllProductoPaginated`,{params:n})}getProductoByEmpresaPaginated(t){let n={empresaID:t.id.toString(),page:t.page.toString(),size:t.size.toString(),sortBy:t.sortBy,sortDir:t.sortDir,searchQuery:t.searchQuery,vigenciaFilter:t.vigenciaFilter.toString()};return this.http.get(`${this.apiUrl}/GetProductoByEmpresaPaginated`,{params:n})}save(t){return this.http.post(`${this.apiUrl}/Save`,t)}}return(e=a).\u0275fac=function(t){return new(t||e)(o.KVO(U.Qq))},e.\u0275prov=o.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),a})();function W(e,a){if(1&e&&(o.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2"),o.EFF(4),o.k0s(),o.j41(5,"p",4),o.EFF(6),o.k0s(),o.j41(7,"div",5)(8,"p")(9,"strong"),o.EFF(10,"Fecha de creaci\xf3n:"),o.k0s(),o.EFF(11),o.k0s(),o.j41(12,"p")(13,"strong"),o.EFF(14,"Vigencia:"),o.k0s(),o.EFF(15),o.k0s()()(),o.j41(16,"div",6)(17,"h2"),o.EFF(18,"Comisiones"),o.k0s(),o.j41(19,"table",7)(20,"tbody")(21,"tr")(22,"td")(23,"strong"),o.EFF(24,"Nivel 1"),o.k0s()(),o.j41(25,"td",8),o.EFF(26),o.nI1(27,"number"),o.k0s()(),o.j41(28,"tr")(29,"td")(30,"strong"),o.EFF(31,"Nivel 2"),o.k0s()(),o.j41(32,"td",8),o.EFF(33),o.nI1(34,"number"),o.k0s()(),o.j41(35,"tr")(36,"td")(37,"strong"),o.EFF(38,"Nivel 3"),o.k0s()(),o.j41(39,"td",8),o.EFF(40),o.nI1(41,"number"),o.k0s()(),o.j41(42,"tr")(43,"td")(44,"strong"),o.EFF(45,"Nivel 4"),o.k0s()(),o.j41(46,"td",8),o.EFF(47),o.nI1(48,"number"),o.k0s()(),o.j41(49,"tr")(50,"td")(51,"strong"),o.EFF(52,"Invitaci\xf3n"),o.k0s()(),o.j41(53,"td",8),o.EFF(54),o.nI1(55,"number"),o.k0s()(),o.j41(56,"tr")(57,"td")(58,"strong"),o.EFF(59,"Master"),o.k0s()(),o.j41(60,"td",8),o.EFF(61),o.nI1(62,"number"),o.k0s()(),o.j41(63,"tr",9)(64,"td")(65,"strong"),o.EFF(66,"Total"),o.k0s()(),o.j41(67,"td",8),o.EFF(68),o.nI1(69,"number"),o.k0s()()()()()()()),2&e){const i=o.XpG();o.R7$(4),o.JRh(i.producto.nombre),o.R7$(2),o.JRh(i.producto.descripcion),o.R7$(5),o.SpI(" ",i.producto.creacionLetra,""),o.R7$(4),o.SpI(" ",i.producto.vigenciaLetra,""),o.R7$(11),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(27,25,i.producto.nivel1,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(34,28,i.producto.nivel2,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(41,31,i.producto.nivel3,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(48,34,i.producto.nivel4,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(55,37,i.producto.nivelInvitacion,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(62,40,i.producto.nivelMaster,"1.2-2"),"",1===i.producto.tipoComision?"%":""," "),o.R7$(7),o.E5c(" ",1===i.producto.tipoComision?"":"$","",o.i5U(69,43,i.producto.totalComision,"1.2-2"),"",1===i.producto.tipoComision?"%":""," ")}}let Z=(()=>{var e;class a{constructor(t){this.productoService=t,this.productoId=0}ngOnInit(){this.loadData()}loadData(){this.productoService.getProductoById(this.productoId).subscribe({next:t=>{this.producto=t},error:t=>{},complete:()=>{}})}}return(e=a).\u0275fac=function(t){return new(t||e)(o.rXU(T))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-modal-editar-producto"]],inputs:{productoId:"productoId"},decls:1,vars:1,consts:[["class","producto-modal-content",4,"ngIf"],[1,"producto-modal-content"],[1,"modal-body"],[1,"modal-info"],[1,"modal-descripcion"],[1,"modal-fechas"],[1,"modal-comisiones"],[1,"comisiones-table"],[1,"monto"],[1,"comision-total"]],template:function(t,n){1&t&&o.DNE(0,W,70,46,"div",0),2&t&&o.Y8G("ngIf",n.producto)},dependencies:[v.MD,v.bT,v.QX],styles:[".producto-modal-content[_ngcontent-%COMP%]{padding:24px;background-color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333;max-height:85vh;overflow-y:auto}.modal-titulo[_ngcontent-%COMP%]{font-size:26px;margin-bottom:24px;color:#2c3e50;border-bottom:1px solid #ddd;padding-bottom:6px}.modal-body[_ngcontent-%COMP%]{display:flex;gap:40px;flex-wrap:wrap}.modal-info[_ngcontent-%COMP%]{flex:1;min-width:250px}.modal-descripcion[_ngcontent-%COMP%]{font-size:15px;line-height:1.6;margin-bottom:16px}.modal-fechas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:4px 0}.modal-comisiones[_ngcontent-%COMP%]{margin-top:20px}.modal-comisiones[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin-bottom:12px;color:#1e8449}.comisiones-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:16px}.comisiones-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;border-bottom:1px solid #ddd}.comisiones-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left}.comisiones-table[_ngcontent-%COMP%]   .monto[_ngcontent-%COMP%]{text-align:right;font-weight:500}.comisiones-table[_ngcontent-%COMP%]   .comision-total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:2px solid #444;font-weight:700}@media (max-width: 768px){.modal-body[_ngcontent-%COMP%]{flex-direction:column}}"]}),a})();var K=u(980),P=function(e){return e[e.CantidadFija=0]="CantidadFija",e[e.Porcentaje=1]="Porcentaje",e}(P||{});const oo={CantidadFija:"Cantidad",Porcentaje:"Porcentaje"};var eo=u(6704),O=u(3746),j=u(3069),no=u(3),$=u(6152),io=u(5460),w=u(8311),z=u(7248),ro=u(4596),k=u(365);const ao=["class","producto form"],lo=()=>({header:"Selecciona empresa"}),so=()=>({header:"Tipo de comision"});function co(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function uo(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function mo(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function po(e,a){if(1&e&&(o.j41(0,"ion-select-option",24),o.EFF(1),o.k0s()),2&e){const i=a.$implicit;o.Y8G("value",i.id),o.R7$(),o.Lme(" ",i.rfc," - ",i.razonSocial," ")}}function go(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function _o(e,a){if(1&e){const i=o.RV6();o.j41(0,"ion-row")(1,"ion-col",19)(2,"ion-select",22),o.bIt("ionBlur",function(){let n;o.eBV(i);const r=o.XpG(2);return o.Njj(null==(n=r.getControl("empresa"))?null:n.markAsTouched())}),o.DNE(3,po,2,3,"ion-select-option",23),o.k0s(),o.DNE(4,go,2,0,"ion-text",13),o.k0s()()}if(2&e){let i,t;const n=o.XpG(2);o.R7$(2),o.AVh("invalid",(null==(i=n.getControl("empresa"))?null:i.invalid)&&(null==(i=n.getControl("empresa"))?null:i.touched)),o.Y8G("interfaceOptions",o.lJ4(5,lo)),o.R7$(),o.Y8G("ngForOf",n.empresas),o.R7$(),o.Y8G("ngIf",(null==(t=n.getControl("empresa"))?null:t.invalid)&&(null==(t=n.getControl("empresa"))?null:t.touched))}}function ho(e,a){if(1&e){const i=o.RV6();o.qex(0),o.j41(1,"ion-row")(2,"ion-col",11)(3,"ion-input",12),o.bIt("ionBlur",function(){let n;o.eBV(i);const r=o.XpG();return o.Njj(null==(n=r.getControl("nombre"))?null:n.markAsTouched())}),o.k0s(),o.DNE(4,co,2,0,"ion-text",13),o.k0s(),o.j41(5,"ion-col",14)(6,"mat-form-field",15)(7,"mat-label"),o.EFF(8,"Fecha de vencimiento"),o.k0s(),o.nrm(9,"input",16),o.j41(10,"mat-hint"),o.EFF(11,"DD/MM/YYYY"),o.k0s(),o.nrm(12,"mat-datepicker-toggle",17)(13,"mat-datepicker",18,0),o.k0s(),o.DNE(15,uo,2,0,"ion-text",13),o.k0s()(),o.j41(16,"ion-row")(17,"ion-col",19),o.nrm(18,"ion-input",20),o.DNE(19,mo,2,0,"ion-text",13),o.k0s()(),o.DNE(20,_o,5,6,"ion-row",8),o.bVm()}if(2&e){let i,t,n,r,l;const d=o.sdS(14),c=o.XpG();o.R7$(3),o.AVh("invalid",(null==(i=c.getControl("nombre"))?null:i.invalid)&&(null==(i=c.getControl("nombre"))?null:i.touched)),o.R7$(),o.Y8G("ngIf",(null==(t=c.getControl("nombre"))?null:t.invalid)&&(null==(t=c.getControl("nombre"))?null:t.touched)),o.R7$(5),o.Y8G("matDatepicker",d),o.R7$(3),o.Y8G("for",d),o.R7$(3),o.Y8G("ngIf",(null==(n=c.getControl("fechaVencimiento"))?null:n.invalid)&&(null==(n=c.getControl("fechaVencimiento"))?null:n.touched)),o.R7$(3),o.AVh("invalid",(null==(r=c.getControl("descripcion"))?null:r.invalid)&&(null==(r=c.getControl("descripcion"))?null:r.touched)),o.R7$(),o.Y8G("ngIf",(null==(l=c.getControl("descripcion"))?null:l.invalid)&&(null==(l=c.getControl("descripcion"))?null:l.touched)),o.R7$(),o.Y8G("ngIf",c.mostrarEmpresas)}}function vo(e,a){if(1&e&&(o.j41(0,"ion-select-option",24),o.EFF(1),o.k0s()),2&e){const i=a.$implicit;o.Y8G("value",i.valor),o.R7$(),o.SpI(" ",i.nombre," ")}}function fo(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function Co(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function Fo(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function Po(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function bo(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function xo(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function Eo(e,a){1&e&&(o.j41(0,"ion-text",21),o.EFF(1," Campo requerido "),o.k0s())}function jo(e,a){if(1&e){const i=o.RV6();o.qex(0),o.j41(1,"ion-row")(2,"ion-col",25)(3,"strong"),o.EFF(4,"Producto:"),o.k0s(),o.EFF(5),o.k0s(),o.j41(6,"ion-col",25)(7,"ion-select",26),o.bIt("ionChange",function(n){o.eBV(i);const r=o.XpG();return o.Njj(r.onTipoComisionChange(n))})("ionBlur",function(){let n;o.eBV(i);const r=o.XpG();return o.Njj(null==(n=r.getControl("tipoComision"))?null:n.markAsTouched())}),o.DNE(8,vo,2,2,"ion-select-option",23),o.k0s(),o.DNE(9,fo,2,0,"ion-text",13),o.k0s()(),o.j41(10,"ion-row",27)(11,"ion-col",28)(12,"ion-input",29),o.bIt("ionBlur",function(){let n;o.eBV(i);const r=o.XpG();return o.Njj(null==(n=r.getControl("nivel_1"))?null:n.markAsTouched())}),o.k0s(),o.DNE(13,Co,2,0,"ion-text",13),o.k0s(),o.j41(14,"ion-col",28)(15,"ion-input",30),o.bIt("ionBlur",function(){let n;o.eBV(i);const r=o.XpG();return o.Njj(null==(n=r.getControl("nivel_2"))?null:n.markAsTouched())}),o.k0s(),o.DNE(16,Fo,2,0,"ion-text",13),o.k0s(),o.j41(17,"ion-col",28)(18,"ion-input",31),o.bIt("ionBlur",function(){let n;o.eBV(i);const r=o.XpG();return o.Njj(null==(n=r.getControl("nivel_3"))?null:n.markAsTouched())}),o.k0s(),o.DNE(19,Po,2,0,"ion-text",13),o.k0s(),o.j41(20,"ion-col",28)(21,"ion-input",32),o.bIt("ionBlur",function(){let n;o.eBV(i);const r=o.XpG();return o.Njj(null==(n=r.getControl("nivel_4"))?null:n.markAsTouched())}),o.k0s(),o.DNE(22,bo,2,0,"ion-text",13),o.k0s(),o.j41(23,"ion-col",28)(24,"ion-input",33),o.bIt("ionBlur",function(){let n;o.eBV(i);const r=o.XpG();return o.Njj(null==(n=r.getControl("nivel_invitacion"))?null:n.markAsTouched())}),o.k0s(),o.DNE(25,xo,2,0,"ion-text",13),o.k0s(),o.j41(26,"ion-col",28)(27,"ion-input",34),o.bIt("ionBlur",function(){let n;o.eBV(i);const r=o.XpG();return o.Njj(null==(n=r.getControl("nivel_master"))?null:n.markAsTouched())}),o.k0s(),o.DNE(28,Eo,2,0,"ion-text",13),o.k0s()(),o.bVm()}if(2&e){let i,t,n,r,l,d,c,g,_,f,b,I,D,R;const m=o.XpG();o.R7$(5),o.SpI(" ",m.nombreProductoAgregando," "),o.R7$(2),o.AVh("invalid",(null==(i=m.getControl("tipoComision"))?null:i.invalid)&&(null==(i=m.getControl("tipoComision"))?null:i.touched)),o.Y8G("interfaceOptions",o.lJ4(24,so)),o.R7$(),o.Y8G("ngForOf",m.tiposComision),o.R7$(),o.Y8G("ngIf",(null==(t=m.getControl("tipoComision"))?null:t.invalid)&&(null==(t=m.getControl("tipoComision"))?null:t.touched)),o.R7$(3),o.AVh("invalid",(null==(n=m.getControl("nivel_1"))?null:n.invalid)&&(null==(n=m.getControl("nivel_1"))?null:n.touched)),o.R7$(),o.Y8G("ngIf",(null==(r=m.getControl("nivel_1"))?null:r.invalid)&&(null==(r=m.getControl("nivel_1"))?null:r.touched)),o.R7$(2),o.AVh("invalid",(null==(l=m.getControl("nivel_2"))?null:l.invalid)&&(null==(l=m.getControl("nivel_2"))?null:l.touched)),o.R7$(),o.Y8G("ngIf",(null==(d=m.getControl("nivel_2"))?null:d.invalid)&&(null==(d=m.getControl("nivel_2"))?null:d.touched)),o.R7$(2),o.AVh("invalid",(null==(c=m.getControl("nivel_3"))?null:c.invalid)&&(null==(c=m.getControl("nivel_3"))?null:c.touched)),o.R7$(),o.Y8G("ngIf",(null==(g=m.getControl("nivel_3"))?null:g.invalid)&&(null==(g=m.getControl("nivel_3"))?null:g.touched)),o.R7$(2),o.AVh("invalid",(null==(_=m.getControl("nivel_4"))?null:_.invalid)&&(null==(_=m.getControl("nivel_4"))?null:_.touched)),o.R7$(),o.Y8G("ngIf",(null==(f=m.getControl("nivel_4"))?null:f.invalid)&&(null==(f=m.getControl("nivel_4"))?null:f.touched)),o.R7$(2),o.AVh("invalid",(null==(b=m.getControl("nivel_invitacion"))?null:b.invalid)&&(null==(b=m.getControl("nivel_invitacion"))?null:b.touched)),o.R7$(),o.Y8G("ngIf",(null==(I=m.getControl("nivel_invitacion"))?null:I.invalid)&&(null==(I=m.getControl("nivel_invitacion"))?null:I.touched)),o.R7$(2),o.AVh("invalid",(null==(D=m.getControl("nivel_master"))?null:D.invalid)&&(null==(D=m.getControl("nivel_master"))?null:D.touched)),o.R7$(),o.Y8G("ngIf",(null==(R=m.getControl("nivel_master"))?null:R.invalid)&&(null==(R=m.getControl("nivel_master"))?null:R.touched))}}function ko(e,a){if(1&e&&(o.j41(0,"span"),o.EFF(1),o.k0s()),2&e){const i=o.XpG(2);o.R7$(),o.SpI(" Pagar\xe1s ",i.comisionTotalProductoAgregando," por cada una de las referencias que se hagan v\xe1lidas para este producto ")}}function Io(e,a){if(1&e&&(o.j41(0,"span"),o.EFF(1),o.nrm(2,"br"),o.j41(3,"small"),o.EFF(4,"Deber\xe1s indicar el importe con el cual la venta del producto fue cerrada para determinar los valores de cada una de las comisiones a repartir"),o.k0s()()),2&e){const i=o.XpG(2);o.R7$(),o.SpI(" Pagar\xe1s un ",i.comisionTotalProductoAgregando," por cada una de las referencias que se hagan v\xe1lidas para este producto. ")}}function Do(e,a){if(1&e){const i=o.RV6();o.qex(0),o.j41(1,"ion-row")(2,"ion-col",28)(3,"strong"),o.EFF(4,"Producto: "),o.k0s(),o.EFF(5),o.nrm(6,"br"),o.j41(7,"small"),o.EFF(8),o.nrm(9,"br")(10,"br"),o.j41(11,"strong"),o.EFF(12,"Vigencia: "),o.k0s(),o.EFF(13),o.nrm(14,"br"),o.EFF(15," Valida los datos del producto que publicar\xe1s. "),o.nrm(16,"br"),o.EFF(17," Una vez que el producto ha sido publicado, no podr\xe1 ser modificado. "),o.k0s()(),o.j41(18,"ion-col",28)(19,"table",35)(20,"tr")(21,"th",36),o.EFF(22,"Tabla de comisiones"),o.k0s()(),o.j41(23,"tr")(24,"th",37),o.EFF(25,"Nivel 1"),o.k0s(),o.j41(26,"td",38),o.EFF(27),o.k0s()(),o.j41(28,"tr")(29,"th",37),o.EFF(30,"Nivel 2"),o.k0s(),o.j41(31,"td",38),o.EFF(32),o.k0s()(),o.j41(33,"tr")(34,"th",37),o.EFF(35,"Nivel 3"),o.k0s(),o.j41(36,"td",38),o.EFF(37),o.k0s()(),o.j41(38,"tr")(39,"th",37),o.EFF(40,"Nivel 4"),o.k0s(),o.j41(41,"td",38),o.EFF(42),o.k0s()(),o.j41(43,"tr")(44,"th",37),o.EFF(45,"Invitador"),o.k0s(),o.j41(46,"td",38),o.EFF(47),o.k0s()(),o.j41(48,"tr")(49,"th",37),o.EFF(50,"Embassy"),o.k0s(),o.j41(51,"td",38),o.EFF(52),o.k0s()(),o.j41(53,"tr")(54,"th",37),o.EFF(55,"Total"),o.k0s(),o.j41(56,"th",38),o.EFF(57),o.k0s()()()()(),o.j41(58,"ion-row")(59,"ion-col",19),o.DNE(60,ko,2,1,"span",8)(61,Io,5,1,"span",8),o.k0s()(),o.j41(62,"ion-row")(63,"ion-col")(64,"ion-checkbox",39),o.bIt("ionChange",function(n){o.eBV(i);const r=o.XpG();return o.Njj(r.confirmacionProductoAgregado=n.detail.checked)}),o.EFF(65," Acepto los T\xe9rminos y Condiciones y la "),o.j41(66,"a",40),o.EFF(67,"Pol\xedtica de Privacidad"),o.k0s()()()(),o.bVm()}if(2&e){const i=o.XpG();o.R7$(5),o.SpI(" ",i.nombreProductoAgregando,""),o.R7$(3),o.SpI(" ",i.descripcionProductoAgregando,""),o.R7$(5),o.SpI(" ",i.fechaVigenciaTextoAgregando,""),o.R7$(14),o.JRh(i.nivel1ProductoAgregando),o.R7$(5),o.JRh(i.nivel2ProductoAgregando),o.R7$(5),o.JRh(i.nivel3ProductoAgregando),o.R7$(5),o.JRh(i.nivel4ProductoAgregando),o.R7$(5),o.JRh(i.nivelInvitacionProductoAgregando),o.R7$(5),o.JRh(i.nivelMasterProductoAgregando),o.R7$(5),o.JRh(i.comisionTotalProductoAgregando),o.R7$(3),o.Y8G("ngIf",0==i.tipoComisionAgregando),o.R7$(),o.Y8G("ngIf",1==i.tipoComisionAgregando),o.R7$(3),o.Y8G("checked",i.confirmacionProductoAgregado)}}function Ro(e,a){if(1&e){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const n=o.XpG();return o.Njj(n.siguientePaso(1))}),o.EFF(2,"Continuar"),o.k0s()()}if(2&e){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado)}}function Mo(e,a){if(1&e){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const n=o.XpG();return o.Njj(n.pasoAnterior(1))}),o.EFF(2,"Regresar"),o.k0s()()}if(2&e){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado)}}function To(e,a){if(1&e){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const n=o.XpG();return o.Njj(n.siguientePaso(2))}),o.EFF(2,"Validar"),o.k0s()()}if(2&e){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado)}}function $o(e,a){if(1&e){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const n=o.XpG();return o.Njj(n.pasoAnterior(2))}),o.EFF(2,"Regresar"),o.k0s()()}if(2&e){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado)}}function Vo(e,a){if(1&e){const i=o.RV6();o.j41(0,"div",41)(1,"ion-button",42),o.bIt("click",function(){o.eBV(i);const n=o.XpG();return o.Njj(n.enviarFormulario())}),o.EFF(2," PUBLICAR "),o.k0s()()}if(2&e){const i=o.XpG();o.R7$(),o.Y8G("disabled",i.formEnviado||!i.confirmacionProductoAgregado)}}let Go=(()=>{var e;class a{constructor(t,n,r,l,d,c,g,_,f){this.fb=t,this.toastController=n,this.loadingCtrl=r,this.empresasService=l,this.productoService=d,this.usuarioService=c,this.cdr=g,this.utilerias=_,this.modalCtrl=f,this.btnName="AGREGAR",this.title="AGREGAR",this.formEnviado=!1,this.tiposComision=[],this.id=void 0,this.TipoComisionEnum=P,this.empresas=[],this.mostrarEmpresas=!1,this.empresaID=0,this.estatusDatosbasicos=1,this.estatusDatosComisiones=0,this.estatusDatosValidacion=0,this.nombreProductoAgregando="",this.descripcionProductoAgregando="",this.vigenciaProductoAgregando="",this.nivel1ProductoAgregando="",this.nivel2ProductoAgregando="",this.nivel3ProductoAgregando="",this.nivel4ProductoAgregando="",this.nivelInvitacionProductoAgregando="",this.nivelMasterProductoAgregando="",this.comisionTotalProductoAgregando="",this.tipoComisionAgregando=0,this.fechaVigenciaTextoAgregando="",this.confirmacionProductoAgregado=!1,this.pasoActual="Descripci\xf3n";let b=this.obtenerUltimoDiaDeTresMesesDespues();this.formulario=this.fb.group({nombre:["",[p.k0.required,(0,io.a)()]],descripcion:[""],fechaVencimiento:[b,p.k0.required],empresa:[""],tipoComision:["",p.k0.required],comisionCantidad:[""],comisionPorcentaje:[""],cantidadPorcentaje:[""],otroTipoComision:["",p.k0.required],nivel_1:["",p.k0.required],nivel_2:["",p.k0.required],nivel_3:["",p.k0.required],nivel_4:["",p.k0.required],nivel_master:["",p.k0.required],nivel_invitacion:["",p.k0.required]})}obtenerUltimoDiaDeTresMesesDespues(){const t=new Date,n=new Date(t.getFullYear(),t.getMonth()+13,1);return new Date(n.getFullYear(),n.getMonth(),0)}siguientePaso(t){this.confirmacionProductoAgregado=!1,this.nombreProductoAgregando=(0,$.H)(this.formulario.controls.nombre.value),this.descripcionProductoAgregando=this.formulario.controls.descripcion.value,this.fechaVigenciaTextoAgregando=this.utilerias.formatearFecha(this.formulario.controls.fechaVencimiento.value);let n=this.formulario.controls.tipoComision.value;this.tipoComisionAgregando=n;let r=Number.parseFloat(this.formulario.controls.nivel_1.value),l=Number.parseFloat(this.formulario.controls.nivel_2.value),d=Number.parseFloat(this.formulario.controls.nivel_3.value),c=Number.parseFloat(this.formulario.controls.nivel_4.value),g=Number.parseFloat(this.formulario.controls.nivel_invitacion.value),_=Number.parseFloat(this.formulario.controls.nivel_master.value),f=r+l+d+c+g+_;0==n&&(this.nivel1ProductoAgregando="$"+r.toFixed(2)+" MXN",this.nivel2ProductoAgregando="$"+l.toFixed(2)+"MXN",this.nivel3ProductoAgregando="$"+d.toFixed(2)+"MXN",this.nivel4ProductoAgregando="$"+c.toFixed(2)+"MXN",this.nivelInvitacionProductoAgregando="$"+g.toFixed(2)+"MXN",this.nivelMasterProductoAgregando="$"+_.toFixed(2)+"MXN",this.comisionTotalProductoAgregando="$"+f.toFixed(2)+"MXN"),1==n&&(this.nivel1ProductoAgregando=r.toFixed(2)+"%",this.nivel2ProductoAgregando=l.toFixed(2)+"%",this.nivel3ProductoAgregando=d.toFixed(2)+"%",this.nivel4ProductoAgregando=c.toFixed(2)+"%",this.nivelInvitacionProductoAgregando=g.toFixed(2)+"%",this.nivelMasterProductoAgregando=_.toFixed(2)+"%",this.comisionTotalProductoAgregando=f.toFixed(2)+"%"),1==t&&(this.estatusDatosbasicos=0,this.estatusDatosComisiones=1,this.estatusDatosValidacion=0,this.pasoActual="Comisiones"),2==t&&(this.estatusDatosbasicos=0,this.estatusDatosComisiones=0,this.estatusDatosValidacion=1,this.pasoActual="Validaci\xf3n")}pasoAnterior(t){this.confirmacionProductoAgregado=!1,1==t&&(this.estatusDatosbasicos=1,this.estatusDatosComisiones=0,this.estatusDatosValidacion=0,this.pasoActual="Descripci\xf3n"),2==t&&(this.estatusDatosbasicos=0,this.estatusDatosComisiones=1,this.estatusDatosValidacion=0,this.pasoActual="Comisiones")}ngOnInit(){var t=this;return(0,x.A)(function*(){t.tiposComision=function to(){return Object.keys(P).filter(e=>isNaN(Number(e))).map(e=>({nombre:oo[e],valor:P[e]}))}();const n=yield t.loadingCtrl.create({message:"Cargando datos..."});yield n.present();try{var r,l;const d=yield(0,F._)(t.empresasService.getAllEmpresas());t.empresas=(null==d?void 0:d.data)||[];const c=yield(0,F._)(t.usuarioService.getUsuario()),g=null==c?void 0:c.data;if(t.rolUser=null===(r=g.roles)||void 0===r?void 0:r.enumValue,(null===(l=g.roles)||void 0===l?void 0:l.enumValue)==C.$u.Admin){t.mostrarEmpresas=!0;const _=t.formulario.get("empresa");null==_||_.setValidators([p.k0.required]),null==_||_.updateValueAndValidity(),t.cdr.detectChanges()}else{const _=yield(0,F._)(t.usuarioService.getEmpresaByUsuario(g.id));t.empresaID=null==_?void 0:_.data.id}}catch(d){console.error("Error al cargar datos",d)}finally{n.dismiss()}})()}enviarFormulario(){if(this.formulario.controls.fechaVencimiento.value<new Date)return this.toastController.create({message:"Fecha de vencimiento tiene que ser superior a la actual.",duration:3e3,color:"warning",position:"top"}).then(d=>d.present()),void(this.formEnviado=!1);const r=this.rolUser==C.$u.Admin?this.formulario.controls.empresa.value:this.empresaID;var l={nombre:(0,$.H)(this.formulario.controls.nombre.value),descripcion:(0,$.H)(this.formulario.controls.descripcion.value),empresaID:r,fechaCaducidad:this.formulario.controls.fechaVencimiento.value,nivel1:this.formulario.controls.nivel_1.value,nivel2:this.formulario.controls.nivel_2.value,nivel3:this.formulario.controls.nivel_3.value,nivel4:this.formulario.controls.nivel_4.value,nivelInvitacion:this.formulario.controls.nivel_invitacion.value,nivelMaster:this.formulario.controls.nivel_master.value,tipoComision:this.formulario.controls.tipoComision.value};this.productoService.save(l).pipe((0,K.j)(()=>{this.formEnviado=!1})).subscribe({next:d=>{d&&(this.toastController.create({message:"producto guardado.",duration:3e3,color:"success",position:"top"}).then(c=>c.present()),this.modalCtrl.dismiss(!0))}})}getControl(t){return this.formulario.get(t)}close(){this.modalCtrl.dismiss()}onTipoComisionChange(t){const n=t.detail.value,r=this.formulario.get("comisionCantidad"),l=this.formulario.get("comisionPorcentaje"),d=this.formulario.get("cantidadPorcentaje");switch(n){case P.CantidadFija:null==r||r.setValidators([p.k0.required]),null==l||l.clearValidators(),null==l||l.setValue(""),null==d||d.clearValidators(),null==d||d.setValue("");break;case P.Porcentaje:null==l||l.setValidators([p.k0.required]),null==d||d.setValidators([p.k0.required]),null==r||r.clearValidators(),null==r||r.setValue("")}null==r||r.updateValueAndValidity(),null==l||l.updateValueAndValidity(),null==l||l.updateValueAndValidity()}}return(e=a).\u0275fac=function(t){return new(t||e)(o.rXU(p.ok),o.rXU(s.K_),o.rXU(s.Xi),o.rXU(w.z),o.rXU(T),o.rXU(z.o),o.rXU(o.gRc),o.rXU(ro.M),o.rXU(s.W3))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-modal",8,"producto","form"]],inputs:{id:"id"},features:[o.Jv_([(0,no.aw)()])],attrs:ao,decls:21,vars:11,consts:[["picker",""],[1,"modalHeader"],["slot","end"],[3,"click"],["name","close"],[1,"ion-padding",3,"fullscreen"],[2,"width","100%","max-width","1100px","margin","0 auto"],[1,"modalform",3,"formGroup"],[4,"ngIf"],[2,"text-align","center"],["style","width:45%;display:inline-block;",4,"ngIf"],["size","8"],["label-placement","floating","label","Nombre del producto","formControlName","nombre","placeholder","Nombre del producto","type","text",1,"inputForm",3,"ionBlur"],["color","danger",4,"ngIf"],["size","4"],["appearance","fill",1,"custom-datepicker"],["matInput","","formControlName","fechaVencimiento",3,"matDatepicker"],["matIconSuffix","",3,"for"],["touchUi",""],["size","12"],["label-placement","floating","label","Descripci\xf3n","placeholder","Descripci\xf3n del producto","type","text","formControlName","descripcion",1,"inputForm"],["color","danger"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Empresa","formControlName","empresa",1,"inputForm",3,"ionBlur","interfaceOptions"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["size","6"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Tipo de comision","formControlName","tipoComision",1,"inputForm",3,"ionChange","ionBlur","interfaceOptions"],[1,"niveles"],["size","12","size-md","6"],["label-placement","floating","label","Nivel 1","formControlName","nivel_1","placeholder","Nivel 1","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel 2","formControlName","nivel_2","placeholder","Nivel 2","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel 3","formControlName","nivel_3","placeholder","Nivel 3","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel 4","formControlName","nivel_4","placeholder","Nivel 4","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel Invitaci\xf3n","formControlName","nivel_invitacion","placeholder","Nivel Invitaci\xf3n","type","number","min","0",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Nivel Master","formControlName","nivel_master","placeholder","Nivel Master","type","number","min","0",1,"inputForm",3,"ionBlur"],[2,"width","100%"],["colspan","2"],[2,"text-align","start"],[2,"text-align","end"],["labelPlacement","end",3,"ionChange","checked"],["href","https://www.sistemasperseo.com/Embassy_Terminos_y_Privacidad.pdf"],[2,"width","45%","display","inline-block"],[1,"customButton",3,"click","disabled"]],template:function(t,n){1&t&&(o.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),o.EFF(3),o.k0s(),o.j41(4,"ion-buttons",2)(5,"ion-button",3),o.bIt("click",function(){return n.close()}),o.nrm(6,"ion-icon",4),o.k0s()()()(),o.j41(7,"ion-content",5)(8,"ion-grid",6)(9,"form",7),o.DNE(10,ho,21,10,"ng-container",8)(11,jo,29,25,"ng-container",8)(12,Do,68,13,"ng-container",8),o.k0s()()(),o.j41(13,"ion-footer")(14,"ion-toolbar")(15,"div",9),o.DNE(16,Ro,3,1,"div",10)(17,Mo,3,1,"div",10)(18,To,3,1,"div",10)(19,$o,3,1,"div",10)(20,Vo,3,1,"div",10),o.k0s()()()),2&t&&(o.R7$(3),o.SpI("Agregar producto - ",n.pasoActual,""),o.R7$(4),o.Y8G("fullscreen",!0),o.R7$(2),o.Y8G("formGroup",n.formulario),o.R7$(),o.Y8G("ngIf",1==n.estatusDatosbasicos),o.R7$(),o.Y8G("ngIf",1==n.estatusDatosComisiones),o.R7$(),o.Y8G("ngIf",1==n.estatusDatosValidacion),o.R7$(4),o.Y8G("ngIf",1==n.estatusDatosbasicos),o.R7$(),o.Y8G("ngIf",1==n.estatusDatosComisiones),o.R7$(),o.Y8G("ngIf",1==n.estatusDatosComisiones),o.R7$(),o.Y8G("ngIf",1==n.estatusDatosValidacion),o.R7$(),o.Y8G("ngIf",1==n.estatusDatosValidacion))},dependencies:[s.bv,s.Jm,s.QW,s.eY,s.hU,s.W9,s.M0,s.lO,s.eU,s.iq,s.$w,s.ln,s.Nm,s.Ip,s.IO,s.BC,s.ai,s.hB,s.su,s.Je,s.Gw,s.T6,p.X1,p.qT,p.me,p.BC,p.cb,p.j4,p.JD,v.MD,v.Sq,v.bT,eo.M,k.j,k.M,k.c,k.g,O.fS,O.fg,j.X6,j.Vh,j.bZ,j.bU,p.YN],styles:['.inputForm[_ngcontent-%COMP%], .custom-datepicker[_ngcontent-%COMP%], .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     ion-footer .customButton{width:100%;max-width:400px}@media (min-width: 768px){.niveles-2col[_ngcontent-%COMP%]   ion-col[size="12"][_ngcontent-%COMP%]{--ion-grid-column-span: 6}}'],changeDetection:0}),a})();var Ao=u(6897),yo=u(2101),J=u(2490);const No=()=>[20,50,100];function Bo(e,a){if(1&e){const i=o.RV6();o.j41(0,"ion-col",11)(1,"ion-item",12)(2,"ion-label",13),o.EFF(3,"Filtro por grupo"),o.k0s(),o.j41(4,"ionic-selectable",32),o.bIt("onChange",function(n){o.eBV(i);const r=o.XpG();return o.Njj(r.onGrupoSelect(n))})("onClear",function(n){o.eBV(i);const r=o.XpG();return o.Njj(r.onGrupoClear(n))}),o.k0s()()()}if(2&e){const i=o.XpG();o.R7$(4),o.Y8G("items",i.grupos)("canSearch",!0)("canClear",!0)}}function So(e,a){if(1&e){const i=o.RV6();o.j41(0,"ion-col",11)(1,"ion-item",12)(2,"ion-label",13),o.EFF(3,"Filtro por empresa"),o.k0s(),o.j41(4,"ionic-selectable",33),o.bIt("onChange",function(n){o.eBV(i);const r=o.XpG();return o.Njj(r.onEmpresaSelect(n))})("onClear",function(n){o.eBV(i);const r=o.XpG();return o.Njj(r.onEmpresaClear(n))}),o.k0s()()()}if(2&e){const i=o.XpG();o.R7$(4),o.Y8G("items",i.empresas)("canSearch",!0)("canClear",!0)}}function Xo(e,a){1&e&&(o.j41(0,"th",34),o.EFF(1," Nombre/Descripci\xf3n "),o.k0s())}function Yo(e,a){if(1&e&&(o.j41(0,"td",35),o.EFF(1),o.k0s()),2&e){const i=a.$implicit;o.R7$(),o.SpI(" ",i.nombre," ")}}function Uo(e,a){1&e&&(o.j41(0,"th",34),o.EFF(1," Empresa "),o.k0s())}function Oo(e,a){if(1&e&&(o.j41(0,"td",35),o.EFF(1),o.k0s()),2&e){const i=a.$implicit;o.R7$(),o.SpI(" ",i.empresaRazonSocial," ")}}function wo(e,a){1&e&&(o.j41(0,"th",36),o.EFF(1," Comisi\xf3n "),o.k0s())}function zo(e,a){if(1&e&&(o.j41(0,"td",37),o.EFF(1),o.k0s()),2&e){const i=a.$implicit;o.R7$(),o.SpI(" ",i.comision," ")}}function Jo(e,a){1&e&&(o.j41(0,"th",36),o.EFF(1," Caducidad "),o.k0s())}function Qo(e,a){if(1&e&&(o.j41(0,"td",37),o.EFF(1),o.j41(2,"div")(3,"small",38),o.EFF(4),o.k0s()()()),2&e){const i=a.$implicit,t=o.XpG();o.R7$(),o.SpI(" ",t.formatFecha(i.fechaCaducidad)," "),o.R7$(2),o.Y8G("ngClass",t.getVigencia(i.fechaCaducidad)?"text-success":"text-danger"),o.R7$(),o.SpI(" ",t.getVigencia(i.fechaCaducidad)?"Vigente":"No vigente"," ")}}function Ho(e,a){1&e&&o.nrm(0,"tr",39)}function qo(e,a){if(1&e){const i=o.RV6();o.j41(0,"tr",40),o.bIt("dblclick",function(){const n=o.eBV(i).$implicit,r=o.XpG();return o.Njj(r.visualizarModal(n.id))}),o.k0s()}}function Lo(e,a){if(1&e&&(o.j41(0,"tr",41)(1,"td",42),o.EFF(2," No se encontraron registros disponibles. "),o.k0s()()),2&e){const i=o.XpG();o.R7$(),o.BMQ("colspan",i.displayedColumns.length)}}const Wo=[{path:"",component:(()=>{var e;class a{constructor(t,n,r,l,d,c,g){this.productoService=t,this.loadingCtrl=n,this.empresasService=r,this.grupoService=l,this.usuarioService=d,this.modalCtrl=c,this.route=g,this.dataSourceTable=new h.I6,this.displayedColumns=[],this.allColumns=["Nombre","Comision","FechaCaducidad"],this.inputBuscar=new A.B,this.query="",this.empresaID=0,this.userid=0,this.inputBusquedaText="Buscar por nombre de producto",this.RolesEnum=C.$u,this.grupos=[],this.empresas=[],this.filterEmpresID=0,this.filterGrupoID=0,this.filterVigencia=0,this.vigencia=[{nombre:"Vigentes",valor:1},{nombre:"No vigentes",valor:2}],this.destroy$=new A.B}ngAfterViewInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){var t=this;return(0,x.A)(function*(){var n;let l=t.route.snapshot.data.resolverData.usuario;if(t.rolUsuario=null===(n=l.roles)||void 0===n?void 0:n.enumValue,t.userid=l.id,t.displayedColumns=[...t.allColumns],t.rolUsuario===C.$u.Admin){const g=t.displayedColumns.indexOf("Nombre");-1!==g&&t.displayedColumns.splice(g+1,0,"Empresa"),t.inputBusquedaText="Buscar por nombre de producto, empresa o grupo"}const d=yield t.loadingCtrl.create({message:"Cargando datos..."});yield d.present();try{if(t.rolUsuario==C.$u.Socio){const c=yield(0,F._)(t.usuarioService.getEmpresaByUsuario(t.userid));t.empresaID=c.data.id}else{const c=yield(0,F._)(t.empresasService.getAllEmpresas());t.empresas=(null==c?void 0:c.data)||[];const g=yield(0,F._)(t.grupoService.getAllGrupos());t.grupos=(null==g?void 0:g.data)||[]}t.dataSourceTable.paginator=t.paginator,t.loadtable()}catch(c){console.error("Error al cargar datos",c)}finally{d.dismiss()}t.inputBuscar.pipe((0,Q.B)(1e3),(0,H.F)(),(0,q.Q)(t.destroy$)).subscribe(c=>{t.query=c.toString(),t.loadtable()})})()}loadtable(){switch(this.rolUsuario){case C.$u.Admin:this.loadtableAll();break;case C.$u.Socio:this.loadtableByEmpresa()}}loadtableAll(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,y.h)(this.sort.sortChange,this.paginator.page).pipe((0,N.Z)({}),(0,B.n)(()=>this.productoService.getProductoAllPaginated({page:this.paginator.pageIndex,size:this.paginator.pageSize,sortBy:this.sort.active,sortDir:this.sort.direction,searchQuery:this.query,grupoID:this.filterGrupoID,empresaID:this.filterEmpresID,vigenciaFilter:this.filterVigencia}).pipe((0,S.W)(()=>(0,X.of)(null)))),(0,Y.T)(t=>null===t?[]:(this.total=t.data.total,t.data.items))).subscribe(t=>{this.dataSourceTable=new h.I6(t)})}loadtableByEmpresa(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,y.h)(this.sort.sortChange,this.paginator.page).pipe((0,N.Z)({}),(0,B.n)(()=>this.productoService.getProductoByEmpresaPaginated({id:this.empresaID,page:this.paginator.pageIndex,size:this.paginator.pageSize,sortBy:this.sort.active,sortDir:this.sort.direction,searchQuery:this.query,vigenciaFilter:this.filterVigencia}).pipe((0,S.W)(()=>(0,X.of)(null)))),(0,Y.T)(t=>null===t?[]:(this.total=t.data.total,t.data.items))).subscribe(t=>{this.dataSourceTable=new h.I6(t)})}visualizarModal(t){var n=this;return(0,x.A)(function*(){const r=yield n.modalCtrl.create({component:Z,cssClass:"modal-empresa",componentProps:{productoId:t}});yield r.present();const{data:l}=yield r.onDidDismiss();l&&(console.log(l),n.loadtable())})()}addModal(){var t=this;return(0,x.A)(function*(){const n=yield t.modalCtrl.create({component:Go,cssClass:"modal-xl"});yield n.present();const{data:r}=yield n.onDidDismiss();r&&(console.log(r),t.loadtable())})()}onGrupoSelect(t){null!=t.value&&null!=t.value&&(this.filterGrupoID=t.value.id,this.loadtable())}onGrupoClear(t){this.filterGrupoID=0,this.loadtable()}onEmpresaSelect(t){null!=t.value&&null!=t.value&&(this.filterEmpresID=t.value.id,this.loadtable())}onEmpresaClear(t){this.filterEmpresID=0,this.loadtable()}onVigenciaSelect(t){null!=t.value&&(this.filterVigencia=t.value.valor,this.loadtable())}onVigenciaClear(t){this.filterVigencia=0,this.loadtable()}formatFecha(t){if(null==t)return"No aplica";const n=new Date(t),r=n.getDate().toString().padStart(2,"0");let l=n.toLocaleString("es-MX",{month:"long"});return l=l.charAt(0).toUpperCase()+l.slice(1),`${r} ${l} ${n.getFullYear()}`}getVigencia(t){if(null==t)return!0;const n=new Date;n.setHours(0,0,0,0);const r=new Date(t);return r.setHours(0,0,0,0),r>=n}}return(e=a).\u0275fac=function(t){return new(t||e)(o.rXU(T),o.rXU(s.Xi),o.rXU(w.z),o.rXU(Ao.b),o.rXU(z.o),o.rXU(s.W3),o.rXU(yo.nX))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-productos"]],viewQuery:function(t,n){if(1&t&&(o.GBs(M.iy,5),o.GBs(E.B4,5)),2&t){let r;o.mGM(r=o.lsd())&&(n.paginator=r.first),o.mGM(r=o.lsd())&&(n.sort=r.first)}},standalone:!1,decls:50,vars:14,consts:[[1,"pagesHeader"],["slot","start"],["name","archive","color","white"],[1,"pagesContent"],[1,"ion-align-items-center"],["size","12","size-md","9",1,"ion-text-center"],[1,"inputBusqueda",3,"ionInput","placeholder"],["slot","end","name","search","aria-hidden","true"],["size","12","size-md","2",1,"ion-text-center"],["expand","block",1,"customGreenButton",3,"click"],["name","add","color","white"],["size","12","size-md","4",1,"ion-text-center"],[1,"inputBusqueda"],["position","floating"],["item-content","","itemValueField","valor","closeButtonSlot","end","itemTextField","nombre","closeButtonText","Cancelar","clearButtonText","Limpiar",3,"onChange","onClear","items","canSearch","canClear"],["size","12","size-md","4","class","ion-text-center",4,"ngIf"],[1,"referidosHeader"],[1,"title"],[2,"overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Nombre"],["mat-header-cell","","style","padding-left: 1rem;","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","padding-left: 1rem;",4,"matCellDef"],["matColumnDef","Empresa"],["matColumnDef","Comision"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","FechaCaducidad"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","mydivoutermulti elemento-renglon row_clickable",3,"dblclick",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize"],["item-content","","itemValueField","id","closeButtonSlot","end","itemTextField","nombre","closeButtonText","Cancelar","clearButtonText","Limpiar",3,"onChange","onClear","items","canSearch","canClear"],["item-content","","itemValueField","id","closeButtonSlot","end","itemTextField","razonSocial","closeButtonText","Cancelar","clearButtonText","Limpiar",3,"onChange","onClear","items","canSearch","canClear"],["mat-header-cell","","mat-sort-header","",2,"padding-left","1rem"],["mat-cell","",2,"padding-left","1rem"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"ngClass"],["mat-header-row",""],["mat-row","",1,"mydivoutermulti","elemento-renglon","row_clickable",3,"dblclick"],[1,"mat-row"],[2,"text-align","center","padding","1rem"]],template:function(t,n){1&t&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title")(5,"h1"),o.nrm(6,"ion-icon",2),o.EFF(7," Productos a promocionar"),o.k0s()()()(),o.j41(8,"ion-content",3)(9,"div")(10,"ion-grid")(11,"ion-row",4)(12,"ion-col",5)(13,"ion-input",6),o.bIt("ionInput",function(l){return n.inputBuscar.next(l.detail.value||"")}),o.nrm(14,"ion-icon",7),o.k0s()(),o.j41(15,"ion-col",8)(16,"ion-button",9),o.bIt("click",function(){return n.addModal()}),o.nrm(17,"ion-icon",10),o.EFF(18," AGREGAR"),o.k0s()()(),o.j41(19,"ion-row",4)(20,"ion-col",11)(21,"ion-item",12)(22,"ion-label",13),o.EFF(23,"Filtro por vigencia"),o.k0s(),o.j41(24,"ionic-selectable",14),o.bIt("onChange",function(l){return n.onVigenciaSelect(l)})("onClear",function(l){return n.onVigenciaClear(l)}),o.k0s()()(),o.DNE(25,Bo,5,3,"ion-col",15)(26,So,5,3,"ion-col",15),o.k0s()()(),o.j41(27,"ion-card")(28,"ion-card-header",16)(29,"ion-card-title",17),o.EFF(30,"Productos"),o.k0s()(),o.j41(31,"ion-card-content")(32,"div",18)(33,"table",19),o.qex(34,20),o.DNE(35,Xo,2,0,"th",21)(36,Yo,2,1,"td",22),o.bVm(),o.qex(37,23),o.DNE(38,Uo,2,0,"th",21)(39,Oo,2,1,"td",22),o.bVm(),o.qex(40,24),o.DNE(41,wo,2,0,"th",25)(42,zo,2,1,"td",26),o.bVm(),o.qex(43,27),o.DNE(44,Jo,2,0,"th",25)(45,Qo,5,3,"td",26),o.bVm(),o.DNE(46,Ho,1,0,"tr",28)(47,qo,1,0,"tr",29)(48,Lo,3,1,"tr",30),o.k0s()(),o.nrm(49,"mat-paginator",31),o.k0s()()()),2&t&&(o.R7$(13),o.Y8G("placeholder",n.inputBusquedaText),o.R7$(11),o.Y8G("items",n.vigencia)("canSearch",!0)("canClear",!0),o.R7$(),o.Y8G("ngIf",n.rolUsuario==n.RolesEnum.Admin),o.R7$(),o.Y8G("ngIf",n.rolUsuario==n.RolesEnum.Admin),o.R7$(7),o.Y8G("dataSource",n.dataSourceTable),o.R7$(13),o.Y8G("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),o.R7$(),o.Y8G("matRowDefColumns",n.displayedColumns),o.R7$(2),o.Y8G("length",n.total)("pageSizeOptions",o.lJ4(13,No))("pageSize",50))},dependencies:[v.YU,v.bT,s.Jm,s.QW,s.b_,s.I9,s.ME,s.tN,s.hU,s.W9,s.lO,s.eU,s.iq,s.$w,s.uz,s.he,s.MC,s.ln,s.BC,s.ai,s.Gw,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,h.ky,M.iy,E.B4,E.aE,J.ec],styles:[".text-success[_ngcontent-%COMP%]{color:green}.text-danger[_ngcontent-%COMP%]{color:red}"]}),a})()}];let Zo=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[G.iI.forChild(Wo),G.iI]}),a})(),Ko=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[v.MD,p.YN,s.bv,Zo,h.tP,M.Ou,E.NQ,J.ec]}),a})()}}]);