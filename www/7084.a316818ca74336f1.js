"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7084],{6231:(y,C,t)=>{t.d(C,{$u:()=>f,Cn:()=>l});var f=function(d){return d[d.Admin=1]="Admin",d[d.Socio=2]="Socio",d[d.Embajadores=3]="Embajadores",d}(f||{});const b={Admin:"Administrador",Socio:"Socio",Embajadores:"Embajador"};function l(){return Object.keys(f).filter(d=>isNaN(Number(d))).map(d=>({nombre:b[d],valor:f[d]}))}},7084:(y,C,t)=>{t.r(C),t.d(C,{DashboardPageModule:()=>K});var f=t(2881),b=t(9417),l=t(3092),d=t(9870),x=t(467),m=function(o){return o[o.Grupos=1]="Grupos",o[o.Empresas=2]="Empresas",o[o.Embajadores=3]="Embajadores",o[o.Celulas=4]="Celulas",o[o.Productos=5]="Productos",o[o.Referencias=6]="Referencias",o[o.Movimientos=7]="Movimientos",o[o.Configuraci\u00f3n=8]="Configuraci\xf3n",o[o.CorteMensual=9]="CorteMensual",o[o.VisualizarEmpresa=10]="VisualizarEmpresa",o}(m||{}),u=t(6231),e=t(1360),D=t(2101),F=t(2091),P=t(7248);const O=()=>["/dashboard/celulas"],G=()=>({view:"empresa"}),S=()=>["/dashboard/embajadores-diagrama"];function E(o,s){if(1&o&&(e.j41(0,"ion-item",16),e.nrm(1,"ion-icon",18),e.j41(2,"ion-label"),e.EFF(3),e.k0s()()),2&o){const i=e.XpG().$implicit;e.Y8G("routerLink",i.url),e.R7$(),e.Y8G("ios",i.icon+"-outline")("md",i.icon+"-sharp"),e.R7$(2),e.JRh(i.title)}}function N(o,s){1&o&&(e.j41(0,"ion-accordion-group",17)(1,"ion-accordion",19)(2,"ion-item",20),e.nrm(3,"ion-icon",21),e.j41(4,"ion-label"),e.EFF(5,"C\xe9lulas"),e.k0s()(),e.j41(6,"div",22)(7,"ion-menu-toggle",3)(8,"ion-item",23)(9,"ion-label"),e.EFF(10,"Empresa"),e.k0s()()(),e.j41(11,"ion-menu-toggle",3)(12,"ion-item",24)(13,"ion-label"),e.EFF(14,"Embajadores"),e.k0s()()()()()()),2&o&&(e.R7$(3),e.Y8G("ios","grid-outline")("md","grid-sharp"),e.R7$(5),e.Y8G("routerLink",e.lJ4(5,O))("queryParams",e.lJ4(6,G)),e.R7$(4),e.Y8G("routerLink",e.lJ4(7,S)))}function V(o,s){if(1&o&&(e.j41(0,"ion-menu-toggle",3),e.DNE(1,E,4,4,"ion-item",16),e.k0s(),e.DNE(2,N,15,8,"ion-accordion-group",17)),2&o){const i=s.$implicit,n=e.XpG();e.R7$(),e.vxM(i.visible&&i.enum!==n.MenuPagesEnum.Celulas?1:-1),e.R7$(),e.vxM(i.visible&&i.enum===n.MenuPagesEnum.Celulas?2:-1)}}function I(o,s){if(1&o&&(e.j41(0,"div",8)(1,"span",9),e.EFF(2,"Empresa"),e.k0s(),e.j41(3,"span",10),e.EFF(4),e.k0s()()),2&o){const i=e.XpG();e.R7$(4),e.JRh(i.empresaName)}}let z=(()=>{var o;class s{constructor(n,a,c,r,h){this.router=n,this.route=a,this.tokenService=c,this.datePipe=r,this.usuarioService=h,this.MenuPagesEnum=m,this.appPages=[{enum:m.VisualizarEmpresa,title:"Mi empresa",url:"/dashboard/visual-empresa",icon:"business",visible:!1,access:[u.$u.Socio]},{enum:m.Grupos,title:"Grupos",url:"/dashboard/grupos",icon:"people",visible:!1,access:[u.$u.Admin]},{enum:m.Empresas,title:"Empresas",url:"/dashboard/empresas",icon:"business",visible:!1,access:[u.$u.Admin]},{enum:m.Productos,title:"Productos",url:"/dashboard/productos",icon:"archive",visible:!1,access:[u.$u.Admin,u.$u.Socio]},{enum:m.Celulas,title:"C\xe9lulas",url:"/dashboard/celulas",icon:"grid",visible:!1,access:[u.$u.Admin]},{enum:m.Embajadores,title:"Usuarios",url:"/dashboard/embajadores",icon:"flag",visible:!1,access:[u.$u.Admin]},{enum:m.Referencias,title:"Referencias",url:"/dashboard/referencias",icon:"star",visible:!1,access:[u.$u.Admin,u.$u.Socio]},{enum:m.Configuraci\u00f3n,title:"Periodos",url:"/dashboard/periodos",icon:"calendar",visible:!1,access:[u.$u.Admin]},{enum:m.CorteMensual,title:"Corte mensual",url:"/dashboard/corte",icon:"calendar",visible:!1,access:[u.$u.Admin]},{enum:m.Configuraci\u00f3n,title:"Configuraci\xf3n",url:"/dashboard/configuracion",icon:"settings",visible:!1,access:[u.$u.Admin]}],this.userName="",this.celulasVisible=!1,this.empresaName=null}ngOnInit(){var n,a;const r=this.route.snapshot.data.resolverData.usuario;if(this.userName=`${r.nombres} ${r.apellidos}`,!r.roles)return;this.appPages.forEach(v=>{v.visible=v.access.includes(r.roles.enumValue)}),this.celulasVisible=!!this.appPages.find(v=>v.enum===m.Celulas&&v.visible);const p=null!==(n=null!==(a=null==r?void 0:r.id)&&void 0!==a?a:null==r?void 0:r.ID)&&void 0!==n?n:null==r?void 0:r.Id;r.roles.enumValue===u.$u.Socio&&p&&this.usuarioService.getEmpresaByUsuario(p,!0).subscribe({next:v=>{const R=null==v?void 0:v.data;this.empresaName=R?this.pickEmpresaNombre(R):null},error:()=>{}})}pickEmpresaNombre(n){var a,c,r,h,p;return null!==(a=null!==(c=null!==(r=null!==(h=null!==(p=null==n?void 0:n.razonSocial)&&void 0!==p?p:null==n?void 0:n.RazonSocial)&&void 0!==h?h:null==n?void 0:n.nombreComercial)&&void 0!==r?r:null==n?void 0:n.NombreComercial)&&void 0!==c?c:null==n?void 0:n.rfc)&&void 0!==a?a:null}ngOnDestroy(){}logout(){var n=this;return(0,x.A)(function*(){yield n.tokenService.removeToken(),n.appPages.forEach(a=>a.visible=!1),n.celulasVisible=!1,n.router.navigate(["/login"],{replaceUrl:!0})})()}}return(o=s).\u0275fac=function(n){return new(n||o)(e.rXU(D.Ix),e.rXU(D.nX),e.rXU(F.B),e.rXU(f.vh),e.rXU(P.o))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-dashboard"]],standalone:!1,decls:27,vars:2,consts:[["contentId","main-content"],["contentId","main-content","type","overlay",1,"custom-menu"],["id","inbox-list"],["auto-hide","false"],["src","../../../assets/logo.PNG","alt","Logo",1,"logo"],[1,"menu-separator"],[1,"user-meta"],["class","meta-row",4,"ngIf"],[1,"meta-row"],[1,"meta-label"],[1,"meta-value"],[2,"height","10px"],[1,"logout-button-container"],["expand","block","color","light","size","small",3,"click"],["slot","start","name","power"],["id","main-content",1,"ion-page"],["routerDirection","root","lines","none","detail","false","routerLinkActive","selected",3,"routerLink"],[1,"menu-accordion"],["color","white","aria-hidden","true","slot","start",3,"ios","md"],["value","celulas"],["slot","header","lines","none","detail","false",1,"celulas-header"],["slot","start","color","white",3,"ios","md"],["slot","content",1,"submenu"],["lines","none","detail","false","routerDirection","root",3,"routerLink","queryParams"],["lines","none","detail","false","routerDirection","root",3,"routerLink"]],template:function(n,a){1&n&&(e.j41(0,"ion-content")(1,"ion-split-pane",0)(2,"ion-menu",1)(3,"ion-content")(4,"ion-list",2)(5,"ion-menu-toggle",3),e.nrm(6,"img",4),e.k0s(),e.Z7z(7,V,3,2,null,null,e.fX1),e.nrm(9,"div",5),e.j41(10,"ion-menu-toggle",3)(11,"div",6),e.DNE(12,I,5,1,"div",7),e.j41(13,"div",8)(14,"span",9),e.EFF(15,"Usuario"),e.k0s(),e.j41(16,"span",10),e.EFF(17),e.k0s()()()(),e.nrm(18,"div",11),e.j41(19,"ion-menu-toggle",3)(20,"div",12)(21,"ion-button",13),e.bIt("click",function(){return a.logout()}),e.nrm(22,"ion-icon",14),e.EFF(23," Cerrar Sesi\xf3n "),e.k0s()()()()()(),e.j41(24,"div",15)(25,"ion-content"),e.nrm(26,"ion-router-outlet"),e.k0s()()()()),2&n&&(e.R7$(7),e.Dyx(a.appPages),e.R7$(5),e.Y8G("ngIf",a.empresaName),e.R7$(5),e.JRh(a.userName))},dependencies:[f.bT,l.xk,l.YH,l.Jm,l.W9,l.iq,l.uz,l.he,l.nf,l.oS,l.cA,l.HP,l.Rg,l.N7,d.Wk,d.wQ],styles:['@charset "UTF-8";.userLabel[_ngcontent-%COMP%]{color:#001744;font-weight:700;font-size:18px}.buttonHeader[_ngcontent-%COMP%]{--color: #001744;font-weight:700;font-size:12px}.menu-separator[_ngcontent-%COMP%]{height:1px;background-color:#fff;margin:10px}.logout-button-container[_ngcontent-%COMP%]{justify-content:center;margin:0 10px}.name-text[_ngcontent-%COMP%]{color:#fff!important;font-weight:700;font-size:14px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0 12px;text-align:center}.menu-accordion[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{padding-left:44px}.user-meta[_ngcontent-%COMP%]{width:calc(100% - 24px);margin:10px 12px 8px;padding:10px 12px;border-radius:8px;background:#ffffff0f;border:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:saturate(120%) blur(.5px);backdrop-filter:saturate(120%) blur(.5px)}.meta-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px;line-height:1.2;margin:4px 0}.meta-label[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.06em;text-transform:uppercase;color:#cbd5e1;font-weight:700;min-width:64px}.meta-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff;text-shadow:0 1px 1px rgba(0,0,0,.2);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 2dppx){.meta-value[_ngcontent-%COMP%]{text-shadow:none}}',".menu-accordion[_ngcontent-%COMP%]   .ion-accordion-toggle-icon[_ngcontent-%COMP%], .menu-accordion[_ngcontent-%COMP%]   ion-accordion[_ngcontent-%COMP%]::part(toggle-icon){display:none!important}.celulas-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff!important}"]}),s})();var T=t(1620),U=t(9350);let g=(()=>{var o;class s{constructor(n,a,c){this.userService=n,this.toastController=a,this.router=c}canActivate(){var n=this;return(0,x.A)(function*(){var a;const c=yield function L(o,s){const i="object"==typeof s;return new Promise((n,a)=>{let r,c=!1;o.subscribe({next:h=>{r=h,c=!0},error:a,complete:()=>{c?n(r):i?n(s.defaultValue):a(new U.G)}})})}(n.userService.getUsuario());return null!=c.data.roles&&(null===(a=c.data.roles)||void 0===a?void 0:a.enumValue)==u.$u.Admin||(yield n.showToast("No tienes permiso para acceder a esta secci\xf3n"),n.router.navigate(["/dashboard"]),!1)})()}showToast(n){var a=this;return(0,x.A)(function*(){(yield a.toastController.create({message:n,duration:4e3,position:"bottom",color:"danger"})).present()})()}}return(o=s).\u0275fac=function(n){return new(n||o)(e.KVO(P.o),e.KVO(l.K_),e.KVO(D.Ix))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var M=t(7468),j=t(7673),$=t(6354),A=t(9437);const Y=[{path:"",component:z,canActivate:[T.q],children:[{path:"inicio",loadChildren:()=>t.e(1169).then(t.bind(t,1169)).then(o=>o.InicioPageModule)},{path:"grupos",loadChildren:()=>Promise.all([t.e(4495),t.e(673)]).then(t.bind(t,673)).then(o=>o.GrupoSociosPageModule),canActivate:[g]},{path:"empresas",loadChildren:()=>Promise.all([t.e(4495),t.e(2906),t.e(7656)]).then(t.bind(t,7656)).then(o=>o.EmpresasPageModule),canActivate:[g]},{path:"embajadores",loadChildren:()=>Promise.all([t.e(4495),t.e(2906),t.e(7061)]).then(t.bind(t,7061)).then(o=>o.EmbajadoresPageModule),canActivate:[g]},{path:"celulas",loadChildren:()=>t.e(7273).then(t.bind(t,7273)).then(o=>o.CelulasPageModule),canActivate:[g]},{path:"productos",loadChildren:()=>Promise.all([t.e(4495),t.e(2906),t.e(9640),t.e(2076),t.e(1824)]).then(t.bind(t,1824)).then(o=>o.ProductosPageModule),resolve:{resolverData:(()=>{var o;class s{constructor(n){this.usuarioService=n}resolve(){return(0,M.p)({usuario:this.usuarioService.getUsuario().pipe((0,$.T)(n=>n.data),(0,A.W)(()=>(0,j.of)([])))})}}return(o=s).\u0275fac=function(n){return new(n||o)(e.KVO(P.o))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})()}},{path:"referencias",loadChildren:()=>Promise.all([t.e(4495),t.e(2906),t.e(667)]).then(t.bind(t,667)).then(o=>o.ReferenciasPageModule),resolve:{resolverData:(()=>{var o;class s{constructor(n){this.usuarioService=n}resolve(){return(0,M.p)({usuario:this.usuarioService.getUsuario().pipe((0,$.T)(n=>n.data),(0,A.W)(()=>(0,j.of)([])))})}}return(o=s).\u0275fac=function(n){return new(n||o)(e.KVO(P.o))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})()}},{path:"movimientos",loadChildren:()=>t.e(9348).then(t.bind(t,9348)).then(o=>o.MovimientosPageModule),canActivate:[g]},{path:"configuracion",loadChildren:()=>t.e(8746).then(t.bind(t,8746)).then(o=>o.ConfiguracionPageModule)},{path:"periodos",loadChildren:()=>Promise.all([t.e(4495),t.e(9640),t.e(2076),t.e(3076)]).then(t.bind(t,3076)).then(o=>o.PeriodosPageModule),canActivate:[g]},{path:"corte",loadChildren:()=>Promise.all([t.e(2076),t.e(8412)]).then(t.bind(t,8412)).then(o=>o.CorteMensualPageModule),canActivate:[g]},{path:"corteMensual",loadChildren:()=>Promise.all([t.e(2076),t.e(8412)]).then(t.bind(t,8412)).then(o=>o.CorteMensualPageModule),canActivate:[g]},{path:"embajadores-diagrama",loadChildren:()=>t.e(514).then(t.bind(t,514)).then(o=>o.EmbajadoresDiagramaModule)},{path:"visual-empresa",loadChildren:()=>t.e(3802).then(t.bind(t,3802)).then(o=>o.VisualEmpresaViewPageModule)}]}];let H=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[d.iI.forChild(Y),d.iI]}),s})(),K=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[f.MD,b.YN,l.bv,H]}),s})()}}]);