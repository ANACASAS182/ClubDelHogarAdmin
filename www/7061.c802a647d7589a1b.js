"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7061],{7061:(ne,O,d)=>{d.r(O),d.d(O,{EmbajadoresPageModule:()=>te});var T=d(2881),c=d(9417),s=d(3092),V=d(9870),D=d(467),N=d(7550),k=d(2042),h=d(3662),y=d(1413),P=d(152),H=d(3294),q=d(6977),J=d(7786),L=d(9172),Q=d(5558),W=d(9437),K=d(7673),Z=d(6354),F=d(4843),oo=d(980),E=d(6231),A=d(2490),C=d(6152),j=d(5460),o=d(1360),Y=d(7248),eo=d(6897),to=d(8311),w=d(5312),X=d(7643);let no=(()=>{var t;class r{constructor(n){this.http=n,this.apiUrl=w.c.apiUrl+"api/FuenteOrigen"}getCatalogoFuentesOrigen(){return this.http.get(`${this.apiUrl}/GetFuentesOrigen`)}}return(t=r).\u0275fac=function(n){return new(n||t)(o.KVO(X.Qq))},t.\u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),r})(),lo=(()=>{var t;class r{constructor(n){this.http=n,this.apiUrl=w.c.apiUrl+"api/Catalogos"}getCatalogoPaises(){return this.http.get(`${this.apiUrl}/GetCatalogoPaises`)}getCatalogoEstados(){return this.http.get(`${this.apiUrl}/GetCatalogoEstadosMexicanos`)}}return(t=r).\u0275fac=function(n){return new(n||t)(o.KVO(X.Qq))},t.\u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();const ao=["selectableComponent"],io=["class","usuario form"],ro=()=>({header:"Pais"}),so=()=>({header:"Fuente de origen del usuario"}),uo=()=>({header:"Rol de usuario"}),mo=()=>({header:"Estado"}),co=()=>({header:"Selecciona grupo"}),po=()=>({header:"Selecciona empresa"});function fo(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function ho(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function go(t,r){if(1&t&&(o.j41(0,"ion-select-option",27),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.SpI(" ",a.descripcion," ")}}function _o(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function Co(t,r){if(1&t&&(o.j41(0,"ion-select-option",27),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.SpI(" ",a.nombre," ")}}function vo(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function bo(t,r){if(1&t){const a=o.RV6();o.j41(0,"ion-col",8)(1,"ion-select",28),o.bIt("ionBlur",function(){let e;o.eBV(a);const i=o.XpG();return o.Njj(null==(e=i.getControl("estado"))?null:e.markAsTouched())}),o.DNE(2,Co,2,2,"ion-select-option",13),o.k0s(),o.DNE(3,vo,2,0,"ion-text",10),o.k0s()}if(2&t){let a,n;const e=o.XpG();o.R7$(),o.AVh("invalid",(null==(a=e.getControl("estado"))?null:a.invalid)&&(null==(a=e.getControl("estado"))?null:a.touched)),o.Y8G("interfaceOptions",o.lJ4(5,mo)),o.R7$(),o.Y8G("ngForOf",e.estados),o.R7$(),o.Y8G("ngIf",(null==(n=e.getControl("estado"))?null:n.invalid)&&(null==(n=e.getControl("estado"))?null:n.touched))}}function Fo(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function Eo(t,r){if(1&t){const a=o.RV6();o.j41(0,"ion-col",8)(1,"ion-input",29),o.bIt("ionBlur",function(){let e;o.eBV(a);const i=o.XpG();return o.Njj(null==(e=i.getControl("estadoTexto"))?null:e.markAsTouched())}),o.k0s(),o.DNE(2,Fo,2,0,"ion-text",10),o.k0s()}if(2&t){let a,n;const e=o.XpG();o.R7$(),o.AVh("invalid",(null==(a=e.getControl("estadoTexto"))?null:a.invalid)&&(null==(a=e.getControl("estadoTexto"))?null:a.touched)),o.R7$(),o.Y8G("ngIf",(null==(n=e.getControl("estadoTexto"))?null:n.invalid)&&(null==(n=e.getControl("estadoTexto"))?null:n.touched))}}function jo(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function To(t,r){if(1&t&&(o.j41(0,"ion-select-option",27),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.SpI(" ",a.nombre," ")}}function ko(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function Ro(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function Mo(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function Go(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function Io(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," La contrase\xf1a debe tener al menos 6 caracteres. "),o.k0s())}function $o(t,r){if(1&t&&(o.j41(0,"ion-select-option",27),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.Y8G("value",a.valor),o.R7$(),o.SpI(" ",a.nombre," ")}}function So(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function Uo(t,r){if(1&t&&(o.j41(0,"ion-select-option",27),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.SpI(" ",a.nombre," ")}}function xo(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function Bo(t,r){if(1&t){const a=o.RV6();o.j41(0,"ion-col",8)(1,"ion-select",30),o.bIt("ionBlur",function(){let e;o.eBV(a);const i=o.XpG();return o.Njj(null==(e=i.getControl("grupo"))?null:e.markAsTouched())}),o.DNE(2,Uo,2,2,"ion-select-option",13),o.k0s(),o.DNE(3,xo,2,0,"ion-text",10),o.k0s()}if(2&t){let a,n;const e=o.XpG();o.R7$(),o.AVh("invalid",(null==(a=e.getControl("grupo"))?null:a.invalid)&&(null==(a=e.getControl("grupo"))?null:a.touched)),o.Y8G("interfaceOptions",o.lJ4(5,co)),o.R7$(),o.Y8G("ngForOf",e.grupos),o.R7$(),o.Y8G("ngIf",(null==(n=e.getControl("grupo"))?null:n.invalid)&&(null==(n=e.getControl("grupo"))?null:n.touched))}}function Do(t,r){if(1&t&&(o.j41(0,"ion-select-option",27),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.Y8G("value",a.id),o.R7$(),o.Lme(" ",a.rfc," - ",a.razonSocial," ")}}function No(t,r){1&t&&(o.j41(0,"ion-text",26),o.EFF(1," Campo requerido "),o.k0s())}function yo(t,r){if(1&t){const a=o.RV6();o.j41(0,"ion-col",8)(1,"ion-select",31),o.bIt("ionBlur",function(){let e;o.eBV(a);const i=o.XpG();return o.Njj(null==(e=i.getControl("empresa"))?null:e.markAsTouched())}),o.DNE(2,Do,2,3,"ion-select-option",13),o.k0s(),o.DNE(3,No,2,0,"ion-text",10),o.k0s()}if(2&t){let a,n;const e=o.XpG();o.R7$(),o.AVh("invalid",(null==(a=e.getControl("empresa"))?null:a.invalid)&&(null==(a=e.getControl("empresa"))?null:a.touched)),o.Y8G("interfaceOptions",o.lJ4(5,po)),o.R7$(),o.Y8G("ngForOf",e.empresas),o.R7$(),o.Y8G("ngIf",(null==(n=e.getControl("empresa"))?null:n.invalid)&&(null==(n=e.getControl("empresa"))?null:n.touched))}}function Oo(t,r){1&t&&(o.j41(0,"ion-item",36)(1,"p",37),o.EFF(2," Solo se muestran los primeros 30 usuarios encontrados. Si no encuentra el deseado, utilice el buscador para obtener un resultado m\xe1s preciso. "),o.k0s()())}function Vo(t,r){if(1&t){const a=o.RV6();o.j41(0,"ion-col",8)(1,"ion-item",32)(2,"ion-label",33),o.EFF(3,"Usuario parent"),o.k0s(),o.j41(4,"ionic-selectable",34,0),o.bIt("onSearch",function(e){o.eBV(a);const i=o.XpG();return o.Njj(i.onSearchChange(e))})("onOpen",function(e){o.eBV(a);const i=o.XpG();return o.Njj(i.onOpen(e))}),o.DNE(6,Oo,3,0,"ng-template",35),o.k0s()()()}if(2&t){const a=o.XpG();o.R7$(4),o.Y8G("items",a.usuarios)("searchFailText","No se encontraron usuarios.")("canSearch",!0)("canClear",!0)}}let z=(()=>{var t;class r{constructor(n,e,i,l,u,f,p,g,_){this.fb=n,this.usuarioService=e,this.toastController=i,this.loadingCtrl=l,this.gruposService=u,this.empresasService=f,this.fuenteOrigenService=p,this.catalogosService=g,this.modalCtrl=_,this.btnName="AGREGAR",this.title="AGREGAR",this.formEnviado=!1,this.paises=[],this.estados=[],this.fuentesOrigen=[],this.isNacional=!1,this.roles=[],this.grupos=[],this.empresas=[],this.usuarios=[],this.mostrarGrupos=!1,this.mostrarEmpresas=!1,this.mostrarParent=!1,this.searchSubject=new y.B,this.firstSearch=!1,this.textoPassword="Contrase\xf1a",this.ContrasenaLabel="Contrase\xf1a",this.id=void 0,this.formulario=this.fb.group({nombre:["",[c.k0.required,(0,j.a)()]],apellido:["",[c.k0.required,(0,j.a)()]],email:["",[c.k0.required,(0,j.a)(),c.k0.email]],pais:["",c.k0.required],ciudad:["",[c.k0.required,(0,j.a)()]],estado:[""],estadoTexto:[""],telefono:["",[c.k0.required,(0,j.a)()]],password:["",[c.k0.minLength(6)]],fuenteOrigen:["",c.k0.required],rol:["",c.k0.required],grupo:[""],empresa:[""],parent:[]}),this.setupSearch()}ngOnInit(){var n=this;return(0,D.A)(function*(){const e=yield n.loadingCtrl.create({message:"Cargando datos..."});yield e.present();try{n.roles=(0,E.Cn)();const l=yield(0,F._)(n.gruposService.getAllGrupos());n.grupos=(null==l?void 0:l.data)||[];const u=yield(0,F._)(n.empresasService.getAllEmpresas());n.empresas=(null==u?void 0:u.data)||[];const f=yield(0,F._)(n.fuenteOrigenService.getCatalogoFuentesOrigen());n.fuentesOrigen=(null==f?void 0:f.data)||[];const p=yield(0,F._)(n.catalogosService.getCatalogoPaises());n.paises=(null==p?void 0:p.data)||[];const g=yield(0,F._)(n.catalogosService.getCatalogoEstados());n.estados=(null==g?void 0:g.data)||[];const _=n.formulario.get("password");if(null!=n.id)n.btnName="GUARDAR",n.title="MODIFICAR",n.textoPassword="Capture contrase\xf1a solo si desea cambiarla.",n.ContrasenaLabel="Nueva contrase\xf1a",n.usuarioService.getUsuarioByID(n.id).subscribe({next:m=>{n.formulario.patchValue({nombre:m.data.nombres,apellido:m.data.apellidos,email:m.data.email,pais:m.data.catalogoPaisID,estado:m.data.catalogoEstadoID,estadoTexto:m.data.estadoTexto,ciudad:m.data.ciudad,telefono:m.data.celular,fuenteOrigen:m.data.fuenteOrigenID,rol:m.data.rolesEnum,grupo:m.data.grupoID,empresa:m.data.empresaID}),n.rolChange(m.data.rolesEnum),n.isNacional=!!m.data.catalogoEstadoID,null!=m.data.usuarioParentID&&m.data.usuarioParentID>0&&n.usuarioService.busquedaUsuario(m.data.usuarioParentNombreCompleto.trim()).subscribe(v=>{n.usuarios=v.data,n.formulario.patchValue({parent:n.usuarios.find(b=>b.id===m.data.usuarioParentID)})})}});else{var i=n.paises.find(m=>"MEX"==m.codigo);n.formulario.patchValue({pais:null==i?void 0:i.id}),n.isNacional=!0,n.formulario.patchValue({password:n.generateSecurePassword(8)}),null==_||_.setValidators([c.k0.required]),null==_||_.updateValueAndValidity()}}catch(l){console.error("Error al cargar datos",l)}finally{e.dismiss()}})()}enviarFormulario(){if(!this.formEnviado){if(this.formEnviado=!0,this.formulario.invalid)return this.formulario.markAllAsTouched(),void(this.formEnviado=!1);var n=this.formulario.controls.parent.value;this.formulario.controls.rol.value!=E.$u.Embajadores&&(n=null);var i={nombres:(0,C.H)(this.formulario.controls.nombre.value),apellidos:(0,C.H)(this.formulario.controls.apellido.value),email:(0,C.H)(this.formulario.controls.email.value),celular:(0,C.H)(this.formulario.controls.telefono.value),catalogoPaisID:this.formulario.controls.pais.value,catalogoEstadoID:""==this.formulario.controls.estado.value?void 0:this.formulario.controls.estado.value,estadoTexto:(0,C.H)(this.formulario.controls.estadoTexto.value),ciudad:(0,C.H)(this.formulario.controls.ciudad.value),fuenteOrigenID:this.formulario.controls.fuenteOrigen.value,usuarioParentID:null!=n?n.id:void 0,rolesEnum:this.formulario.controls.rol.value,grupoID:""==this.formulario.controls.grupo.value?void 0:this.formulario.controls.grupo.value,empresaID:""==this.formulario.controls.empresa.value?void 0:this.formulario.controls.empresa.value,password:(this.formulario.controls.password.value||"").trim()};null!=this.id&&(i.id=this.id),this.usuarioService.save(i).pipe((0,oo.j)(()=>{this.formEnviado=!1})).subscribe({next:l=>{l&&(this.toastController.create({message:"Grupo guardado.",duration:3e3,color:"success",position:"top"}).then(u=>u.present()),this.modalCtrl.dismiss(!0))}})}}getControl(n){return this.formulario.get(n)}close(){this.modalCtrl.dismiss()}onPaisChange(n){const e=n.detail.value;var i=this.paises.find(f=>f.id==e);const l=this.formulario.get("estado"),u=this.formulario.get("estadoTexto");"MEX"==i.codigo?(this.isNacional=!0,null==l||l.setValidators([c.k0.required]),null==u||u.clearValidators()):(this.isNacional=!1,null==u||u.setValidators([c.k0.required]),null==l||l.clearValidators()),null==l||l.updateValueAndValidity(),null==u||u.updateValueAndValidity()}onRolChange(n){this.rolChange(n.detail.value)}rolChange(n){var e=!1,i=!1;switch(this.mostrarEmpresas=!1,this.mostrarGrupos=!1,this.mostrarParent=!1,n){case E.$u.Admin:break;case E.$u.Socio:i=!0,this.mostrarEmpresas=!0;break;case E.$u.Embajadores:e=!0,this.mostrarGrupos=!0,this.mostrarParent=!0}const l=this.formulario.get("grupo");e?null==l||l.setValidators([c.k0.required]):(null==l||l.clearValidators(),null==l||l.setValue("")),null==l||l.updateValueAndValidity();const u=this.formulario.get("empresa");i?null==u||u.setValidators([c.k0.required]):(null==u||u.clearValidators(),null==u||u.setValue("")),null==u||u.updateValueAndValidity()}generateSecurePassword(n=12){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="abcdefghijklmnopqrstuvwxyz",l="0123456789",u="!@#$%^&*()_+~`|}{[]:;?><,./-=",f=e+i+l+u;let p="";p+=e[Math.floor(26*Math.random())],p+=i[Math.floor(26*Math.random())],p+=l[Math.floor(10*Math.random())],p+=u[Math.floor(29*Math.random())];for(let g=p.length;g<n;g++)p+=f[Math.floor(91*Math.random())];return p.split("").sort(()=>.5-Math.random()).join("")}refreshPassword(){this.formulario.patchValue({password:this.generateSecurePassword(8)})}onSearchChange(n){n.component.startSearch(),this.searchSubject.next(n)}setupSearch(){this.searchSubject.pipe((0,P.B)(300)).subscribe(n=>{const e=n.text.trim();if(e.length<2&&""!=e)return n.component.items=this.usuarios,void n.component.endSearch();this.usuarioService.busquedaUsuario(e.toLowerCase()).subscribe(l=>{this.usuarios=l.data,n.component.items=this.usuarios,n.component.endSearch()},l=>{n.component.items=[],n.component.endSearch()})})}onOpen(n){this.selectableComponent&&(this.selectableComponent._onSearchbarClear=function(){this._searchText="",this._filterItems()})}}return(t=r).\u0275fac=function(n){return new(n||t)(o.rXU(c.ok),o.rXU(Y.o),o.rXU(s.K_),o.rXU(s.Xi),o.rXU(eo.b),o.rXU(to.z),o.rXU(no),o.rXU(lo),o.rXU(s.W3))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-modal",8,"usuario","form"]],viewQuery:function(n,e){if(1&n&&o.GBs(ao,5),2&n){let i;o.mGM(i=o.lsd())&&(e.selectableComponent=i.first)}},inputs:{id:"id"},attrs:io,decls:53,vars:49,consts:[["selectableComponent",""],[1,"modalHeader"],["slot","end"],[3,"click"],["name","close"],[1,"ion-padding",3,"fullscreen"],[1,"modalform-title","ion-text-center"],[1,"modalform",3,"formGroup"],["size","12","size-md","6"],["label-placement","floating","label","Nombre","formControlName","nombre","placeholder","Nombre(s)","type","text",1,"inputForm",3,"ionBlur"],["color","danger",4,"ngIf"],["label-placement","floating","label","Apellido","formControlName","apellido","placeholder","Apellido(s)","type","text",1,"inputForm",3,"ionBlur"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Pais","formControlName","pais",1,"inputForm",3,"ionChange","ionBlur","interfaceOptions"],[3,"value",4,"ngFor","ngForOf"],["size","12","size-md","6",4,"ngIf"],["label-placement","floating","label","Ciudad","formControlName","ciudad","placeholder","Ciudad","type","text",1,"inputForm",3,"ionBlur"],["okText","Ok","label-placement","floating","label","Fuente de origen","cancelText","Cancelar","formControlName","fuenteOrigen",1,"inputForm",3,"ionBlur","interfaceOptions"],["size","12","size-md","12"],["autocomplete","off","label-placement","floating","label","Correo electronico","formControlName","email","placeholder","Correo de contacto (usuario)","type","text",1,"inputForm",3,"ionBlur"],["label-placement","floating","label","Celular (WhatsApp)","formControlName","telefono","placeholder","WhatsApp","type","text",1,"inputForm",3,"ionBlur"],["label-placement","stacked","autocomplete","new-password","formControlName","password","type","text",1,"inputForm",3,"ionBlur","label","placeholder"],["fill","clear","slot","end","aria-label","Show/hide",1,"input-icon-button",3,"click"],["slot","icon-only","name","refresh","aria-hidden","true"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Rol de usuario","formControlName","rol",1,"inputForm",3,"ionChange","ionBlur","interfaceOptions"],[2,"width","100%","text-align","center"],["shape","round",1,"customButton",3,"click","disabled"],["color","danger"],[3,"value"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Estado","formControlName","estado",1,"inputForm",3,"ionBlur","interfaceOptions"],["label-placement","floating","label","Estado","formControlName","estadoTexto","placeholder","Estado","type","text",1,"inputForm",3,"ionBlur"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Grupo","formControlName","grupo",1,"inputForm",3,"ionBlur","interfaceOptions"],["okText","Ok","cancelText","Cancelar","label-placement","floating","label","Empresa","formControlName","empresa",1,"inputForm",3,"ionBlur","interfaceOptions"],[1,"inputForm"],["position","floating"],["item-content","","formControlName","parent","itemValueField","id","closeButtonSlot","end","itemTextField","nombreCompleto","closeButtonText","Cancelar","searchPlaceholder","Buscar usuario...","clearButtonText","Limpiar",3,"onSearch","onOpen","items","searchFailText","canSearch","canClear"],["ionicSelectableMessageTemplate",""],["text-wrap",""],[2,"color","grey","font-size","small"]],template:function(n,e){if(1&n&&(o.j41(0,"ion-header",1)(1,"ion-buttons",2)(2,"ion-button",3),o.bIt("click",function(){return e.close()}),o.nrm(3,"ion-icon",4),o.k0s()()(),o.j41(4,"ion-content",5)(5,"h2",6),o.EFF(6),o.k0s(),o.j41(7,"form",7)(8,"ion-grid")(9,"ion-row")(10,"ion-col",8)(11,"ion-input",9),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("nombre"))?null:l.markAsTouched()}),o.k0s(),o.DNE(12,fo,2,0,"ion-text",10),o.k0s(),o.j41(13,"ion-col",8)(14,"ion-input",11),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("apellido"))?null:l.markAsTouched()}),o.k0s(),o.DNE(15,ho,2,0,"ion-text",10),o.k0s(),o.j41(16,"ion-col",8)(17,"ion-select",12),o.bIt("ionChange",function(l){return e.onPaisChange(l)})("ionBlur",function(){let l;return null==(l=e.getControl("pais"))?null:l.markAsTouched()}),o.DNE(18,go,2,2,"ion-select-option",13),o.k0s(),o.DNE(19,_o,2,0,"ion-text",10),o.k0s(),o.DNE(20,bo,4,6,"ion-col",14)(21,Eo,3,3,"ion-col",14),o.j41(22,"ion-col",8)(23,"ion-input",15),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("ciudad"))?null:l.markAsTouched()}),o.k0s(),o.DNE(24,jo,2,0,"ion-text",10),o.k0s(),o.j41(25,"ion-col",8)(26,"ion-select",16),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("fuenteOrigen"))?null:l.markAsTouched()}),o.DNE(27,To,2,2,"ion-select-option",13),o.k0s(),o.DNE(28,ko,2,0,"ion-text",10),o.k0s(),o.j41(29,"ion-col",17)(30,"ion-input",18),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("email"))?null:l.markAsTouched()}),o.k0s(),o.DNE(31,Ro,2,0,"ion-text",10),o.k0s(),o.j41(32,"ion-col",8)(33,"ion-input",19),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("telefono"))?null:l.markAsTouched()}),o.k0s(),o.DNE(34,Mo,2,0,"ion-text",10),o.k0s(),o.j41(35,"ion-col",8)(36,"ion-input",20),o.bIt("ionBlur",function(){let l;return null==(l=e.getControl("password"))?null:l.markAsTouched()}),o.j41(37,"ion-button",21),o.bIt("click",function(){return e.refreshPassword()}),o.nrm(38,"ion-icon",22),o.k0s()(),o.DNE(39,Go,2,0,"ion-text",10)(40,Io,2,0,"ion-text",10),o.k0s(),o.j41(41,"ion-col",8)(42,"ion-select",23),o.bIt("ionChange",function(l){return e.onRolChange(l)})("ionBlur",function(){let l;return null==(l=e.getControl("rol"))?null:l.markAsTouched()}),o.DNE(43,$o,2,2,"ion-select-option",13),o.k0s(),o.DNE(44,So,2,0,"ion-text",10),o.k0s(),o.DNE(45,Bo,4,6,"ion-col",14)(46,yo,4,6,"ion-col",14)(47,Vo,7,4,"ion-col",14),o.k0s()()()(),o.j41(48,"ion-footer")(49,"ion-toolbar")(50,"div",24)(51,"ion-button",25),o.bIt("click",function(){return e.enviarFormulario()}),o.EFF(52),o.k0s()()()()),2&n){let i,l,u,f,p,g,_,m,v,b,R,M,G,I,$,S,U,x,B;o.R7$(4),o.Y8G("fullscreen",!1),o.R7$(2),o.SpI("",e.title," EMBAJADOR"),o.R7$(),o.Y8G("formGroup",e.formulario),o.R7$(4),o.AVh("invalid",(null==(i=e.getControl("nombre"))?null:i.invalid)&&(null==(i=e.getControl("nombre"))?null:i.touched)),o.R7$(),o.Y8G("ngIf",(null==(l=e.getControl("nombre"))?null:l.invalid)&&(null==(l=e.getControl("nombre"))?null:l.touched)),o.R7$(2),o.AVh("invalid",(null==(u=e.getControl("apellido"))?null:u.invalid)&&(null==(u=e.getControl("apellido"))?null:u.touched)),o.R7$(),o.Y8G("ngIf",(null==(f=e.getControl("apellido"))?null:f.invalid)&&(null==(f=e.getControl("apellido"))?null:f.touched)),o.R7$(2),o.AVh("invalid",(null==(p=e.getControl("pais"))?null:p.invalid)&&(null==(p=e.getControl("pais"))?null:p.touched)),o.Y8G("interfaceOptions",o.lJ4(46,ro)),o.R7$(),o.Y8G("ngForOf",e.paises),o.R7$(),o.Y8G("ngIf",(null==(g=e.getControl("pais"))?null:g.invalid)&&(null==(g=e.getControl("pais"))?null:g.touched)),o.R7$(),o.Y8G("ngIf",e.isNacional),o.R7$(),o.Y8G("ngIf",!e.isNacional),o.R7$(2),o.AVh("invalid",(null==(_=e.getControl("ciudad"))?null:_.invalid)&&(null==(_=e.getControl("ciudad"))?null:_.touched)),o.R7$(),o.Y8G("ngIf",(null==(m=e.getControl("ciudad"))?null:m.invalid)&&(null==(m=e.getControl("ciudad"))?null:m.touched)),o.R7$(2),o.AVh("invalid",(null==(v=e.getControl("fuenteOrigen"))?null:v.invalid)&&(null==(v=e.getControl("fuenteOrigen"))?null:v.touched)),o.Y8G("interfaceOptions",o.lJ4(47,so)),o.R7$(),o.Y8G("ngForOf",e.fuentesOrigen),o.R7$(),o.Y8G("ngIf",(null==(b=e.getControl("fuenteOrigen"))?null:b.invalid)&&(null==(b=e.getControl("fuenteOrigen"))?null:b.touched)),o.R7$(2),o.AVh("invalid",(null==(R=e.getControl("email"))?null:R.invalid)&&(null==(R=e.getControl("email"))?null:R.touched)),o.R7$(),o.Y8G("ngIf",(null==(M=e.getControl("email"))?null:M.invalid)&&(null==(M=e.getControl("email"))?null:M.touched)),o.R7$(2),o.AVh("invalid",(null==(G=e.getControl("telefono"))?null:G.invalid)&&(null==(G=e.getControl("telefono"))?null:G.touched)),o.R7$(),o.Y8G("ngIf",(null==(I=e.getControl("telefono"))?null:I.invalid)&&(null==(I=e.getControl("telefono"))?null:I.touched)),o.R7$(2),o.AVh("invalid",(null==($=e.getControl("password"))?null:$.invalid)&&(null==($=e.getControl("password"))?null:$.touched)),o.Y8G("label",e.ContrasenaLabel)("placeholder",e.textoPassword),o.R7$(3),o.Y8G("ngIf",(null==(S=e.getControl("password"))?null:S.hasError("required"))&&(null==(S=e.getControl("password"))?null:S.touched)),o.R7$(),o.Y8G("ngIf",(null==(U=e.getControl("password"))?null:U.hasError("minlength"))&&(null==(U=e.getControl("password"))?null:U.touched)),o.R7$(2),o.AVh("invalid",(null==(x=e.getControl("rol"))?null:x.invalid)&&(null==(x=e.getControl("rol"))?null:x.touched)),o.Y8G("interfaceOptions",o.lJ4(48,uo)),o.R7$(),o.Y8G("ngForOf",e.roles),o.R7$(),o.Y8G("ngIf",(null==(B=e.getControl("rol"))?null:B.invalid)&&(null==(B=e.getControl("rol"))?null:B.touched)),o.R7$(),o.Y8G("ngIf",e.mostrarGrupos),o.R7$(),o.Y8G("ngIf",e.mostrarEmpresas),o.R7$(),o.Y8G("ngIf",e.mostrarParent),o.R7$(4),o.Y8G("disabled",e.formEnviado),o.R7$(),o.SpI(" ",e.btnName," ")}},dependencies:[s.bv,s.Jm,s.QW,s.hU,s.W9,s.M0,s.lO,s.eU,s.iq,s.$w,s.uz,s.he,s.ln,s.Nm,s.Ip,s.IO,s.ai,s.Je,s.Gw,c.X1,c.qT,c.BC,c.cb,c.j4,c.JD,T.MD,T.Sq,T.bT,A.ec,A.pF],styles:[".input-icon-button[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--margin-start: 0;--margin-end: 0;--margin-top: 0;--margin-bottom: 0;height:30px!important;width:40px!important;min-height:5px!important;min-width:5px!important}"]}),r})();const Po=()=>[20,50,100];function Ao(t,r){1&t&&(o.j41(0,"th",27),o.EFF(1," Nombre "),o.k0s())}function Yo(t,r){if(1&t&&(o.j41(0,"td",28),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.R7$(),o.SpI(" ",a.nombreCompleto," ")}}function wo(t,r){1&t&&(o.j41(0,"th",27),o.EFF(1," Rol "),o.k0s())}function Xo(t,r){if(1&t&&(o.j41(0,"td",28),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.R7$(),o.SpI(" ",a.rol," ")}}function zo(t,r){1&t&&(o.j41(0,"th",27),o.EFF(1," Email "),o.k0s())}function Ho(t,r){if(1&t&&(o.j41(0,"td",28),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.R7$(),o.SpI(" ",a.email," ")}}function qo(t,r){1&t&&(o.j41(0,"th",27),o.EFF(1," Celular "),o.k0s())}function Jo(t,r){if(1&t&&(o.j41(0,"td",28),o.EFF(1),o.k0s()),2&t){const a=r.$implicit;o.R7$(),o.SpI(" ",a.celular," ")}}function Lo(t,r){1&t&&(o.j41(0,"th",29),o.EFF(1," Opciones "),o.k0s())}function Qo(t,r){if(1&t){const a=o.RV6();o.j41(0,"td",28)(1,"ion-button",30),o.bIt("click",function(){const e=o.eBV(a).$implicit,i=o.XpG();return o.Njj(i.editModal(e.id))}),o.nrm(2,"ion-icon",31),o.j41(3,"small"),o.EFF(4,"Editar"),o.k0s()()()}}function Wo(t,r){1&t&&o.nrm(0,"tr",32)}function Ko(t,r){1&t&&o.nrm(0,"tr",33)}function Zo(t,r){if(1&t&&(o.j41(0,"tr",34)(1,"td",35),o.EFF(2," No se encontraron registros disponibles. "),o.k0s()()),2&t){const a=o.XpG();o.R7$(),o.BMQ("colspan",a.displayedColumns.length)}}const oe=[{path:"",component:(()=>{var t;class r{constructor(n,e){this.usuarioService=n,this.modalCtrl=e,this.dataSourceTable=new h.I6,this.displayedColumns=["NombreCompleto","Rol","Email","Celular","Visualizar"],this.inputBuscar=new y.B,this.query="",this.destroy$=new y.B}ngAfterViewInit(){this.dataSourceTable.paginator=this.paginator,this.loadtable()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){this.inputBuscar.pipe((0,P.B)(1e3),(0,H.F)(),(0,q.Q)(this.destroy$)).subscribe(n=>{this.query=n.toString(),this.loadtable()})}loadtable(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,J.h)(this.sort.sortChange,this.paginator.page).pipe((0,L.Z)({}),(0,Q.n)(()=>this.usuarioService.getTablePaginated({page:this.paginator.pageIndex,size:this.paginator.pageSize,sortBy:this.sort.active,sortDir:this.sort.direction,searchQuery:this.query}).pipe((0,W.W)(()=>(0,K.of)(null)))),(0,Z.T)(n=>null===n?[]:(this.total=n.data.total,n.data.items))).subscribe(n=>{this.dataSourceTable=new h.I6(n)})}addModal(){var n=this;return(0,D.A)(function*(){const e=yield n.modalCtrl.create({component:z,cssClass:"modal-usuario"});yield e.present();const{data:i}=yield e.onDidDismiss();i&&(console.log(i),n.loadtable())})()}editModal(n){var e=this;return(0,D.A)(function*(){const i=yield e.modalCtrl.create({component:z,cssClass:"modal-usuario",componentProps:{id:n}});yield i.present();const{data:l}=yield i.onDidDismiss();l&&(console.log(l),e.loadtable())})()}}return(t=r).\u0275fac=function(n){return new(n||t)(o.rXU(Y.o),o.rXU(s.W3))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-embajadores"]],viewQuery:function(n,e){if(1&n&&(o.GBs(N.iy,5),o.GBs(k.B4,5)),2&n){let i;o.mGM(i=o.lsd())&&(e.paginator=i.first),o.mGM(i=o.lsd())&&(e.sort=i.first)}},standalone:!1,decls:45,vars:8,consts:[[1,"pagesHeader"],["slot","start"],["name","flag","color","white"],[1,"pagesContent"],[1,"ion-align-items-center"],["size","12","size-md","9",1,"ion-text-center"],["placeholder","Buscar por Nombres, Apellidos, Rol, Email o Celular",1,"inputBusqueda",3,"ionInput"],["slot","end","name","search","aria-hidden","true"],["size","12","size-md","2",1,"ion-text-center"],["expand","block","shape","round",1,"customGreenButton",3,"click"],["name","add","color","white"],[1,"referidosHeader"],[1,"title"],[2,"overflow-x","auto"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","NombreCompleto"],["mat-header-cell","","style","padding-left: 1rem;","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Rol"],["matColumnDef","Email"],["matColumnDef","Celular"],["matColumnDef","Visualizar"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","mydivoutermulti elemento-renglon",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header","",2,"padding-left","1rem"],["mat-cell",""],["mat-header-cell",""],["shape","round","fill","clear",3,"click"],["slot","icon-only","name","create"],["mat-header-row",""],["mat-row","",1,"mydivoutermulti","elemento-renglon"],[1,"mat-row"],[2,"text-align","center","padding","1rem"]],template:function(n,e){1&n&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title")(5,"h1"),o.nrm(6,"ion-icon",2),o.EFF(7," Embajadores"),o.k0s()()()(),o.j41(8,"ion-content",3)(9,"div")(10,"ion-grid")(11,"ion-row",4)(12,"ion-col",5)(13,"ion-input",6),o.bIt("ionInput",function(l){return e.inputBuscar.next(l.detail.value||"")}),o.nrm(14,"ion-icon",7),o.k0s()(),o.j41(15,"ion-col",8)(16,"ion-button",9),o.bIt("click",function(){return e.addModal()}),o.nrm(17,"ion-icon",10),o.EFF(18," AGREGAR"),o.k0s()()()()(),o.j41(19,"ion-card")(20,"ion-card-header",11)(21,"ion-card-title",12),o.EFF(22,"Embajadores"),o.k0s()(),o.j41(23,"ion-card-content")(24,"div",13)(25,"table",14),o.qex(26,15),o.DNE(27,Ao,2,0,"th",16)(28,Yo,2,1,"td",17),o.bVm(),o.qex(29,18),o.DNE(30,wo,2,0,"th",16)(31,Xo,2,1,"td",17),o.bVm(),o.qex(32,19),o.DNE(33,zo,2,0,"th",16)(34,Ho,2,1,"td",17),o.bVm(),o.qex(35,20),o.DNE(36,qo,2,0,"th",16)(37,Jo,2,1,"td",17),o.bVm(),o.qex(38,21),o.DNE(39,Lo,2,0,"th",22)(40,Qo,5,0,"td",17),o.bVm(),o.DNE(41,Wo,1,0,"tr",23)(42,Ko,1,0,"tr",24)(43,Zo,3,1,"tr",25),o.k0s()(),o.nrm(44,"mat-paginator",26),o.k0s()()()),2&n&&(o.R7$(25),o.Y8G("dataSource",e.dataSourceTable),o.R7$(16),o.Y8G("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),o.R7$(),o.Y8G("matRowDefColumns",e.displayedColumns),o.R7$(2),o.Y8G("length",e.total)("pageSizeOptions",o.lJ4(7,Po))("pageSize",50))},dependencies:[s.Jm,s.QW,s.b_,s.I9,s.ME,s.tN,s.hU,s.W9,s.lO,s.eU,s.iq,s.$w,s.MC,s.ln,s.BC,s.ai,s.Gw,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,h.ky,N.iy,k.B4,k.aE],encapsulation:2}),r})()}];let ee=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[V.iI.forChild(oe),V.iI]}),r})(),te=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[T.MD,c.YN,s.bv,ee,h.tP,N.Ou,k.NQ]}),r})()}}]);