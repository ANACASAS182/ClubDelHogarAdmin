  <ion-header class="pagesHeader">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title><h1><ion-icon name="business" color="white"></ion-icon> Empresas socias</h1></ion-title>
    </ion-toolbar>
  </ion-header>


  <ion-content class="pagesContent">

    <div>
      <ion-grid>
        <ion-row class="ion-align-items-center">

          <ion-col size="12" size-md="9" class="ion-text-center">
            <ion-input class="inputBusqueda"  (ionInput)="inputBuscar.next($event.detail.value || '')"
              placeholder="Buscar por RFC, Raz칩n Social o Nombre comercial">
              <ion-icon slot="end" name="search" aria-hidden="true"></ion-icon>
            </ion-input>
          </ion-col>

          <!-- Bot칩n a la derecha -->
          <ion-col size="12" size-md="2" class="ion-text-center">
            <ion-button expand="block" shape="round" class="customGreenButton" (click)="addModal()"><ion-icon name="add"
                color="white"></ion-icon> AGREGAR</ion-button>
          </ion-col>
        </ion-row>

        <ion-row class="ion-align-items-center">
          <ion-col size="12" size-md="9" class="ion-text-center">
            <ion-item class="inputBusqueda">
              <ion-label position="floating">Filtro por grupo</ion-label>
              <ionic-selectable item-content [items]="grupos" 
                itemValueField="id" closeButtonSlot="end"
                itemTextField="nombre" closeButtonText="Cancelar" [canSearch]="true"
                [canClear]="true" clearButtonText="Limpiar" (onChange)="onGrupoSelect($event)" (onClear)="onGrupoClear($event)">
              </ionic-selectable>
            </ion-item>
            <!-- <ion-select [interfaceOptions]="{ header: 'Seleccion grupo a filtrar' }" class="inputBusqueda" okText="Ok"
              cancelText="Cancelar" label-placement="floating" label="Filtro por grupo" (ionChange)="onGrupoSelect($event)">
              <ion-select-option *ngFor="let rol of grupos" [value]="rol.id">
                {{ rol.nombre }}
              </ion-select-option>
            </ion-select> -->
          </ion-col>


        </ion-row>
      </ion-grid>
    </div>

    <!-- Panel inferior con tabla b치sica -->
    <ion-card>
      <ion-card-header class="referidosHeader">
        <ion-card-title class="title">Empresas</ion-card-title>
      </ion-card-header>
      <ion-card-content>

        <div style="overflow-x: auto;">
          <table mat-table [dataSource]="dataSourceTable" matSort>

            <ng-container matColumnDef="RFC">
              <th mat-header-cell style="padding-left: 1rem;" *matHeaderCellDef mat-sort-header> RFC </th>
              <td mat-cell *matCellDef="let element"> {{ element.rfc }} </td>
            </ng-container>

            <ng-container matColumnDef="RazonSocial">
              <th mat-header-cell style="padding-left: 1rem;" *matHeaderCellDef mat-sort-header> Raz칩n social </th>
              <td mat-cell *matCellDef="let element"> {{ element.razonSocial }} </td>
            </ng-container>

            <ng-container matColumnDef="NombreComercial">
              <th mat-header-cell style="padding-left: 1rem;" *matHeaderCellDef mat-sort-header> Nombre comercial </th>
              <td mat-cell *matCellDef="let element"> {{ element.nombreComercial }} </td>
            </ng-container>

            <ng-container matColumnDef="Grupo">
              <th mat-header-cell style="padding-left: 1rem;" *matHeaderCellDef> Grupo </th>
              <td mat-cell *matCellDef="let element">
                <span *ngFor="let grupo of element.grupos; let last = last">
                  {{ grupo.nombre }}<span *ngIf="!last">, </span>
                </span>
              </td>
            </ng-container>


            <ng-container matColumnDef="Visualizar">
              <th mat-header-cell *matHeaderCellDef> Opciones </th>
              <td mat-cell *matCellDef="let element">
                <ion-button shape="round" fill="clear" (click)="editModal(element.id)">
                  <ion-icon slot="icon-only" name="create"></ion-icon><small>Editar</small>
                </ion-button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="mydivoutermulti elemento-renglon">
            </tr>
            <tr class="mat-row" *matNoDataRow>
            <td [attr.colspan]="displayedColumns.length" style="text-align: center; padding: 1rem;">
              No se encontraron registros disponibles.
            </td>
          </tr>
          </table>
        </div>

        <mat-paginator [length]="total" [pageSizeOptions]="[20, 50, 100]" showFirstLastButtons [pageSize]="50">
        </mat-paginator>

      </ion-card-content>
    </ion-card>
  </ion-content>