<div class="reset-wrapper">
  <div class="reset-card">
    <img src="/assets/logo.PNG" alt="Embassy" class="logo" />
    <h2 class="title">Restablecer contrase√±a</h2>
    <p class="subtitle">Crea una nueva contrase√±a para tu cuenta.</p>

    <div *ngIf="errorMsg" class="alert warn">{{ errorMsg }}</div>
    <div *ngIf="okMsg" class="alert ok">{{ okMsg }}</div>

      <!-- üëá Solo renderiza el formulario si el token es v√°lido -->
    <form *ngIf="validToken" [formGroup]="form" (ngSubmit)="submit()">
      <label class="label">Nueva contrase√±a</label>
      <input
        type="password"
        formControlName="password"
        class="input"
        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
      />
      <small
        class="hint error"
        *ngIf="form.controls.password.touched && form.controls.password.errors"
      >
        La contrase√±a debe tener al menos 6 caracteres.
      </small>

      <label class="label">Confirmar nueva contrase√±a</label>
      <input
        type="password"
        formControlName="confirmPassword"
        class="input"
        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
      />
      <small
        class="hint error"
        *ngIf="form.controls.confirmPassword.touched && form.controls.confirmPassword.errors"
      >
        Campo requerido.
      </small>

      <button type="submit" class="btn" [disabled]="loading">Cambiar contrase√±a</button>
      <p class="footnote">El enlace expira tras unas horas por seguridad.</p>
    </form>

    <!-- Mensaje alterno si es inv√°lido -->
    <div *ngIf="!validToken && !okMsg && errorMsg" class="info">
      Si necesitas otro enlace, solicita nuevamente el cambio de contrase√±a.
    </div>  
  </div>
</div>
